/*2016-06-07 18:35:19 smartisan*/
var jaaulde=window.jaaulde||{};jaaulde.utils=jaaulde.utils||{},jaaulde.utils.cookies=function(){var e,t,o,n,a={expiresAt:null,path:"/",domain:null,secure:!1};return e=function(e){var t,o;return"object"!=typeof e||null===e?t=a:(t={expiresAt:a.expiresAt,path:a.path,domain:a.domain,secure:a.secure},"object"==typeof e.expiresAt&&e.expiresAt instanceof Date?t.expiresAt=e.expiresAt:"number"==typeof e.hoursToLive&&0!==e.hoursToLive&&(o=new Date,o.setTime(o.getTime()+60*e.hoursToLive*60*1e3),t.expiresAt=o),"string"==typeof e.path&&""!==e.path&&(t.path=e.path),"string"==typeof e.domain&&""!==e.domain&&(t.domain=e.domain),e.secure===!0&&(t.secure=e.secure)),t},t=function(t){return t=e(t),("object"==typeof t.expiresAt&&t.expiresAt instanceof Date?"; expires="+t.expiresAt.toGMTString():"")+"; path="+t.path+("string"==typeof t.domain?"; domain="+t.domain:"")+(t.secure===!0?"; secure":"")},o=function(){var e,t,o,n,a,i={},r=document.cookie.split(";");for(e=0;e<r.length;e+=1){t=r[e].split("="),o=t[0].replace(/^\s*/,"").replace(/\s*$/,"");try{n=decodeURIComponent(t[1])}catch(s){n=t[1]}if("object"==typeof JSON&&null!==JSON&&"function"==typeof JSON.parse)try{a=n,n=JSON.parse(n)}catch(l){n=a}i[o]=n}return i},n=function(){},n.prototype.get=function(e){var t,n,a=o();if("string"==typeof e)t="undefined"!=typeof a[e]?a[e]:null;else if("object"==typeof e&&null!==e){t={};for(n in e)"undefined"!=typeof a[e[n]]?t[e[n]]=a[e[n]]:t[e[n]]=null}else t=a;return t},n.prototype.filter=function(e){var t,n={},a=o();"string"==typeof e&&(e=new RegExp(e));for(t in a)t.match(e)&&(n[t]=a[t]);return n},n.prototype.set=function(e,o,n){if(("object"!=typeof n||null===n)&&(n={}),"undefined"==typeof o||null===o)o="",n.hoursToLive=-8760;else if("string"!=typeof o){if("object"!=typeof JSON||null===JSON||"function"!=typeof JSON.stringify)throw new Error("cookies.set() received non-string value and could not serialize.");o=JSON.stringify(o)}var a=t(n);document.cookie=e+"="+encodeURIComponent(o)+a},n.prototype.del=function(e,t){var o,n={};("object"!=typeof t||null===t)&&(t={}),"boolean"==typeof e&&e===!0?n=this.get():"string"==typeof e&&(n[e]=!0);for(o in n)"string"==typeof o&&""!==o&&this.set(o,null,t)},n.prototype.test=function(){var e=!1,t="cT",o="data";return this.set(t,o),this.get(t)===o&&(this.del(t),e=!0),e},n.prototype.setOptions=function(t){"object"!=typeof t&&(t=null),a=e(t)},new n}(),function(){(window.jQuery||window.Zepto)&&!function(e){e.cookies=jaaulde.utils.cookies;var t={cookify:function(t){return this.each(function(){var o,n,a,i=["name","id"],r=e(this);for(o in i)if(!isNaN(o)&&(n=r.attr(i[o]),"string"==typeof n&&""!==n)){r.is(":checkbox, :radio")?r.attr("checked")&&(a=r.val()):a=r.is(":input")?r.val():r.html(),("string"!=typeof a||""===a)&&(a=null),e.cookies.set(n,a,t);break}})},cookieFill:function(){return this.each(function(){var t,o,n,a,i=["name","id"],r=e(this);for(o=function(){return t=i.pop(),!!t};o();)if(n=r.attr(t),"string"==typeof n&&""!==n){a=e.cookies.get(n),null!==a&&(r.is(":checkbox, :radio")?r.val()===a?r.attr("checked","checked"):r.removeAttr("checked"):r.is(":input")?r.val(a):r.html(a));break}})},cookieBind:function(t){return this.each(function(){var o=e(this);o.cookieFill().change(function(){o.cookify(t)})})}};e.each(t,function(t){e.fn[t]=this})}(window.jQuery||window.Zepto)}(),function(){function e(e){this.tokens=[],this.tokens.links={},this.options=e||c.defaults,this.rules=u.normal,this.options.gfm&&(this.options.tables?this.rules=u.tables:this.rules=u.gfm)}function t(e,t){if(this.options=t||c.defaults,this.links=e,this.rules=d.normal,this.renderer=this.options.renderer||new o,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=d.breaks:this.rules=d.gfm:this.options.pedantic&&(this.rules=d.pedantic)}function o(e){this.options=e||{}}function n(e){this.tokens=[],this.token=null,this.options=e||c.defaults,this.options.renderer=this.options.renderer||new o,this.renderer=this.options.renderer,this.renderer.options=this.options}function a(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function i(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function r(e,t){return e=e.source,t=t||"",function o(n,a){return n?(a=a.source||a,a=a.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(n,a),o):new RegExp(e,t)}}function s(){}function l(e){for(var t,o,n=1;n<arguments.length;n++){t=arguments[n];for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}function c(t,o,i){if(i||"function"==typeof o){i||(i=o,o=null),o=l({},c.defaults,o||{});var r,s,u=o.highlight,d=0;try{r=e.lex(t,o)}catch(p){return i(p)}s=r.length;var m=function(e){if(e)return o.highlight=u,i(e);var t;try{t=n.parse(r,o)}catch(a){e=a}return o.highlight=u,e?i(e):i(null,t)};if(!u||u.length<3)return m();if(delete o.highlight,!s)return m();for(;d<r.length;d++)!function(e){return"code"!==e.type?--s||m():u(e.text,e.lang,function(t,o){return t?m(t):null==o||o===e.text?--s||m():(e.text=o,e.escaped=!0,void(--s||m()))})}(r[d])}else try{return o&&(o=l({},c.defaults,o)),n.parse(e.lex(t,o),o)}catch(p){if(p.message+="\nPlease report this to https://github.com/chjj/marked.",(o||c.defaults).silent)return"<p>An error occured:</p><pre>"+a(p.message+"",!0)+"</pre>";throw p}}var u={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:s,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:s,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:s,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};u.bullet=/(?:[*+-]|\d+\.)/,u.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,u.item=r(u.item,"gm")(/bull/g,u.bullet)(),u.list=r(u.list)(/bull/g,u.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+u.def.source+")")(),u.blockquote=r(u.blockquote)("def",u.def)(),u._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",u.html=r(u.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,u._tag)(),u.paragraph=r(u.paragraph)("hr",u.hr)("heading",u.heading)("lheading",u.lheading)("blockquote",u.blockquote)("tag","<"+u._tag)("def",u.def)(),u.normal=l({},u),u.gfm=l({},u.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),u.gfm.paragraph=r(u.paragraph)("(?!","(?!"+u.gfm.fences.source.replace("\\1","\\2")+"|"+u.list.source.replace("\\1","\\3")+"|")(),u.tables=l({},u.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),e.rules=u,e.lex=function(t,o){var n=new e(o);return n.lex(t)},e.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},e.prototype.token=function(e,t,o){for(var n,a,i,r,s,l,c,d,p,e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),i[0].length>1&&this.tokens.push({type:"space"})),i=this.rules.code.exec(e))e=e.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:i.replace(/\n+$/,"")});else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2],text:i[3]});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if(t&&(i=this.rules.nptable.exec(e))){for(e=e.substring(i[0].length),l={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/\n$/,"").split("\n")},d=0;d<l.align.length;d++)/^ *-+: *$/.test(l.align[d])?l.align[d]="right":/^ *:-+: *$/.test(l.align[d])?l.align[d]="center":/^ *:-+ *$/.test(l.align[d])?l.align[d]="left":l.align[d]=null;for(d=0;d<l.cells.length;d++)l.cells[d]=l.cells[d].split(/ *\| */);this.tokens.push(l)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t,!0),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),r=i[2],this.tokens.push({type:"list_start",ordered:r.length>1}),i=i[0].match(this.rules.item),n=!1,p=i.length,d=0;p>d;d++)l=i[d],c=l.length,l=l.replace(/^ *([*+-]|\d+\.) +/,""),~l.indexOf("\n ")&&(c-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+c+"}","gm"),"")),this.options.smartLists&&d!==p-1&&(s=u.bullet.exec(i[d+1])[0],r===s||r.length>1&&s.length>1||(e=i.slice(d+1).join("\n")+e,d=p-1)),a=n||/\n\n(?!\s*$)/.test(l),d!==p-1&&(n="\n"===l.charAt(l.length-1),a||(a=n)),this.tokens.push({type:a?"loose_item_start":"list_item_start"}),this.token(l,!1,o),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===i[1]||"script"===i[1]||"style"===i[1],text:i[0]});else if(!o&&t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),this.tokens.links[i[1].toLowerCase()]={href:i[2],title:i[3]};else if(t&&(i=this.rules.table.exec(e))){for(e=e.substring(i[0].length),l={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/(?: *\| *)?\n$/,"").split("\n")},d=0;d<l.align.length;d++)/^ *-+: *$/.test(l.align[d])?l.align[d]="right":/^ *:-+: *$/.test(l.align[d])?l.align[d]="center":/^ *:-+ *$/.test(l.align[d])?l.align[d]="left":l.align[d]=null;for(d=0;d<l.cells.length;d++)l.cells[d]=l.cells[d].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var d={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:s,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:s,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};d._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,d._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,d.link=r(d.link)("inside",d._inside)("href",d._href)(),d.reflink=r(d.reflink)("inside",d._inside)(),d.normal=l({},d),d.pedantic=l({},d.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),d.gfm=l({},d.normal,{escape:r(d.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:r(d.text)("]|","~]|")("|","|https?://|")()}),d.breaks=l({},d.gfm,{br:r(d.br)("{2,}","*")(),text:r(d.gfm.text)("{2,}","*")()}),t.rules=d,t.output=function(e,o,n){var a=new t(o,n);return a.output(e)},t.prototype.output=function(e){for(var t,o,n,i,r="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),r+=i[1];else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),"@"===i[2]?(o=":"===i[1].charAt(6)?this.mangle(i[1].substring(7)):this.mangle(i[1]),n=this.mangle("mailto:")+o):(o=a(i[1]),n=o),r+=this.renderer.link(n,null,o);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),e=e.substring(i[0].length),r+=this.options.sanitize?a(i[0]):i[0];else if(i=this.rules.link.exec(e))e=e.substring(i[0].length),this.inLink=!0,r+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),t=(i[2]||i[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){r+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,r+=this.outputLink(i,t),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),r+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),r+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),r+=this.renderer.codespan(a(i[2],!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),r+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),r+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),r+=a(this.smartypants(i[0]));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(i[0].length),o=a(i[1]),n=o,r+=this.renderer.link(n,null,o);return r},t.prototype.outputLink=function(e,t){var o=a(t.href),n=t.title?a(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(o,n,this.output(e[1])):this.renderer.image(o,n,a(e[1]))},t.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/--/g,"—").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},t.prototype.mangle=function(e){for(var t,o="",n=e.length,a=0;n>a;a++)t=e.charCodeAt(a),Math.random()>.5&&(t="x"+t.toString(16)),o+="&#"+t+";";return o},o.prototype.code=function(e,t,o){if(this.options.highlight){var n=this.options.highlight(e,t);null!=n&&n!==e&&(o=!0,e=n)}return t?'<pre><code class="'+this.options.langPrefix+a(t,!0)+'">'+(o?e:a(e,!0))+"\n</code></pre>\n":"<pre><code>"+(o?e:a(e,!0))+"\n</code></pre>"},o.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},o.prototype.html=function(e){return e},o.prototype.heading=function(e,t,o){return"<h"+t+' id="'+this.options.headerPrefix+o.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},o.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},o.prototype.list=function(e,t){var o=t?"ol":"ul";return"<"+o+">\n"+e+"</"+o+">\n"},o.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},o.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},o.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},o.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},o.prototype.tablecell=function(e,t){var o=t.header?"th":"td",n=t.align?"<"+o+' style="text-align:'+t.align+'">':"<"+o+">";return n+e+"</"+o+">\n"},o.prototype.strong=function(e){return"<strong>"+e+"</strong>"},o.prototype.em=function(e){return"<em>"+e+"</em>"},o.prototype.codespan=function(e){return"<code>"+e+"</code>"},o.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},o.prototype.del=function(e){return"<del>"+e+"</del>"},o.prototype.link=function(e,t,o){if(this.options.sanitize){try{var n=decodeURIComponent(i(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(a){return""}if(0===n.indexOf("javascript:"))return""}var r='<a href="'+e+'"';return t&&(r+=' title="'+t+'"'),r+=">"+o+"</a>"},o.prototype.image=function(e,t,o){var n='<img src="'+e+'" alt="'+o+'"';return t&&(n+=' title="'+t+'"'),n+=this.options.xhtml?"/>":">"},n.parse=function(e,t,o){var a=new n(t,o);return a.parse(e)},n.prototype.parse=function(e){this.inline=new t(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var o="";this.next();)o+=this.tok();return o},n.prototype.next=function(){return this.token=this.tokens.pop()},n.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},n.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},n.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,o,n,a,i="",r="";for(o="",e=0;e<this.token.header.length;e++)n={header:!0,align:this.token.align[e]},o+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(i+=this.renderer.tablerow(o),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],o="",a=0;a<t.length;a++)o+=this.renderer.tablecell(this.inline.output(t[a]),{header:!1,align:this.token.align[a]});r+=this.renderer.tablerow(o)}return this.renderer.table(i,r);case"blockquote_start":for(var r="";"blockquote_end"!==this.next().type;)r+=this.tok();return this.renderer.blockquote(r);case"list_start":for(var r="",s=this.token.ordered;"list_end"!==this.next().type;)r+=this.tok();return this.renderer.list(r,s);case"list_item_start":for(var r="";"list_item_end"!==this.next().type;)r+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(r);case"loose_item_start":for(var r="";"list_item_end"!==this.next().type;)r+=this.tok();return this.renderer.listitem(r);case"html":var l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},s.exec=s,c.options=c.setOptions=function(e){return l(c.defaults,e),c},c.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new o,xhtml:!1},c.Parser=n,c.parser=n.parse,c.Renderer=o,c.Lexer=e,c.lexer=e.lex,c.InlineLexer=t,c.inlineLexer=t.output,c.parse=c,"undefined"!=typeof module&&"object"==typeof exports?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):this.marked=c}.call(function(){return this||("undefined"!=typeof window?window:global)}()),!function(e,t,o){function n(e,t){return typeof e===t}function a(){var e,t,o,a,i,r,s;for(var l in y)if(y.hasOwnProperty(l)){if(e=[],t=y[l],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(o=0;o<t.options.aliases.length;o++)e.push(t.options.aliases[o].toLowerCase());for(a=n(t.fn,"function")?t.fn():t.fn,i=0;i<e.length;i++)r=e[i],s=r.split("."),1===s.length?k[s[0]]=a:(!k[s[0]]||k[s[0]]instanceof Boolean||(k[s[0]]=new Boolean(k[s[0]])),k[s[0]][s[1]]=a),b.push((a?"":"no-")+s.join("-"))}}function i(e){var t=_.className,o=k._config.classPrefix||"";if($&&(t=t.baseVal),k._config.enableJSClass){var n=new RegExp("(^|\\s)"+o+"no-js(\\s|$)");t=t.replace(n,"$1"+o+"js$2")}k._config.enableClasses&&(t+=" "+o+e.join(" "+o),$?_.className.baseVal=t:_.className=t)}function r(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):$?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function s(){var e=t.body;return e||(e=r($?"svg":"body"),e.fake=!0),e}function l(e,o,n,a){var i,l,c,u,d="modernizr",p=r("div"),m=s();if(parseInt(n,10))for(;n--;)c=r("div"),c.id=a?a[n]:d+(n+1),p.appendChild(c);return i=r("style"),i.type="text/css",i.id="s"+d,(m.fake?m:p).appendChild(i),m.appendChild(p),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),p.id=d,m.fake&&(m.style.background="",m.style.overflow="hidden",u=_.style.overflow,_.style.overflow="hidden",_.appendChild(m)),l=o(p,e),m.fake?(m.parentNode.removeChild(m),_.style.overflow=u,_.offsetHeight):p.parentNode.removeChild(p),!!l}function c(e,t){return!!~(""+e).indexOf(t)}function u(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,o){return t+o.toUpperCase()}).replace(/^-/,"")}function d(e,t){return function(){return e.apply(t,arguments)}}function p(e,t,o){var a;for(var i in e)if(e[i]in t)return o===!1?e[i]:(a=t[e[i]],n(a,"function")?d(a,o||t):a);return!1}function m(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function g(t,n){var a=t.length;if("CSS"in e&&"supports"in e.CSS){for(;a--;)if(e.CSS.supports(m(t[a]),n))return!0;return!1}if("CSSSupportsRule"in e){for(var i=[];a--;)i.push("("+m(t[a])+":"+n+")");return i=i.join(" or "),l("@supports ("+i+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return o}function f(e,t,a,i){function s(){d&&(delete D.style,delete D.modElem)}if(i=n(i,"undefined")?!1:i,!n(a,"undefined")){var l=g(e,a);if(!n(l,"undefined"))return l}for(var d,p,m,f,h,v=["modernizr","tspan"];!D.style;)d=!0,D.modElem=r(v.shift()),D.style=D.modElem.style;for(m=e.length,p=0;m>p;p++)if(f=e[p],h=D.style[f],c(f,"-")&&(f=u(f)),D.style[f]!==o){if(i||n(a,"undefined"))return s(),"pfx"==t?f:!0;try{D.style[f]=a}catch(b){}if(D.style[f]!=h)return s(),"pfx"==t?f:!0}return s(),!1}function h(e,t,o,a,i){var r=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+A.join(r+" ")+r).split(" ");return n(t,"string")||n(t,"undefined")?f(s,t,a,i):(s=(e+" "+x.join(r+" ")+r).split(" "),p(s,t,o))}function v(e,t,n){return h(e,o,o,t,n)}var b=[],y=[],w={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var o=this;setTimeout(function(){t(o[e])},0)},addTest:function(e,t,o){y.push({name:e,fn:t,options:o})},addAsyncTest:function(e){y.push({name:null,fn:e})}},k=function(){};k.prototype=w,k=new k;var C=w._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];w._prefixes=C;var _=t.documentElement,$="svg"===_.nodeName.toLowerCase();$||!function(e,t){function o(e,t){var o=e.createElement("p"),n=e.getElementsByTagName("head")[0]||e.documentElement;return o.innerHTML="x<style>"+t+"</style>",n.insertBefore(o.lastChild,n.firstChild)}function n(){var e=y.elements;return"string"==typeof e?e.split(" "):e}function a(e,t){var o=y.elements;"string"!=typeof o&&(o=o.join(" ")),"string"!=typeof e&&(e=e.join(" ")),y.elements=o+" "+e,c(t)}function i(e){var t=b[e[h]];return t||(t={},v++,e[h]=v,b[v]=t),t}function r(e,o,n){if(o||(o=t),d)return o.createElement(e);n||(n=i(o));var a;return a=n.cache[e]?n.cache[e].cloneNode():f.test(e)?(n.cache[e]=n.createElem(e)).cloneNode():n.createElem(e),!a.canHaveChildren||g.test(e)||a.tagUrn?a:n.frag.appendChild(a)}function s(e,o){if(e||(e=t),d)return e.createDocumentFragment();o=o||i(e);for(var a=o.frag.cloneNode(),r=0,s=n(),l=s.length;l>r;r++)a.createElement(s[r]);return a}function l(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(o){return y.shivMethods?r(o,e,t):t.createElem(o)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/[\w\-:]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(y,t.frag)}function c(e){e||(e=t);var n=i(e);return!y.shivCSS||u||n.hasCSS||(n.hasCSS=!!o(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),d||l(e,n),e}var u,d,p="3.7.3",m=e.html5||{},g=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,h="_html5shiv",v=0,b={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",u="hidden"in e,d=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(o){u=!0,d=!0}}();var y={elements:m.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:p,shivCSS:m.shivCSS!==!1,supportsUnknownElements:d,shivMethods:m.shivMethods!==!1,type:"default",shivDocument:c,createElement:r,createDocumentFragment:s,addElements:a};e.html5=y,c(t),"object"==typeof module&&module.exports&&(module.exports=y)}("undefined"!=typeof e?e:this,t);var S="Moz O ms Webkit",x=w._config.usePrefixes?S.toLowerCase().split(" "):[];w._domPrefixes=x;var L=function(){function e(e,t){var a;return e?(t&&"string"!=typeof t||(t=r(t||"div")),e="on"+e,a=e in t,!a&&n&&(t.setAttribute||(t=r("div")),t.setAttribute(e,""),a="function"==typeof t[e],t[e]!==o&&(t[e]=o),t.removeAttribute(e)),a):!1}var n=!("onblur"in t.documentElement);return e}();w.hasEvent=L,k.addTest("opacity",function(){var e=r("a").style;return e.cssText=C.join("opacity:.55;"),/^0.55$/.test(e.opacity)});var G="CSS"in e&&"supports"in e.CSS,T="supportsCSS"in e;k.addTest("supports",G||T);var j=function(){var t=e.matchMedia||e.msMatchMedia;return t?function(e){var o=t(e);return o&&o.matches||!1}:function(t){var o=!1;return l("@media "+t+" { #modernizr { position: absolute; } }",function(t){o="absolute"==(e.getComputedStyle?e.getComputedStyle(t,null):t.currentStyle).position}),o}}();w.mq=j;var M=w.testStyles=l,A=w._config.usePrefixes?S.split(" "):[];w._cssomPrefixes=A;var I={elem:r("modernizr")};k._q.push(function(){delete I.elem});var D={style:I.elem.style};k._q.unshift(function(){delete D.style}),w.testProp=function(e,t,n){return f([e],o,t,n)},w.testAllProps=h,w.testAllProps=v,k.addTest("csstransforms3d",function(){var e=!!v("perspective","1px",!0),t=k._config.usePrefixes;if(e&&(!t||"webkitPerspective"in _.style)){var o,n="#modernizr{width:0;height:0}";k.supports?o="@supports (perspective: 1px)":(o="@media (transform-3d)",t&&(o+=",(-webkit-transform-3d)")),o+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",M(n+o,function(t){e=7===t.offsetWidth&&18===t.offsetHeight})}return e}),k.addTest("csstransitions",v("transition","all",!0)),a(),i(b),delete w.addTest,delete w.addAsyncTest;for(var B=0;B<k._q.length;B++)k._q[B]();e.Modernizr=k}(window,document),function(e,t,o){"use strict";function n(){if(!e.getComputedStyle)return!1;var t,n=document.createElement("p"),a={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(n,null);for(var i in a)n.style[i]!==o&&(n.style[i]="translate3d(1px,1px,1px)",t=e.getComputedStyle(n).getPropertyValue(a[i]));return document.body.removeChild(n),t!==o&&t.length>0&&"none"!==t}var a={duration:.3,slideMaskName:".banner-3d-mask",slideName:".banner-3d-slides",slideBtnsName:".banner-3d-buttons",slideShadowName:".banner-3d-shadow",slideBox1Name:".banner-3d-box-1",slideBox2Name:".banner-3d-box-2",slideBox3Name:".banner-3d-box-3",enter3d:null,exit3d:null};jQuery.fn.extend({banner3D:function(e){function o(){var e={};return e.x=y.offset().left+y.width()/2,e.y=y.offset().top+y.height()/2,e}function i(e){return e=e||0,y.children("li")}function r(e,t,o){var n={},a={},t=t||0,o=o||"";n.x=e.x||0,n.y=e.y||0,a.x=-e.rotationX.toFixed(5)||0,a.y=-e.rotationY.toFixed(5)||0;var i=[];n.x&&n.y&&i.push("translate3d( "+n.x+"px, "+n.y+"px, 0px)"),a.x&&a.y&&i.push("rotateX("+a.x+"deg) rotateY("+a.y+"deg)");var r=[];e.opacityCss&&r.push(d.duration+"s opacity "+o),e.transformCss&&r.push(t+"s transform "+o);var s={transform:i.join(" ")};s.transition=r.join(", "),e.element.css(s)}function s(){cancelAnimationFrame(v),b=!1,u.removeClass("animating"),$.rotationX=0,$.rotationY=0,r($,d.duration,"ease-in-out"),setTimeout(function(){$.element.removeAttr("style")},1e3*d.duration),_.shadowX=0,_.shadowY=0,r(_,d.duration,"ease-in-out"),S.x=0,S.y=0,r(S,d.duration,"ease-in-out"),x.x=0,x.y=0,r(x,d.duration,"ease-in-out")}function l(e){e.x+=(e.initX+h/20*e.depth-e.x)/g,e.y+=(e.initY-f/50*e.depth-e.y)/g}function c(e){b&&(p&&m&&(h=(w.x-p)/2,f=(m-w.y)/1.5,_.x=+h/10,_.y=-f/10,r(_,0),$.rotationX+=(f/20-$.rotationX)/g,$.rotationY+=(h/50-$.rotationY)/g,r($,0),l(S),r(S,0),l(x),r(x,0)),v=requestAnimationFrame(c))}if(n()){var u=t(this),d=t.extend({},a,e);d.wrapper=u.selector;var p,m,g=10,f=0,h=0,v=(d.timeout,null),b=!1,y=u.find(d.slideName),w=(u.find(d.slideBtnsName),o()),k={element:null,x:0,y:0,initX:0,initY:0,rotationX:0,rotationY:0,depth:1,transformCss:!0},C=i(0),_=t.extend({},k,{element:u.find(d.slideShadowName),opacityCss:!0}),$=t.extend({},k,{element:C,depth:0}),S=t.extend({},k,{element:C.find(d.slideBox2Name),depth:.2}),x=t.extend({},k,{element:C.find(d.slideBox3Name),depth:-.3});t(document).on("mouseover",d.wrapper+" "+d.slideMaskName,function(e){b=!0,t.isFunction(d.exit3d)&&d.enter3d(),u.addClass("animating"),c()}).on("mousemove",d.wrapper+" "+d.slideMaskName,function(e){p=e.pageX,m=e.pageY}).on("mouseleave",d.wrapper+" "+d.slideMaskName,function(e){s(e),t.isFunction(d.exit3d)&&d.exit3d()})}}})}(window,jQuery),function(e,t,o){"use strict";var n={timeout:6e3,timeArray:[],slideName:".slides",slideBtnsName:".buttons",maskName:".mask",isLoopStop:!1},a=function(){var e=navigator.userAgent.toLowerCase(),t={isIE:/msie/.test(e),isHackIE:/msie [7-8]/.test(e),isWebkit:/webkit/.test(e),isWindows:/windows/.test(e),isMac:/mac/.test(e)};return t.isNormalIE=t.isIE&&!t.isIE6&&!t.isHackIE,t}();jQuery.fn.extend({carousel:function(e){var o=t(this),i=t.extend({},n,e);i.wrapper=o.selector;var r,s,l=i.timeout,c=1,u=!1,d=o.find(i.slideName),p=o.find(i.maskName);if(i.slideBtnsName){for(var m=t('<ul class="'+i.slideBtnsName.substring(1,i.slideBtnsName.length)+'"></ul>'),g="",f=0,h=d.children("li").length;h>f;f++)g+=f?"<li></li>":'<li class="active"></li>';m.html(g),o.append(m)}else var m=o.find(i.slideBtnsName);i.timeArray.length>0&&(s=i.timeArray);var v=function(e){c="undefined"!=typeof e?e:c,c>=d.children("li").length&&(c=0);var t=l;s&&s.length>0&&s[c]&&(t=s[c]),d.children("li").eq(c).addClass("active").siblings("li").removeClass("active"),m.length>0&&m.find("li").eq(c).addClass("active").siblings("li").removeClass("active"),p.length&&p.find("a").eq(c).addClass("active").siblings("a").removeClass("active"),c++,u&&(r=setTimeout(v,t))},b=function(){u=!1,clearTimeout(r)},y=function(){u=!0;var e=l;s&&s.length>0&&s[c]&&(e=s[c]),r=setTimeout(v,e)},w=function(e){setTimeout(function(){v(e)},100)},k=function(){a.isIE?(d.toggleClass("switch",!1),setTimeout(function(){d.toggleClass("switch",!0)},0)):d.toggleClass("switch",!1).show().delay(0).toggleClass("switch",!0)},C=function(){i.isLoopStop&&t(document).on("mouseenter",i.wrapper,function(e){b()}).on("mouseleave",i.wrapper,function(e){y()})};return C(),t(document).on("click",i.wrapper+" "+i.slideBtnsName+" li",function(e){clearTimeout(r);var o=t(this).index();setTimeout(function(){v(o)},100)}),{doCarousel:y,exitCarousel:b,loopUpdate:w,toggleSwitchClass:k}}})}(window,jQuery),function(){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this,t=e._,o=Array.prototype,n=Object.prototype,a=o.push,i=o.slice,r=n.toString,s=n.hasOwnProperty,l=Array.isArray,c=Object.keys,u=Object.create,d=function(){},p=function(e){
return e instanceof p?e:this instanceof p?void(this._wrapped=e):new p(e)};"undefined"==typeof exports||exports.nodeType?e._=p:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=p),exports._=p),p.VERSION="1.8.3";var m=function(e,t,o){if(void 0===t)return e;switch(null==o?3:o){case 1:return function(o){return e.call(t,o)};case 3:return function(o,n,a){return e.call(t,o,n,a)};case 4:return function(o,n,a,i){return e.call(t,o,n,a,i)}}return function(){return e.apply(t,arguments)}},g=function(e,t,o){return null==e?p.identity:p.isFunction(e)?m(e,t,o):p.isObject(e)?p.matcher(e):p.property(e)};p.iteratee=function(e,t){return g(e,t,1/0)};var f=function(e,t){return t=null==t?e.length-1:+t,function(){for(var o=Math.max(arguments.length-t,0),n=Array(o),a=0;o>a;a++)n[a]=arguments[a+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var i=Array(t+1);for(a=0;t>a;a++)i[a]=arguments[a];return i[t]=n,e.apply(this,i)}},h=function(e){if(!p.isObject(e))return{};if(u)return u(e);d.prototype=e;var t=new d;return d.prototype=null,t},v=function(e){return function(t){return null==t?void 0:t[e]}},b=Math.pow(2,53)-1,y=v("length"),w=function(e){var t=y(e);return"number"==typeof t&&t>=0&&b>=t};p.each=p.forEach=function(e,t,o){t=m(t,o);var n,a;if(w(e))for(n=0,a=e.length;a>n;n++)t(e[n],n,e);else{var i=p.keys(e);for(n=0,a=i.length;a>n;n++)t(e[i[n]],i[n],e)}return e},p.map=p.collect=function(e,t,o){t=g(t,o);for(var n=!w(e)&&p.keys(e),a=(n||e).length,i=Array(a),r=0;a>r;r++){var s=n?n[r]:r;i[r]=t(e[s],s,e)}return i};var k=function(e){var t=function(t,o,n,a){var i=!w(t)&&p.keys(t),r=(i||t).length,s=e>0?0:r-1;for(a||(n=t[i?i[s]:s],s+=e);s>=0&&r>s;s+=e){var l=i?i[s]:s;n=o(n,t[l],l,t)}return n};return function(e,o,n,a){var i=arguments.length>=3;return t(e,m(o,a,4),n,i)}};p.reduce=p.foldl=p.inject=k(1),p.reduceRight=p.foldr=k(-1),p.find=p.detect=function(e,t,o){var n;return n=w(e)?p.findIndex(e,t,o):p.findKey(e,t,o),void 0!==n&&-1!==n?e[n]:void 0},p.filter=p.select=function(e,t,o){var n=[];return t=g(t,o),p.each(e,function(e,o,a){t(e,o,a)&&n.push(e)}),n},p.reject=function(e,t,o){return p.filter(e,p.negate(g(t)),o)},p.every=p.all=function(e,t,o){t=g(t,o);for(var n=!w(e)&&p.keys(e),a=(n||e).length,i=0;a>i;i++){var r=n?n[i]:i;if(!t(e[r],r,e))return!1}return!0},p.some=p.any=function(e,t,o){t=g(t,o);for(var n=!w(e)&&p.keys(e),a=(n||e).length,i=0;a>i;i++){var r=n?n[i]:i;if(t(e[r],r,e))return!0}return!1},p.contains=p.includes=p.include=function(e,t,o,n){return w(e)||(e=p.values(e)),("number"!=typeof o||n)&&(o=0),p.indexOf(e,t,o)>=0},p.invoke=f(function(e,t,o){var n=p.isFunction(t);return p.map(e,function(e){var a=n?t:e[t];return null==a?a:a.apply(e,o)})}),p.pluck=function(e,t){return p.map(e,p.property(t))},p.where=function(e,t){return p.filter(e,p.matcher(t))},p.findWhere=function(e,t){return p.find(e,p.matcher(t))},p.max=function(e,t,o){var n,a,i=-(1/0),r=-(1/0);if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=w(e)?e:p.values(e);for(var s=0,l=e.length;l>s;s++)n=e[s],null!=n&&n>i&&(i=n)}else t=g(t,o),p.each(e,function(e,o,n){a=t(e,o,n),(a>r||a===-(1/0)&&i===-(1/0))&&(i=e,r=a)});return i},p.min=function(e,t,o){var n,a,i=1/0,r=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=w(e)?e:p.values(e);for(var s=0,l=e.length;l>s;s++)n=e[s],null!=n&&i>n&&(i=n)}else t=g(t,o),p.each(e,function(e,o,n){a=t(e,o,n),(r>a||a===1/0&&i===1/0)&&(i=e,r=a)});return i},p.shuffle=function(e){return p.sample(e,1/0)},p.sample=function(e,t,o){if(null==t||o)return w(e)||(e=p.values(e)),e[p.random(e.length-1)];var n=w(e)?p.clone(e):p.values(e),a=y(n);t=Math.max(Math.min(t,a),0);for(var i=a-1,r=0;t>r;r++){var s=p.random(r,i),l=n[r];n[r]=n[s],n[s]=l}return n.slice(0,t)},p.sortBy=function(e,t,o){var n=0;return t=g(t,o),p.pluck(p.map(e,function(e,o,a){return{value:e,index:n++,criteria:t(e,o,a)}}).sort(function(e,t){var o=e.criteria,n=t.criteria;if(o!==n){if(o>n||void 0===o)return 1;if(n>o||void 0===n)return-1}return e.index-t.index}),"value")};var C=function(e,t){return function(o,n,a){var i=t?[[],[]]:{};return n=g(n,a),p.each(o,function(t,a){var r=n(t,a,o);e(i,t,r)}),i}};p.groupBy=C(function(e,t,o){p.has(e,o)?e[o].push(t):e[o]=[t]}),p.indexBy=C(function(e,t,o){e[o]=t}),p.countBy=C(function(e,t,o){p.has(e,o)?e[o]++:e[o]=1});var _=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;p.toArray=function(e){return e?p.isArray(e)?i.call(e):p.isString(e)?e.match(_):w(e)?p.map(e,p.identity):p.values(e):[]},p.size=function(e){return null==e?0:w(e)?e.length:p.keys(e).length},p.partition=C(function(e,t,o){e[o?0:1].push(t)},!0),p.first=p.head=p.take=function(e,t,o){return null!=e?null==t||o?e[0]:p.initial(e,e.length-t):void 0},p.initial=function(e,t,o){return i.call(e,0,Math.max(0,e.length-(null==t||o?1:t)))},p.last=function(e,t,o){return null!=e?null==t||o?e[e.length-1]:p.rest(e,Math.max(0,e.length-t)):void 0},p.rest=p.tail=p.drop=function(e,t,o){return i.call(e,null==t||o?1:t)},p.compact=function(e){return p.filter(e,p.identity)};var $=function(e,t,o,n){n=n||[];for(var a=n.length,i=0,r=y(e);r>i;i++){var s=e[i];if(w(s)&&(p.isArray(s)||p.isArguments(s)))if(t)for(var l=0,c=s.length;c>l;)n[a++]=s[l++];else $(s,t,o,n),a=n.length;else o||(n[a++]=s)}return n};p.flatten=function(e,t){return $(e,t,!1)},p.without=f(function(e,t){return p.difference(e,t)}),p.uniq=p.unique=function(e,t,o,n){p.isBoolean(t)||(n=o,o=t,t=!1),null!=o&&(o=g(o,n));for(var a=[],i=[],r=0,s=y(e);s>r;r++){var l=e[r],c=o?o(l,r,e):l;t?(r&&i===c||a.push(l),i=c):o?p.contains(i,c)||(i.push(c),a.push(l)):p.contains(a,l)||a.push(l)}return a},p.union=f(function(e){return p.uniq($(e,!0,!0))}),p.intersection=function(e){for(var t=[],o=arguments.length,n=0,a=y(e);a>n;n++){var i=e[n];if(!p.contains(t,i)){var r;for(r=1;o>r&&p.contains(arguments[r],i);r++);r===o&&t.push(i)}}return t},p.difference=f(function(e,t){return t=$(t,!0,!0),p.filter(e,function(e){return!p.contains(t,e)})}),p.unzip=function(e){for(var t=e&&p.max(e,y).length||0,o=Array(t),n=0;t>n;n++)o[n]=p.pluck(e,n);return o},p.zip=f(p.unzip),p.object=function(e,t){for(var o={},n=0,a=y(e);a>n;n++)t?o[e[n]]=t[n]:o[e[n][0]]=e[n][1];return o};var S=function(e){return function(t,o,n){o=g(o,n);for(var a=y(t),i=e>0?0:a-1;i>=0&&a>i;i+=e)if(o(t[i],i,t))return i;return-1}};p.findIndex=S(1),p.findLastIndex=S(-1),p.sortedIndex=function(e,t,o,n){o=g(o,n,1);for(var a=o(t),i=0,r=y(e);r>i;){var s=Math.floor((i+r)/2);o(e[s])<a?i=s+1:r=s}return i};var x=function(e,t,o){return function(n,a,r){var s=0,l=y(n);if("number"==typeof r)e>0?s=r>=0?r:Math.max(r+l,s):l=r>=0?Math.min(r+1,l):r+l+1;else if(o&&r&&l)return r=o(n,a),n[r]===a?r:-1;if(a!==a)return r=t(i.call(n,s,l),p.isNaN),r>=0?r+s:-1;for(r=e>0?s:l-1;r>=0&&l>r;r+=e)if(n[r]===a)return r;return-1}};p.indexOf=x(1,p.findIndex,p.sortedIndex),p.lastIndexOf=x(-1,p.findLastIndex),p.range=function(e,t,o){null==t&&(t=e||0,e=0),o||(o=e>t?-1:1);for(var n=Math.max(Math.ceil((t-e)/o),0),a=Array(n),i=0;n>i;i++,e+=o)a[i]=e;return a},p.chunk=function(e,t){if(null==t||1>t)return[];for(var o=[],n=0,a=e.length;a>n;)o.push(i.call(e,n,n+=t));return o};var L=function(e,t,o,n,a){if(!(n instanceof t))return e.apply(o,a);var i=h(e.prototype),r=e.apply(i,a);return p.isObject(r)?r:i};p.bind=f(function(e,t,o){if(!p.isFunction(e))throw new TypeError("Bind must be called on a function");var n=f(function(a){return L(e,n,t,this,o.concat(a))});return n}),p.partial=f(function(e,t){var o=p.partial.placeholder,n=function(){for(var a=0,i=t.length,r=Array(i),s=0;i>s;s++)r[s]=t[s]===o?arguments[a++]:t[s];for(;a<arguments.length;)r.push(arguments[a++]);return L(e,n,this,this,r)};return n}),p.partial.placeholder=p,p.bindAll=f(function(e,t){t=$(t,!1,!1);var o=t.length;if(1>o)throw new Error("bindAll must be passed function names");for(;o--;){var n=t[o];e[n]=p.bind(e[n],e)}}),p.memoize=function(e,t){var o=function(n){var a=o.cache,i=""+(t?t.apply(this,arguments):n);return p.has(a,i)||(a[i]=e.apply(this,arguments)),a[i]};return o.cache={},o},p.delay=f(function(e,t,o){return setTimeout(function(){return e.apply(null,o)},t)}),p.defer=p.partial(p.delay,p,1),p.throttle=function(e,t,o){var n,a,i,r,s=0;o||(o={});var l=function(){s=o.leading===!1?0:p.now(),n=null,r=e.apply(a,i),n||(a=i=null)},c=function(){var c=p.now();s||o.leading!==!1||(s=c);var u=t-(c-s);return a=this,i=arguments,0>=u||u>t?(n&&(clearTimeout(n),n=null),s=c,r=e.apply(a,i),n||(a=i=null)):n||o.trailing===!1||(n=setTimeout(l,u)),r};return c.cancel=function(){clearTimeout(n),s=0,n=a=i=null},c},p.debounce=function(e,t,o){var n,a,i=function(t,o){n=null,o&&(a=e.apply(t,o))},r=f(function(r){var s=o&&!n;return n&&clearTimeout(n),s?(n=setTimeout(i,t),a=e.apply(this,r)):o||(n=p.delay(i,t,this,r)),a});return r.cancel=function(){clearTimeout(n),n=null},r},p.wrap=function(e,t){return p.partial(t,e)},p.negate=function(e){return function(){return!e.apply(this,arguments)}},p.compose=function(){var e=arguments,t=e.length-1;return function(){for(var o=t,n=e[t].apply(this,arguments);o--;)n=e[o].call(this,n);return n}},p.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},p.before=function(e,t){var o;return function(){return--e>0&&(o=t.apply(this,arguments)),1>=e&&(t=null),o}},p.once=p.partial(p.before,2),p.restArgs=f;var G=!{toString:null}.propertyIsEnumerable("toString"),T=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],j=function(e,t){var o=T.length,a=e.constructor,i=p.isFunction(a)&&a.prototype||n,r="constructor";for(p.has(e,r)&&!p.contains(t,r)&&t.push(r);o--;)r=T[o],r in e&&e[r]!==i[r]&&!p.contains(t,r)&&t.push(r)};p.keys=function(e){if(!p.isObject(e))return[];if(c)return c(e);var t=[];for(var o in e)p.has(e,o)&&t.push(o);return G&&j(e,t),t},p.allKeys=function(e){if(!p.isObject(e))return[];var t=[];for(var o in e)t.push(o);return G&&j(e,t),t},p.values=function(e){for(var t=p.keys(e),o=t.length,n=Array(o),a=0;o>a;a++)n[a]=e[t[a]];return n},p.mapObject=function(e,t,o){t=g(t,o);for(var n=p.keys(e),a=n.length,i={},r=0;a>r;r++){var s=n[r];i[s]=t(e[s],s,e)}return i},p.pairs=function(e){for(var t=p.keys(e),o=t.length,n=Array(o),a=0;o>a;a++)n[a]=[t[a],e[t[a]]];return n},p.invert=function(e){for(var t={},o=p.keys(e),n=0,a=o.length;a>n;n++)t[e[o[n]]]=o[n];return t},p.functions=p.methods=function(e){var t=[];for(var o in e)p.isFunction(e[o])&&t.push(o);return t.sort()};var M=function(e,t){return function(o){var n=arguments.length;if(t&&(o=Object(o)),2>n||null==o)return o;for(var a=1;n>a;a++)for(var i=arguments[a],r=e(i),s=r.length,l=0;s>l;l++){var c=r[l];t&&void 0!==o[c]||(o[c]=i[c])}return o}};p.extend=M(p.allKeys),p.extendOwn=p.assign=M(p.keys),p.findKey=function(e,t,o){t=g(t,o);for(var n,a=p.keys(e),i=0,r=a.length;r>i;i++)if(n=a[i],t(e[n],n,e))return n};var A=function(e,t,o){return t in o};p.pick=f(function(e,t){var o={},n=t[0];if(null==e)return o;p.isFunction(n)?(t.length>1&&(n=m(n,t[1])),t=p.allKeys(e)):(n=A,t=$(t,!1,!1),e=Object(e));for(var a=0,i=t.length;i>a;a++){var r=t[a],s=e[r];n(s,r,e)&&(o[r]=s)}return o}),p.omit=f(function(e,t){var o,n=t[0];return p.isFunction(n)?(n=p.negate(n),t.length>1&&(o=t[1])):(t=p.map($(t,!1,!1),String),n=function(e,o){return!p.contains(t,o)}),p.pick(e,n,o)}),p.defaults=M(p.allKeys,!0),p.create=function(e,t){var o=h(e);return t&&p.extendOwn(o,t),o},p.clone=function(e){return p.isObject(e)?p.isArray(e)?e.slice():p.extend({},e):e},p.tap=function(e,t){return t(e),e},p.isMatch=function(e,t){var o=p.keys(t),n=o.length;if(null==e)return!n;for(var a=Object(e),i=0;n>i;i++){var r=o[i];if(t[r]!==a[r]||!(r in a))return!1}return!0};var I,D;I=function(e,t,o,n){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;if(e!==e)return t!==t;var a=typeof e;return"function"!==a&&"object"!==a&&"object"!=typeof t?!1:D(e,t,o,n)},D=function(e,t,o,n){e instanceof p&&(e=e._wrapped),t instanceof p&&(t=t._wrapped);var a=r.call(e);if(a!==r.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var i="[object Array]"===a;if(!i){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,l=t.constructor;if(s!==l&&!(p.isFunction(s)&&s instanceof s&&p.isFunction(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}o=o||[],n=n||[];for(var c=o.length;c--;)if(o[c]===e)return n[c]===t;if(o.push(e),n.push(t),i){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!I(e[c],t[c],o,n))return!1}else{var u,d=p.keys(e);if(c=d.length,p.keys(t).length!==c)return!1;for(;c--;)if(u=d[c],!p.has(t,u)||!I(e[u],t[u],o,n))return!1}return o.pop(),n.pop(),!0},p.isEqual=function(e,t){return I(e,t)},p.isEmpty=function(e){return null==e?!0:w(e)&&(p.isArray(e)||p.isString(e)||p.isArguments(e))?0===e.length:0===p.keys(e).length},p.isElement=function(e){return!(!e||1!==e.nodeType)},p.isArray=l||function(e){return"[object Array]"===r.call(e)},p.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},p.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol"],function(e){p["is"+e]=function(t){return r.call(t)==="[object "+e+"]"}}),p.isArguments(arguments)||(p.isArguments=function(e){return p.has(e,"callee")});var B=e.document&&e.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof B&&(p.isFunction=function(e){return"function"==typeof e||!1}),p.isFinite=function(e){return!p.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},p.isNaN=function(e){return p.isNumber(e)&&isNaN(e)},p.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===r.call(e)},p.isNull=function(e){return null===e},p.isUndefined=function(e){return void 0===e},p.has=function(e,t){return null!=e&&s.call(e,t)},p.noConflict=function(){return e._=t,this},p.identity=function(e){return e},p.constant=function(e){return function(){return e}},p.noop=function(){},p.property=v,p.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},p.matcher=p.matches=function(e){return e=p.extendOwn({},e),function(t){return p.isMatch(t,e)}},p.times=function(e,t,o){var n=Array(Math.max(0,e));t=m(t,o,1);for(var a=0;e>a;a++)n[a]=t(a);return n},p.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},p.now=Date.now||function(){return(new Date).getTime()};var N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},P=p.invert(N),E=function(e){var t=function(t){return e[t]},o="(?:"+p.keys(e).join("|")+")",n=RegExp(o),a=RegExp(o,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(a,t):e}};p.escape=E(N),p.unescape=E(P),p.result=function(e,t,o){var n=null==e?void 0:e[t];return void 0===n&&(n=o),p.isFunction(n)?n.call(e):n};var O=0;p.uniqueId=function(e){var t=++O+"";return e?e+t:t},p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var U=/(.)^/,W={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,F=function(e){return"\\"+W[e]};p.template=function(e,t,o){!t&&o&&(t=o),t=p.defaults({},t,p.templateSettings);var n=RegExp([(t.escape||U).source,(t.interpolate||U).source,(t.evaluate||U).source].join("|")+"|$","g"),a=0,i="__p+='";e.replace(n,function(t,o,n,r,s){return i+=e.slice(a,s).replace(q,F),a=s+t.length,o?i+="'+\n((__t=("+o+"))==null?'':_.escape(__t))+\n'":n?i+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(i+="';\n"+r+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";var r;try{r=new Function(t.variable||"obj","_",i)}catch(s){throw s.source=i,s}var l=function(e){return r.call(this,e,p)},c=t.variable||"obj";return l.source="function("+c+"){\n"+i+"}",l},p.chain=function(e){var t=p(e);return t._chain=!0,t};var H=function(e,t){return e._chain?p(t).chain():t};p.mixin=function(e){p.each(p.functions(e),function(t){var o=p[t]=e[t];p.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),H(this,o.apply(p,e))}})},p.mixin(p),p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];p.prototype[e]=function(){var o=this._wrapped;return t.apply(o,arguments),"shift"!==e&&"splice"!==e||0!==o.length||delete o[0],H(this,o)}}),p.each(["concat","join","slice"],function(e){var t=o[e];p.prototype[e]=function(){return H(this,t.apply(this._wrapped,arguments))}}),p.prototype.value=function(){return this._wrapped},p.prototype.valueOf=p.prototype.toJSON=p.prototype.value,p.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return p})}(),function(e,t){"use strict";t.module("ngCollection",[]).factory("$collection",["$filter","$parse",function(e,o){function n(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function a(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}function i(e,t){return t(e)}function r(e){e||(e={}),void 0!==e.comparator&&(this.comparator=e.comparator),this.idAttribute=e.idAttribute||this.idAttribute,this.current=null,this._reset(),this.initialize.apply(this,arguments)}return r.prototype={idAttribute:"id",initialize:function(){},add:function(e,o){o||(o={});var n,i,r,s;return i=o.sort!==!1,s=void 0!==o.index?o.index:this.array.length,e[this.idAttribute]||(e[this.idAttribute]=a()),r=this.get(e),r?t.extend(r,e):(n=e[this.idAttribute],this.hash[n]=e,this.array.splice(s,0,e),this.length+=1),i&&this.sort(),this},addAll:function(e,o){o||(o={});for(var n=o.sort!==!1,a=0;a<e.length;a++){var i=e[a];this.add(i,t.extend(o,{sort:!1}))}return n&&this.sort(),this},sort:function(t){return t=t||this.comparator,t&&(this.array=e("orderBy")(this.array,t)),this},get:function(e){return null!=e?this.hash[e[this.idAttribute]||e]:void 0},find:function(e,t,n){var a=e;if("string"==typeof e){var r=o(e);a=function(e){return n?r(e)==t:r(e)===t},a.prototype.value=t,a.prototype.deepCompare=n}for(var s=0;s<this.array.length;s++)if(i(this.array[s],a))return this.array[s]},where:function(e,t,n){var a=[],r=e;if("string"==typeof e){var s=o(e);r=function(e){return n?s(e)===t:s(e)===t},r.prototype.value=t,r.prototype.deepCompare=n}for(var l=0;l<this.array.length;l++)i(this.array[l],r)&&a.push(this.array[l]);return a},update:function(e){var o;return o=this.get(e),o&&t.extend(o,e),o||this.add(e),this},remove:function(e){var t;return t=this.array.indexOf(e),-1===t?this:(delete this.hash[e[this.idAttribute]],this.array.splice(t,1),this.length--,this)},removeAll:function(){for(var e=this.array.length-1;e>=0;e--)this.remove(this.at(e));return this},last:function(){return this.array[this.length-1]},at:function(e){return this.array[e]},size:function(){return this.array.length},all:function(){return this.array},_reset:function(){this.length=0,this.hash={},this.array=[]}},r.extend=function(e){var o,n=this;o=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return n.apply(this,arguments)};var a=function(){this.constructor=o};return a.prototype=n.prototype,o.prototype=new a,e&&t.extend(o.prototype,e),o.extend=n.extend,o.getInstance=r.getInstance,o._super=n.prototype,o},r.getInstance=function(e){return new this(e)},r}])}(window,window.angular);var indexApp=angular.module("indexApp",["ngRoute","ngTouch","apps.filters","apps.services","apps.controllers","apps.directives","templates","ng-translation","ngCollection"]),appsFilters=angular.module("apps.filters",[]),appsServices=angular.module("apps.services",["ngCookies"]),appsControllers=angular.module("apps.controllers",[]),appsDirectives=angular.module("apps.directives",[]);indexApp.config(["$locationProvider","$routeProvider","ngTranslationProvider","NavigatorProvider",function(e,t,o,n){o.setDirectory("lang").setFilesSuffix(".json").langsFiles({en:"en",jp:"jp",cn:"cn"}).fallbackLanguage("cn"),n.init();var a={home:{templateUrl:"view/html/home-en.html",controller:"HomeCtrl",pageClass:"home",subNavStyle:""}};"cn"==n.language&&(n.isMobile?a.home={templateUrl:"view/html/home-store-mobile.html",controller:"StoreCtrl",pageClass:"page-store-mobile",resolve:{smartisan:["GoodsService","$filter",function(e,t){var o=[100013608,100014902,100013529,100013438,100010806,100010606,100013707];return e.getSimpleDetail(o.join(",")).then(function(e){var t=$.extend({},e);return t.list=[{name:"“情怀”背壳系列",subname:"为了那些改变人类进程的足迹",price:69,image:"wap-home-smartisan-qinghuai_7c4f4c5469.png",link:"#/hd/qinghuai"},{name:"Smartisan T2 官方保护套",subname:"保护玻璃表面的同时，也与黑色机身相得益彰",price:angular.isObject(e[100014902])?e[100014902].price:49,image:"wap-home-smartisan-goods-100014902_2664470527.png",link:"#/item/100014902"},{name:"坚果手机标准版七彩背壳",subname:"【满减优惠】买 3 片仅需 ¥ 99",price:angular.isObject(e[100010606])?e[100010606].price:49,isDiscount:!0,image:"wap-home-smartisan-goods-100010606_c8ca9f9884.png",link:"#/item/100010606"},{name:"坚果手机文青版多彩背壳",subname:"【满减优惠】买 3 片仅需 ¥ 99",price:angular.isObject(e[100013707])?e[100013707].price:49,isDiscount:!0,image:"wap-home-smartisan-goods-100013707_5d1b4f9b68.png",link:"#/item/100013707"},{name:"Smartisan T 男款",subname:"100% 美国 SUPIMA 棉 T 恤衫",price:angular.isObject(e[100013529])?e[100013529].price:199,image:"wap-home-smartisan-goods-100013529_3e6c987f49.png",link:"#/item/100013529"},{name:"Smartisan T 女款",subname:"100% 美国 SUPIMA 棉 T 恤衫",price:angular.isObject(e[100013438])?e[100013438].price:199,image:"wap-home-smartisan-goods-100013438_a5e24cac89.png",link:"#/item/100013438"},{name:"七款彩色不透明保护套",subname:"仅适用于坚果手机",price:angular.isObject(e[100010806])?e[100010806].price:39,image:"wap-home-smartisan-goods-100010806_42c1c2ae35.png",link:"#/item/100010806"},{name:"手机意外保修服务",subname:"“免费更换一次主机？”“免费两次维修”",price:"99 起",image:"wap-home-smartisan-warranty_1f9cfa03ce.png",link:"http://store.smartisan.com/#/insurance/information"}],t})}],recommend:["CartService","StoreConfig","Config",function(e,t,o){return e.getFeatureList("1,6").then(function(e){var t={},n={1:"doodle",2:"goods",3:"t2",4:"nuts",5:"official",6:"thirdparty"};return e&&angular.forEach(e,function(a,i){for(var r in a)a[r].shop_info&&(a[r].shop_info.image=o.imgUrl+a[r].shop_info.images[0]);t[n[i]]=e[i]}),t})}]}}:a.home={templateUrl:"view/html/home-store.html",controller:"StoreCtrl",pageClass:"page-store",resolve:{smartisan:["GoodsService","$filter",function(e,t){var o=[100013608,100014902,100013529,100013438,100010806,100010606,100013707];return e.getSimpleDetail(o.join(",")).then(function(e){var t=$.extend({},e);return t.list=[{name:"Smartisan T 男款",subname:"100% 美国 SUPIMA 棉 T 恤衫",price:angular.isObject(e[100013529])?e[100013529].price:199,image:"home-smartisan-goods-04_483aca4eb0.png",link:"#/item/100013529"},{name:"Smartisan T 女款",subname:"100% 美国 SUPIMA 棉 T 恤衫",price:angular.isObject(e[100013438])?e[100013438].price:199,image:"home-smartisan-goods-05_6b570d2264.png",link:"#/item/100013438"},{name:"“情怀”背壳系列",subname:"为了那些改变人类进程的足迹",price:69,image:"home-smartisan-goods-06_33e960faab.png",link:"#/hd/qinghuai"},{name:"七款彩色不透明保护套",subname:"仅适用于坚果手机",price:angular.isObject(e[100010806])?e[100010806].price:39,image:"home-smartisan-goods-07_ce8a7089f5.png",link:"#/item/100010806"},{name:"坚果手机标准版七彩背壳",subname:"[ 满减优惠 ] 买 3 片仅需 ¥ 99",price:angular.isObject(e[100010606])?e[100010606].price:49,isDiscount:!0,image:"home-smartisan-goods-08_5568b0effb.png",link:"#/item/100010606"},{name:"坚果手机文青版多彩背壳",subname:"[ 满减优惠 ] 买 3 片仅需 ¥ 99",price:angular.isObject(e[100013707])?e[100013707].price:49,isDiscount:!0,image:"home-smartisan-goods-09_803cb8e980.png",link:"#/item/100013707"}],t})}],recommend:["CartService","StoreConfig","Config",function(e,t,o){return e.getFeatureList("1,6").then(function(e){var t={},n={1:"doodle",2:"goods",3:"t2",4:"nuts",5:"official",6:"thirdparty"};return e&&angular.forEach(e,function(a,i){for(var r in a)a[r].shop_info&&(a[r].shop_info.image=o.imgUrl+a[r].shop_info.images[0]);t[n[i]]=e[i]}),t})}]}}),t.when("/home",a.home),t.when("/",a.home),"cn"==n.language&&(t.when("/category",{templateUrl:n.isMobile?"view/html/category-mobile.html":"view/html/category.html",controller:"CategoryCtrl",pageClass:"app-page-category",reloadOnSearch:!1,resolve:{categoryList:["CategoryService",function(e){return e.getCategoryList()}],goodsList:["$location","CategoryService","StoreConfig","Config",function(e,t,o,n){var a,i=e.search().id,r=e.search().sort||"sort",s=e.search().page||1,l=0;return t.getCategory(i,s,r).then(function(t){if(1>s||t.page_count<s)return e.path("/error/404"),!1;if(t.list)for(;a=t.list.length,a>l;++l)t.list[l].shop_info&&(t.list[l].shop_info.image=n.imgUrl+t.list[l].shop_info.images[0]),!t.list[l].placeholder&&t.list[l].product_info.is_mobile&&(t.list[l].shop_info.title.split("坚果").length>1?t.list[l].shop_info.targetUrl="/jianguo":t.list[l].shop_info.title.split("T1").length>1?t.list[l].shop_info.targetUrl="/t1":t.list[l].shop_info.targetUrl="/t2");return t})}],displayType:["StorageService",function(e){return e.get("categoryDisplay")||1}]}}),t.when("/item/:id",{templateUrl:n.isMobile?"view/html/item-mobile.html":"view/html/item.html",controller:"ItemCtrl",pageClass:"app-page-item",subNavStyle:"",reloadOnSearch:!1}),t.when("/cart",{templateUrl:n.isMobile?"view/html/cart-mobile.html":"view/html/cart.html",controller:"CartCtrl",pageClass:"app-page-cart",subNavStyle:"hide",resolve:{user:["BaseInfo","Account","$rootScope","$location","$route",function(e,t,o,n,a){return e.update().then(function(e){o.isLoggedIn=!0,n.path("/cart")},function(e){t.login()}),{}}],carts:["CartService","CartRequest","StoreConfig",function(e,t,o){return e.syncList().then(function(t){return e.parsePageCartList(t)})}]}}),t.when("/jianguo",{templateUrl:n.isMobile?"view/html/jianguo-mobile.html":"view/html/jianguo.html",controller:"JianguoCtrl",pageClass:"app-page-jianguo",subNavStyle:"t2-header white-header",resolve:{pageParams:["$location","NutsService",function(e,t){var o=e.search().name;switch(o||(e.search().youth?o="youth":e.search().art?o="art":e.search().black&&(o="black"),o&&e.url("/jianguo?name="+o)),o){case"youth":o="normal";break;case"art":o="young";break;case"black":o="black";break;default:o=""}return t.getPageParams(o)}],curMobile:function(){return{}},specMap:["NutsService",function(e){return e.specMap()}],total:function(){return 0}}}),t.when("/accessories",{templateUrl:n.isMobile?"view/html/accessories-mobile.html":"view/html/accessories.html",controller:"AccessoriesCtrl",pageClass:"app-page-accessories",subNavStyle:"hide",resolve:{pageData:["$location","MobileService","MobileGoodsService","MobileFittingService",function(e,t,o,n){var a=t.parseOrderViewData(e.search()),i=e.search().fitting;if(!a.mobileData)return e.url("/error/404"),!1;var r=[],s="",l="";switch(a.mobileData.category){case"t1":r=o.listWarrantysT1;break;case"t2":r=o.listWarrantysT2,l="t2";break;case"nuts":switch(r=o.listWarrantysNuts,a.mobileData.version){case"normal":l="youth",s="标准版";break;case"young":l="art",s="文艺青年版";break;case"black":l="black",s="黑色版"}break;default:r=o.listWarrantysT1}var c=i?"选择配件":"选择服务";return a.stepFitting=i,{warrantys:r,titleLabel:c,mobileVersion:l,goodsStock:function(){return n.getFitting(a.mobileData.category,l)}(),order:function(){return o.getAllMobilesStock(a.mobileData.sku).then(function(e){var t=e[a.mobileData.sku];a.mobileData.stock=t.stock}),a}(),mobileName:function(){var e="";switch(a.mobileData.category){case"t1":e=" Smartisan T1 ";break;case"t2":e=" Smartisan T2 ";break;case"nuts":e="坚果手机";break;default:e=" Smartisan T1 "}return e}()}}]}}),t.when("/accessories/:id",{resolve:{pageData:["$location","MobileService","MobileGoodsService","StorageService",function(e,t,o,n){var a=e.path().replace("/accessories/",""),i=n.get(a,{domain:".smartisan.com"});return i?void e.url("/accessories?"+t.parseTempOrderParams(i)):(e.url("/error/404"),!1)}]}}),t.when("/cdkey",{templateUrl:n.isMobile?"view/html/cdkey-mobile.html":"view/html/cdkey.html",controller:"CdkeyCtrl",pageClass:"app-page-cdkey",subNavStyle:""}),t.when("/t2",{templateUrl:n.isMobile?"view/html/t2-mobile.html":"view/html/t2.html",controller:"T2Ctrl",pageClass:"app-page-t2",subNavStyle:"t2-header white-header",resolve:{pageParams:["$location","T2Service",function(e,t){var o=e.search().name;switch(o){case"black":o="black";break;default:o=""}return t.getPageParams(o)}]}}),t.when("/hd/qinghuai",{templateUrl:n.isMobile?"view/html/qinghuai-mobile.html":"view/html/qinghuai.html",controller:"QinghuaiCtrl",pageClass:"app-page-qinghuai",subNavStyle:"",resolve:{Cover:["$location","CategoryService","StoreConfig","Config",function(e,t,o,n){var a,i=63,r=1,s=0;return t.getCategory(i,r).then(function(e){if(e.list)for(;a=e.list.length,a>s;++s)e.list[s].shop_info&&(e.list[s].shop_info.image=n.imgUrl+e.list[s].shop_info.images[0]);return e})}]}}));var i={support:["instruction","payment","service","delivery","storelist","about","contact","agreement","privacy","insurance","repair","cloud-terms","osterms","appstore-terms","property","join"],special:["ifawards","fudai","fudai-intro"],t1:["overview","design","features","os","specs"],pr:["news-center"]};for(var r in i)for(var s=i[r],l=0;l<s.length;l++){var c=s[l],u="/"+c,d=function(e){return function(t,o,n){var a="http://www.smartisan.com/"+e+"/#"+o;location.replace(a)}}(r);t.when(u,{redirectTo:d})}t.when("/cloudTerms",{redirectTo:"/cloud-terms"}),t.when("/appStoreTerms",{redirectTo:"/appstore-terms"}),t.when("/rd",{redirectTo:"/"}),t.when("/2016520",{redirectTo:"/"}),t.when("/error/:id",{title:"Smartisan",templateUrl:"view/html/error.html",controller:"ErrorCtrl",pageClass:"page-error",subNavStyle:"hide"}),t.otherwise({redirectTo:"/error/404"}),t.when("/mobile-videolist",{redirectTo:function(e,t,o){location.replace("http://www.smartisan.com/pr/#/videos")}}),t.when("/mobile-video/:id",{redirectTo:function(e,t,o){var n=t.substring(8);location.replace("http://www.smartisan.com/pr/#/"+n)}}),t.when("/pr/news-center/:archive",{redirectTo:function(e,t,o){var n=t.substring(3);location.replace("http://www.smartisan.com/pr/#"+n)}}),t.when("/video",{redirectTo:function(e,t,o){location.replace("http://www.smartisan.com/pr/#/video/smartisant1")}}),t.when("/video/:id",{redirectTo:function(e,t,o){location.replace("http://www.smartisan.com/pr/#"+t)}}),t.when("/pr/video",{redirectTo:function(e,t,o){location.replace("http://www.smartisan.com/pr/#/videos")}}),t.when("/pr/video/:id",{redirectTo:function(e,t,o){var n=t.substring(3);location.replace("http://www.smartisan.com/pr/#"+n)}}),t.when("/pr/news/:id",{redirectTo:function(e,t,o){var n=t.substring(9,19),a=n.match(/^20[0-9]{4}/);location.replace("http://www.smartisan.com/pr/#/news/"+a+"/"+n)}}),t.when("/pr/news/:archive/:id",{redirectTo:function(e,t,o){var n=t.substring(3);location.replace("http://www.smartisan.com/pr/#"+n)}}),t.when("/pr/pictures",{redirectTo:function(e,t,o){var n=t.substring(3);location.replace("http://www.smartisan.com/pr/#"+n)}}),t.when("/apps/:appName",{redirectTo:function(e,t,o){var n=t.substring(5);location.replace("http://www.smartisan.com/apps/#"+n)}})}]),indexApp.run(["$rootScope","$route","Utils","ngTranslation","Navigator","Topbar","Account",function(e,t,o,n,a,i,r){e.isMobile=a.isMobile,e.lang=a.language,e.pageLoading=!1,r.set({cartSync:!0}),n.use(e.lang),e.$on("$routeChangeStart",function(t,o,n){e.currentPage="",$(".page-loading").show(),e.pageLoading=!0,i.init()}),e.$on("$routeChangeSuccess",function(n,a,i){e.pageClass=t.current.pageClass,e.subNavStyle=t.current.subNavStyle||"",$(".page-loading").hide(),e.pageLoading=!1,o.setHeaderActive("")})}]),appsServices.factory("Utils",["$rootScope","$q","$http","$location","$cookies",function(e,t,o,n,a){var i={};return i.truncateChars=function(e,t,o,n){if(e){var a=e.replace(/[\u4e00-\u9fa5\s]/g,"**").length,i=[],r=0;if(n){var s=$("<div></div>").html(e);e=s.text(),s=null}if(t>=a)return e;for(var l=0;a>l;l++){var c=e.charAt(l);if(r+=/[^\x00-\xff]/.test(c)?2:1,
i.push(c),r>=t)break}return o?i.join("")+"...":i.join("")}return""},i.encodeUriQuery=function(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")},i.toKeyValue=function(e){var t=this,o=[];return angular.forEach(e,function(e,n){angular.isArray(e)?angular.forEach(e,function(e){o.push(t.encodeUriQuery(n,!0)+(e===!0?"":"="+t.encodeUriQuery(e,!0)))}):o.push(t.encodeUriQuery(n,!0)+"="+t.encodeUriQuery(e,!0))}),o.length?o.join("&"):""},i.shareWeibo=function(e,t,o,n,a){var i=e||$(".share-btn"),r=null;r=a?encodeURIComponent(a):encodeURIComponent(location.href);var s=o||"",l="http://service.weibo.com/share/share.php?appkey=",c=n||$(".share-weibo-cover").attr("src"),u=encodeURIComponent(this.truncateChars(s,232,!0));l+="&title="+u,l+="&url="+r,c&&(l+="&pic="+encodeURIComponent(c)),i.attr("href",l)},i.setTitle=function(e,t){"undefined"==typeof t?document.title=e:document.title=e+" - "+t},i.setKeywords=function(e){e&&""!==e&&$("meta[name='keywords']").attr({content:e})},i.setDescription=function(e){e&&""!==e&&$("meta[name='description']").attr({content:e})},i.setMobileTitle=function(t){var o="";"undefined"==typeof t.text?o="en"==e.lang?'<a href="http://www.smartisan.com/en/#/home"><span class="logo-pic"></span></a>':'<a href="http://www.smartisan.com/#/home"><span class="logo-pic"></span></a>':o+="undefined"==typeof t.url?t.text:'<a href="'+t.url+'">'+t.text+"</a>",$(".mobile-title").html(o)},i.setCrumbs=function(e){for(var t="",o=0;o<e.length;o++)t+="undefined"==typeof e[o].url?e[o].title:'<a href="'+e[o].url+'">'+e[o].title+"</a>",o+1<e.length&&(t+='<span class="arrow"></span>');$(".header-crumbs").length?$(".header-crumbs").html(t):$(".breadcrumb").html(t)},i.setT1Crumbs=function(e,t){e&&$(".header-sub .breadcrumb").removeClass("hide");var o="";t&&(o+='<h2 class="phone-logo"></h2>'),o+='<ul class="t1Crumbs">';for(var n=e.currentPage,a=0;a<e.list.length;a++){var i="";n&&e.list[a].url.indexOf(n)>0&&(i="on"),o=o+'<li class="'+i+'"><a href="'+e.list[a].url+'">'+e.list[a].title+"</a></li>"}o+="</ul>",$(".breadcrumb").html(o)},i.setTCrumbs=function(e,t,o){e&&$(".header-sub .breadcrumb").removeClass("hide");var n="";o&&(n+='<h2 class="device-logo"></h2>'),t||(t="device-nav"),n+='<ul class="'+t+'">';for(var a=e.currentPage,i=0;i<e.list.length;i++){var r="";a&&e.list[i].url.indexOf(a)>0&&(r="active"),n=n+'<li class="'+r+'"><a href="'+e.list[i].url+'">'+e.list[i].title+"</a></li>"}n+="</ul>",$(".breadcrumb").html(n)},i.openServiceWindow=function(){var e="http://chat10.live800.com/live800/chatClient/chatbox.jsp?companyID=376704&lan=zh&configID=185120&jid=4594069570",t=decodeURIComponent(arguments[0]||e),o=arguments[1]||"_blank",n=arguments[2]||800,a=arguments[3]||600,i="directories=no, titlebar=no, toolbar=no, location=no, status=no, menubar=no, scrollbars=no, resizable=no, top=200,left=200, width= "+n+", height="+a,r=arguments[4]||!0;window.open(t,o,i,r)},i.showMore=function(e,t){var o=e.height(),n=e.find("h3").outerHeight()+e.find("ul").outerHeight();n>o&&(t.css({display:"block"}),t.bind("click",function(){e.find(".feature-wrapper").css({height:"auto"}),t.hide()}))},i.isMobile=function(){var e=window.devicePixelRatio||1;return $(window).width()<=736&&(screen.width<=736||e>=2)},i.isWeixin=function(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)?!0:!1},i.isMobileQQ=function(){var e=navigator.userAgent.toLowerCase();return"qq/"==e.match(/qq\//i)?!0:!1},i.isIphone=function(){var e=navigator.userAgent.toLowerCase();return"iphone"==e.match(/iphone/i)?!0:!1},i.isAndroid=function(){var e=navigator.userAgent.toLowerCase();return"android"==e.match(/android/i)?!0:!1},i.mobileGuide=function(e){function t(){r.show(),setTimeout(function(){var e=s>n.height()?s:n.height();r.css({height:e})},700),r.bind("click",function(){r.hide()})}var o=this,n=$(document.body),a=$("#download-android"),i=$("#download-iPhone"),r=$("#mobileGuide"),s=window.screen.availHeight;this.isWeixin()||this.isMobileQQ()||this.isIphone()||!i.attr("href")||!i.attr("href").match(/^http/)||$(".desc-download .for-iphone").attr("target","_blank"),this.isWeixin()&&(o.isIphone()?i.bind("click",function(e){return t(),r.find("img").hide(),r.find(".guide-iOS-download").show(),!1}):a.bind("click",function(e){return t(),r.find("img").hide(),r.find(".guide-android-download").show(),!1})),location.href.match(/\QR_download/)?this.isAndroid()?this.isWeixin()||this.isMobileQQ()?(t(),r.find(".guide-android-download").show()):setTimeout(function(){location.href=a.attr("href")},2e3):this.isIphone()&&(this.isWeixin()||this.isMobileQQ()?(t(),r.find(".guide-iOS-download").show()):setTimeout(function(){location.href=i.attr("href")},2e3)):location.href.match(/\QR_share/)&&(this.isWeixin()||this.isMobileQQ())&&(t(),this.isIphone()?r.find(".guide-iOS-share").show():this.isAndroid()&&r.find(".guide-android-share").show())},i.changeLangCookies=function(e){var t=e.target.href,o=t.match(/(en|jp|cn)+/i)[1];"www.smartisan.com"!==location.host&&(e.preventDefault(),location.href.indexOf("lang=")<0?location.href+="?lang="+o:(location.href=location.href.replace(/\=(en|cn|jp)+/,function(e){return"="+o}),setTimeout(function(){window.location.reload()},200))),-1===t.indexOf("en")?a.put("lang","zh-CN",{path:"/",domain:"smartisan.com"}):a.put("lang","en-US",{path:"/",domain:"smartisan.com"})},i.setHeaderActive=function(t){e.appHeader=t},i.getServerTime=function(){var e=t.defer(),o="http://setting.smartisan.com/info/time?jsonp=1",n=null;return $.ajax({type:"get",dataType:"jsonp",url:o,success:function(t){t&&0==t.code&&t.data.timestamp&&(n=parseInt(t.data.timestamp)),e.resolve({now:n})},error:function(){e.resolve({now:null})}}),e.promise},i}]),appsServices.constant("Config",{baseUrl:"/index.php?r=",middlewareTestUrl:"http://172.16.21.72/product/",middlewareProUrl:"http://www.smartisan.com/product/",storeUrlRest:"/store/index.php?r=",mStoreUrlRest:"/store/index.php?r=",imgUrl:"http://img01.smartisanos.cn/",headconfig:{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}},storeUrl:"http://store.smartisan.com/#/",regExp:{isMobile:/^1[3|4|5|7|8]\d{9}$/,isMail:/^[\w.%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}$/,isPassword:/^[\w\\\[\]\:\^\-~!@#$%&*()-+={}|;'",.\/<>?]{6,16}$/,isSafeUrl:/^(http|https)\:\/\/[a-zA-Z0-9\-\.]+\.(smartisan.com\b)(:[a-zA-Z0-9]*)?\/?([a-zA-Z0-9\-\._\?\,\'\/\\\+&amp;%\$#\=~])*$/,isIMEI:/^\d{15}$/,isMAC:/^([0-9a-fA-F]{2})(([\s:][0-9a-fA-F]{2}){5})$/,numOrEn:/^[0-9a-zA-Z]+$/,errorStr:/^[^\&\<\>]*$/},getDPR:function(){var e=window.devicePixelRatio,t="1x";return e&&(e>1&&2>=e?t="2x":e>2&&(t="mobile")),t},getDomain:function(){return window.location.host.indexOf("smartisan.com")>=0?"smartisan.com":"localhost"}}).constant("ACCESS_LEVELS",{pub:1,user:2,cloud:3,alpha:4}),appsServices.factory("Message",["$rootScope","Account","User","BaseInfo","$location",function(e,t,o,n,a){var i=function(i){var r=i.originalEvent;r.origin==t.config.origin&&("isLoggedIn"==r.data&&(n.update(),t.config.cartSync&&("-1"!=a.path().indexOf("/cart")?e.$broadcast("login",{name:"cart"}):"-1"!=a.path().indexOf("/accessories")?e.$broadcast("login",{name:"accessories"}):e.$broadcast("cart",{name:"syncList"}))),"isRegistered"==r.data&&(n.update(),t.config.cartSync&&("-1"!=a.path().indexOf("/cart")?e.$broadcast("login",{name:"cart"}):e.$broadcast("cart",{name:"syncList"}))),"isLoggedOut"==r.data&&(t.close(),o.logout(),t.config.cartSync&&(e.$broadcast("cart",{name:"removeCartAll"}),"-1"!=a.path().indexOf("/cart")?e.$broadcast("dialogClose",{name:"cart"}):e.$broadcast("dialogClose",{name:"normal"}))),"dialogClose"==r.data&&(t.close(),t.config.cartSync&&("-1"!=a.path().indexOf("/cart")?e.$broadcast("dialogClose",{name:"cart"}):e.$broadcast("dialogClose",{name:"normal"}),e.$apply())))};return{handler:i}}]),appsServices.factory("Account",["$window",function(e){var t={},o={wrapper:"body",origin:"https://account.smartisan.com",loginUrl:"https://account.smartisan.com/#/login/embed",logoutUrl:"https://account.smartisan.com/#/logout/embed",registerUrl:"https://account.smartisan.com/#/register/embed",iPadFixLoginUrl:"https://account.smartisan.com/#/login",iPadFixRegisterUrl:"https://account.smartisan.com/#/register",cartSync:!1},n=/iPad/i.test(e.navigator.userAgent),a=function(){var e=window.devicePixelRatio||1;return $(window).width()<=736&&(screen.width<=736||e>=2)}(),i=function(){if(!t.wrapper){var e=[];e.push('<div class="iframe-dialog" id="iframe-dialog">'),e.push('<div class="mask"></div>'),e.push('<iframe allowtransparency="true" src="" frameborder="0"></iframe>'),e.push("</div>"),t.wrapper=$(o.wrapper),t.wrapper.append(e.join(""))}t.mask=$("#iframe-dialog .mask"),t.iframe=$("#iframe-dialog iframe")},r=function(t){var o=e.location.href;e.location.href=t+"?return_url="+encodeURIComponent(o)},s=function(o,n){if("undefined"!=typeof o){i();var a=e.location.origin||e.location.protocol+"//"+e.location.hostname;t.iframe.attr("src",o+"?origin="+a),n||(t.mask.show(),t.iframe.addClass("show"))}},l=function(){t.iframe&&(t.mask.hide(),t.iframe.removeClass("show"),t.iframe.attr("src",""))},c=function(){n||a?r(o.iPadFixLoginUrl):s(o.loginUrl)},u=function(){s(o.logoutUrl,!0)},d=function(){n||a?r(o.iPadFixRegisterUrl):s(o.registerUrl)},p=function(e){o=angular.extend(o,e||{})};return{config:o,close:l,login:c,logout:u,register:d,set:p}}]),appsServices.factory("User",["$rootScope","$q","$http","$location","Config","ACCESS_LEVELS","Utils",function(e,t,o,n,a,i,r){var s={},l=!1,c=a.baseUrl;"-1"!=location.href.indexOf("www.smartisan.com")&&(c=a.storeUrlRest);var u=a.headconfig,d=function(t){$.extend(s,t),l=!0,s.role>i.user?e.isLoggedIn=!0:e.isLoggedIn=!1},p=function(){var n=t.defer(),a={};a.fields="avatar_url,nickname,cellphone,t1_gift";var i=r.toKeyValue(a);return o.post(c+"Account/IsLogin",i,u).success(function(t){0==t.code?(d(t.data),e.isLoggedIn=!0,n.resolve(t)):(e.isLoggedIn=!1,n.reject(t))}).error(function(){n.reject("网络异常!")}),n.promise};return{getInfo:p,isInitial:function(){return l},isAuthorized:function(e){return s&&s.role>=e},set:d,isLoggedIn:function(){return s.uid?!0:!1},getUser:function(){return s},getId:function(){return s?s.uid:null},getName:function(){return s.name||""},getRole:function(){return s.role||null},getAvatarUrl:function(){return s.avatarUrl||""},logout:function(){s={},e.isLoggedIn=!1,e.$broadcast("logout"),e.$apply()}}}]),appsServices.factory("BaseInfo",["$rootScope","$q","$cookies","User","Account","Utils","$timeout","$location",function(e,t,o,n,a,i,r,s){var l=function(){var s=t.defer();return n.getInfo().then(function(t){a.close(),e.loginUser=t.data,s.resolve();var n=!1;if(!i.isMobile()&&0==t.code&&t.data.t1_gift&&parseInt(t.data.t1_gift)>0?(r(function(){$(".header .account-panel .account-menu li.coupon").addClass("active")},1e3),n=!0):$(".header .account-panel .account-menu li.coupon").removeClass("active"),a.config.cartSync){var l=o.get("couponNotice");1!=l&&n&&r(function(){var e=$(".main .notice-dialog");e.length>0&&(e.show().delay().toggleClass("on",!0),o.put("couponNotice",1,{domain:".smartisan.com",path:"/"}),e.find(".notice-close").on("click",function(t){t.preventDefault(),e.remove()}))},200)}},function(e){s.reject()}),s.promise};return{update:l}}]),appsServices.factory("Request",["$http","$q","Config","Utils",function(e,t,o,n){var a=o.baseUrl,i=o.headconfig,r=function(o){return function(r){var s=t.defer(),l=n.toKeyValue(r);return e.post(a+o,l,i).success(function(e){s.resolve(e)}).error(function(){s.reject("网络异常!")}),s.promise}};return{recruiting:r("recruit/create"),finderRecruiting:r("finder/create"),getProvince:r("Areas/Province"),getCity:r("Areas/City"),getDistrict:r("Areas/Area")}}]),appsServices.factory("Language",["$rootScope","$cookies","$window","$location",function(e,t,o,n){var a=window.location.pathname.match(/\/(jp|en|cn)\//i),i=function(){a?e.lang=a[1]:n.search().lang?e.lang=n.search().lang:e.lang="cn",e.langStatic="cn"===e.lang?"":e.lang+"/"};return{init:i}}]),appsServices.provider("Navigator",{isMobile:!1,language:"cn",init:function(){this.setMobile(),this.setLanguage()},setMobile:function(){var e=window.devicePixelRatio||1;this.isMobile=$(window).width()<=736&&(screen.width<=736||e>=2)},setLanguage:function(){var e=window.location.pathname.match(/\/(jp|en|cn)\//i);e?this.language=e[1]:-1!=location.href.indexOf("?lang=")?this.language=location.href.split("?lang=")[1]:this.language="cn"},$get:function(){var e=this;return{language:e.language,isMobile:e.isMobile}}}),appsServices.factory("Topbar",["$timeout","$rootScope",function(e,t){var o,n,a={isWhiteBar:!1,topbarIsStore:!1,isBar:!1,prev:null,titleLabel:"",nextShow:!1,useCart:!0,cartNum:0,useAccount:!0},i={},r=!1;return{set:function(e){if(!r)return void(n=e);i[o].topbar=angular.extend({},a,e?e:{})},init:function(e){var o=this;a=angular.extend(a,e?e:{}),t.topbarIsStore=t.isMobile&&!!a.topbarIsStore,o.set(e)},addDom:function(e,t,a){var s=this;r=!0,domsMap=t,o=e||"topbar",i[o]=a,s.init(),n&&(s.set(n),n=null)}}}]),appsFilters.filter("to_HTML",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),appsDirectives.directive("changeLanguage",["$document",function(e){return{restrict:"A",link:function(t,o,n,a){o&&(o.on("click",function(e){var t=$(e.target).closest(".language-switch");return t.toggleClass("active"),!1}),e.on("click",function(e){var t=$(e.target);t.closest(".language-switch").is(".language-switch")||$(".language-switch").removeClass("active")}))}}}]).directive("mobileTopbar",["$location","Topbar",function(e,t){return{restrict:"EA",link:function(o,n,a,i){n&&(o.prevAction=function(){return angular.isFunction(o.topbar.prevFn)?void o.topbar.prevFn():void(o.topbar.prevIsBack&&(history.length?history.back(-1):e.url("/")))},t.addDom(a.name,n,o))}}}]).directive("showWeixinCode",["$document","Utils",function(e,t){return{restrict:"A",link:function(e,t,o,n){t&&t.find("a").on("click",function(){var e=$(this).parent(".weixin"),t=e.find(".qrcode");if(t.is(":hidden")){e.addClass("hold");var o=$(window).height()/2;t.css({bottom:o+"px"}),t.fadeIn(100),setTimeout(function(){e.find(".mask").one("click",function(){e.removeClass("hold"),t.fadeOut(300),e.removeClass("hold")}),e.find(".close-btn").one("click",function(){e.removeClass("hold"),t.fadeOut(300),e.removeClass("hold")})})}})}}}]).directive("openServiceWindow",["$document","Utils",function(e,t){return{restrict:"A",link:function(e,o,n,a){o&&o.on("click",function(e){e.preventDefault(),t.openServiceWindow()})}}}]).directive("mobileNavShow",["$document",function(e){return{restrict:"A",link:function(e,t,o,n){t&&$(document).on("touchend",".mobile-topbar .nav-toggle",function(e){var t=e.originalEvent.changedTouches;return t&&t.length&&($("html").toggleClass("mobile-noscroll"),$(".wrapper").removeClass("moblie-quick-nav"),$(".wrapper").toggleClass("moblie-show-nav")),!1})}}}]).directive("mobileNavSticky",["$document",function(e){return{restrict:"A",link:function(e,t,o,n){}}}]).directive("backTop",["$document",function(e){return{restrict:"A",link:function(e,t,o,n){t&&($(window).on("scroll",function(){$(window).scrollTop()>600?t.addClass("active"):t.removeClass("active")}),t.on("click",function(){$("html,body").animate({scrollTop:51==$("body").offset().top?0:$("body").offset().top},{queue:!1},500)}))}}}]).directive("accountReservation",["$document","Utils",function(e,t){return{restrict:"A",link:function(e,o,n,a){o&&t.isMobile()&&o.on("click",function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")})}}}]).directive("routeChangeResetHeader",[function(){return{restrict:"A",controller:["$element","$rootScope","Utils",function(e,t,o){t.$on("$routeChangeStart",function(){o.setMobileTitle({}),$(".wrapper").removeClass("moblie-show-nav"),$("html").removeClass("mobile-noscroll"),e.find(".header-sub .breadcrumb").removeClass("hide")})}]}}]).directive("routeChangeResetFooter",[function(){return{restrict:"A",controller:["$element","$rootScope",function(e,t){t.$on("$routeChangeStart",function(){e.find(".language-switch").removeClass("active")})}]}}]).directive("setBuyBtnText",[function(){return{restrict:"A",controller:["$element","$location",function(e,t){}]}}]).directive("copyrightYear",[function(){return{restrict:"A",link:function(e,t,o,n){var a=new Date,i=(a.getFullYear(),a.getMonth()+1,2016);$(t).html(i)}}}]).directive("mobileDevice",["Utils",function(e){return{restrict:"A",link:function(t,o,n,a){var i="";if(e.isMobile()){var r=navigator.userAgent.toLowerCase(),s="iphone os"==r.match(/iphone os/i),l="android"==r.match(/android/i);s?i="device-iphone":l&&(i="device-android"),$(o).addClass(i),$("body").addClass(i)}}}}]),appsControllers.controller("MainCtrl",["$scope","$rootScope","$http","$timeout","$location","$window","Account","Message","BaseInfo","Utils","StoreConfig","Topbar","CartCollection","CartService",function(e,t,o,n,a,i,r,s,l,c,u,d,p,m){$(window).on("message",function(e){s.handler(e)}),t.$on("login",function(e,t){if(t&&angular.isObject(t))switch(t.name){case"cart":window.location.reload()}}),t.$on("dialogClose",function(e,t){if(t&&angular.isObject(t))switch(t.name){case"cart":a.path("/");break;case"normal":}}),l.update(),e.login=function(){l.update().then(function(e){t.isLoggedIn=!0},function(e){r.login()})},e.logout=function(){r.logout()},e.register=function(){r.register()};var g=$(".language-switch");e.changeLan=function(){g.toggleClass("active")},e.changeLangCookies=c.changeLangCookies,e.mainConfig=u,d.init({nextShow:!0,topbarIsStore:!0}),t.isMobile&&"cn"==t.lang&&(e.render=function(){var e=p.CartCollection.all(),o=m.countCart(),n=[],a=0,i=0,r=0;e&&e.length>0&&angular.forEach(e,function(e,t){e.isSell&&(n.push(e),a+=e.num,i+=e.subtotal,e.isMobile&&e.isAccident&&(n.push(e.accident),a+=e.num,i+=e.accident.price*e.num),e.isMobile&&e.isDelay&&(n.push(e.delay),a+=e.num,i+=e.delay.price*e.num),e.isDiscount&&(r+=e.num))});var s=u.goodsDiscount.cover;if(u.useGoodsDiscount&&r>=s.num){var l=s.discount*Math.floor(r/s.num);i-=l}e.length||(a=o.num),t.mobileTopCartNum=a},n(function(){e.render()},300),t.$on("cart",function(t,o){if(o&&angular.isObject(o))switch(o.name){case"changeCart":case"removeSingleCart":n(function(){e.render()},500)}})),e.initBrowser=function(){$("body").toggleClass("browser-windows",u.config.isWindows)},t.isMobile||e.initBrowser()}]),appsControllers.controller("HomeCtrl",["$rootScope","$scope","Utils",function(e,t,o){"jp"==e.lang?o.setTitle("Smartisan Technology"):o.setTitle("en"==e.lang?"Smartisan":"锤子科技官网"),$(".header-sub .breadcrumb").addClass("hide"),o.setCrumbs([{title:""}]),$(".header").addClass("header-t2"),$(".header").addClass("header-t2-black"),o.isMobile()&&$(".header-sub").addClass("header-dark"),e.currentPage="home",o.setHeaderActive("index")}]),appsControllers.controller("ErrorCtrl",["$scope","$timeout","Utils","$routeParams","$rootScope",function(e,t,o,n,a){function i(){if(e.errorId){if(e.second-=1,0==e.second){var o="";("en"==a.lang||"jp"==a.lang)&&(o=a.lang+"/"),location.href="http://www.smartisan.com/"+o}c=t(i,1e3)}}$(".header").removeClass("header-t2"),$(".header").removeClass("header-t2-black"),$(".header-sub").removeClass("header-dark");var r={cn:{"40x":"抱歉，您输入的地址有误，请稍后再试。","50x":"抱歉，服务器内部错误，请稍后再试。",503:"抱歉，服务器忙碌，请稍后再试。",errorTitle:"注意",title:"锤子科技官网",crumbs:"首页"},jp:{"40x":"申し訳ありません。このページは表示できません。時間を置いて再接続しください。","50x":"申し訳ありません。サーバーエラーです。時間を置いて再接続しください。",503:"申し訳ありません。アクセスが集中しているため、つながりにくくなっております。時間を置いて再接続しください。",errorTitle:"通知",title:"スマーティザンテクノロジーオフィシャルサイト",crumbs:"ホームページ"},en:{"40x":"The page you are looking for can not be found.","50x":"The page you are looking for can not be found.",503:"The page you are looking for can not be found.",errorTitle:"Notice",title:"Smartisan",crumbs:"Index"}},s=function(e){var t={errorId:404,errorStatus:r[a.lang]["40x"]};switch(e){case"402":t.errorStatus=r[a.lang]["40x"],t.errorId=402;break;case"403":t.errorStatus=r[a.lang]["40x"],t.errorId=403;break;case"404":t.errorStatus=r[a.lang]["40x"],t.errorId=404;break;case"500":t.errorStatus=r[a.lang]["50x"],t.errorId=500;break;case"502":t.errorStatus=r[a.lang]["50x"],t.errorId=502;break;case"503":t.errorStatus=r[a.lang][503],t.errorId=503;break;default:t.errorStatus=r[a.lang]["40x"],t.errorId=404}return t},l=n.id;e.errorId=s(l).errorId,e.errorStatus=s(l).errorStatus,e.errorTitle=r[a.lang].errorTitle,e.second=10,o.setTitle(r[a.lang].title),o.setCrumbs([{title:r[a.lang].crumbs,url:"#/home"},{title:e.errorId}]);var c;i(),e.$on("$locationChangeStart",function(){t.cancel(c)}),$(".page-loading").hide()}]),appsControllers.controller("StoreCtrl",["$rootScope","$scope","Utils","smartisan","recommend",function(e,t,o,n,a){if(o.setTitle("官方在线商城","Smartisan"),o.setCrumbs([{title:""}]),t.smartisan=n,t.recommend=a,e.currentPage="home",o.setHeaderActive("index"),t.$on("$viewContentLoaded",function(e){if(o.isMobile()){var t=$(".loop-banner").carousel({slideName:".loop-banner-list",slideBtnsName:"",timeout:5e3});t.doCarousel()}else{var t=$(".banner-3d").carousel({slideName:".banner-3d-slides",slideBtnsName:".banner-3d-buttons",maskName:".banner-3d-mask",timeout:5e3});$(".banner-3d").banner3D({enter3d:function(){t.exitCarousel()},exit3d:function(){t.doCarousel()}});t.doCarousel()}}),t.$on("$locationChangeStart",function(){$(".privacy .guardianship").length>0&&$(".privacy .guardianship").remove()}),"cn"===e.lang&&!e.isMobile){var i=$(".copyright .privacy"),r=$(".privacy .guardianship");if(i.length>0&&0===r.length){var s=$('<li class="guardianship"><a href="http://www.smartisan.com/apps/guardianship.html">家长监护工程</a></li>');i.append(s)}}}]),appsControllers.controller("CategoryCtrl",["$rootScope","$scope","$timeout","Utils","$location","goodsList","CategoryService","Topbar","displayType","StorageService","PagingService","StoreConfig","Config",function(e,t,o,n,a,i,r,s,l,c,u,d,p){t.getParams=function(){t.categoryID=a.search().id,t.sortType=a.search().sort||"sort",t.page=a.search().page||1,e.currentPage=t.categoryID},t.getParams(),t.displayType=l,t.$on("$locationChangeStart",function(e,o,n){t.getParams(),t.pcRender()}),n.setTitle("精选配件","Smartisan"),t.goodsList=i,t.maxPageCount=t.goodsList.page_count,t.curCategory=_.findWhere(r.cacheCategoryList,{id:t.categoryID})||{name:"全部商品"},s.set({titleLabel:t.curCategory.name}),o(function(){u.set({href:"#/category/?id="+t.categoryID+"&sort="+t.sortType+"&page=",goodsCount:t.goodsList.count,pageCount:t.maxPageCount,curPage:t.page})},50),t.gortSort=function(e){"price"==e&&(e="price_low","price_low"==t.sortType&&(e="price_high")),a.search("sort",e),a.search("page",1)},t.pcRender=function(){u.set({href:"#/category/?id="+t.categoryID+"&sort="+t.sortType+"&page=",goodsCount:t.goodsList.count,pageCount:t.maxPageCount,curPage:t.page}),t.isLoading=!1,$("html,body").scrollTop(0),e.isMobile&&t.bindLoading(),r.getCategory(t.categoryID,t.page,t.sortType).then(function(e){var o,n=0;if(t.page<1||e.page_count<t.page)return a.path("/error/404"),!1;if(e.list)for(;o=e.list.length,o>n;++n)e.list[n].shop_info&&(e.list[n].shop_info.image=p.imgUrl+e.list[n].shop_info.images[0]),!e.list[n].placeholder&&e.list[n].product_info.is_mobile&&(e.list[n].shop_info.title.split("坚果").length>1?e.list[n].shop_info.targetUrl="/jianguo":e.list[n].shop_info.title.split("T1").length>1?e.list[n].shop_info.targetUrl="/t1":e.list[n].shop_info.targetUrl="/t2");t.goodsList.list=e.list})},t.toggleDisplayOption=function(){t.displayType=3-t.displayType,c.set("categoryDisplay",t.displayType)},t.scrollFuc=function(){if(!t.isLoading){var e=$(window).height(),o=$(window).scrollTop(),n=$(document).height(),a=e+o-(n-150);a>=0&&t.appendGoodsByPage()}},e.isMobile&&(t.isLoading=!1,t.bindLoading=function(){t.maxPageCount<t.page||($(window).off("scroll",t.scrollFuc),$(window).scroll(t.scrollFuc))},t.appendGoodsByPage=function(){var e,o=0;t.isLoading=!0,t.page<t.maxPageCount&&(t.page++,r.getCategory(t.categoryID,t.page,t.sortType).then(function(n){if(t.maxPageCount=n.page_count,t.canLoading=t.maxPageCount>t.page,n.list)for(;e=n.list.length,e>o;++o)n.list[o].shop_info&&(n.list[o].shop_info.image=p.imgUrl+n.list[o].shop_info.images[0]);t.goodsList.list=t.goodsList.list.concat(n.list),t.isLoading=!1,t.page>=t.maxPageCount&&$(window).off("scroll")}))},t.bindLoading())}]),appsControllers.controller("ItemCtrl",["$rootScope","$scope","$timeout","$filter","Utils","StoreConfig","Config","$location","CategoryService","$routeParams","DialogService","CartService","OrderService","PullPlugin","Topbar","AddCartAnimation",function(e,t,o,n,a,i,r,s,l,c,u,d,p,m,g,f){t.sku=null,a.setTitle("精选配件","Smartisan"),g.set({isBar:!0,prevShow:!0,prevLabel:"返回",prevIsBack:!0}),t.itemId=c.id||0,t.postageTerm=i.postageTerm,t.cartConfig={el:$(".store-content"),useData:!1,canDelete:!1,customClass:"item-num",callback:function(e,t,o){}},t.render=function(o){o&&(t.itemId=o),$(window).scrollTop()>30&&$("html,body").scrollTop(0);var n=$(".store-content");t.$el=$(".store-content"),l.getSku(t.itemId).then(function(o){var i=!0,s=o.spu.shop_info.tpl_id||"",c=o.shop_info.images,u="",d=[],p=[];t.sku=o,t.sku.product_info.num||(t.sku.product_info.num=1),_.indexOf(s.split(","),"base")>=0&&(u=o.spu.shop_info.tpl_content.base.images[r.getDPR()]),_.indexOf(s.split(","),"doodle")>=0&&(u=o.spu.shop_info.tpl_content.doodle.images[r.getDPR()]),$.each(c,function(e,t){d[e]=r.imgUrl+t}),$.each(u,function(e,t){p[e]=r.imgUrl+t}),o.shop_info.images=d,o.spu.shop_info.tpl_content.list=p,a.setTitle(t.sku.name,"Smartisan");var m=l.getSpecList(t.sku.spu.shop_info.spec_v2,t.sku.sku_list,t.sku.id);$.each(m,function(e,o){t.sku.is_doodle&&"颜色"==o.name&&(i=!1)}),i&&(t.specData=m),t.scrollFixedNav(),e.isMobile&&(t.$gallery=n.find(".m-page-item-gallery"),t.$detail=n.find(".m-page-item-detail"),t.$more=n.find(".touch-more"))},function(e){s.url("/error/404")})},t.render(),e.isMobile&&m.bindPull({domWrapper:t.$el,swipeWrapper:t.$el.find(".m-page-item-gallery"),enableUp:!1,enableDown:!0,loadingClass:"swiping",swipeUpCallback:function(){},swipeDownCallback:function(){t.$detail.is(":visible")||(t.$el.addClass("m-page-item-show-all"),t.$detail.fadeIn(),$("html,body").scrollTop(t.$detail.offset().top-95))}}),t.addCart=function(o){var a=$(".store-content"),r=a.find(".cart-tip-diag"),s=$(o.currentTarget);if(s.hasClass("disabled-btn")||s.hasClass("m-disabled-btn"))return!1;var l=parseInt(a.find(".js-select-quantity .num input").val(),10);return t.sku.shop_info.limit_num<l?void u.setContent("dialog",{message:"您购买的产品超出数量上限，请重新选择。",dialogClass:"module-dialog-confirm"}).open("dialog"):void(i.csstransitions&&f.getIsRunnng()||(e.$emit("cart",{name:"addCartInAnimation",sku:t.sku.id}),f.init(s,n("realImage")(t.sku.shop_info.images[0],"60")),d.addCart({sku:t.sku.id,num:l}).then(function(t){t?e.isMobile?(u.setContent("dialog",{message:"已添加至购物车",dialogClass:"module-dialog-confirm"}),u.open("dialog")):a.find(".fixed-nav").is(":visible")?(r.removeClass("absolute").addClass("fixed"),r.stop(!0,!1).fadeIn({duration:100})):i.csstransitions?f.start():(r.removeClass("fixed").addClass("absolute"),r.stop(!0,!1).fadeIn({duration:100})):(u.setContent("dialog",{message:"此商品已下架或暂无库存",dialogClass:"module-dialog-confirm"}),u.open("dialog"))},function(e){})))},t.hideCartTipDiag=function(){var e=$(".store-content"),t=e.find(".cart-tip-diag");t.is(":visible")&&t.stop(!0,!1).fadeOut({duration:100})},t.jumpToCart=function(){location.href="#/cart"},t.chooseParams=function(e){var o,n=$(e.currentTarget),a={},i=t.sku.sku_list,r="";if(!n.hasClass("cur")&&!n.hasClass("soldout")){n.toggleClass("cur",!0).siblings().toggleClass("cur",!1),o=t.sku.id,i=t.sku.sku_list;var s={key:n.data("name"),val:n.data("value")};a=l.getCurrentSku(i,o),r=l.getUpdateSkuID(i,a,s.key,s.val),r&&t.navigateToSku(r)}},t.navigateToSku=function(e){s.path("/item/"+e)},t.addCustomize=function(){var o=$(".store-content");u.setContent("dialog",{dialogClass:"module-dialog-item-warning",message:'<p class="text-left">这款背壳已经售完，但你仍可以追加定制此背壳。</p><p class="text-left">1. 追加定制的发货周期在 2 周 ~ 3 周;</p><p class="text-left">2. 追加定制的价格会比原价高 20%。</p>'}).open("dialog",function(){var n={carts:[],isDoodle:!0},a=parseInt(o.find(".js-select-quantity .num input").val(),10);n.carts.push({id:t.sku.sku,num:a}),e.isLoggedIn&&p.createTempOrder(n).then(function(e){location.href="http://store.smartisan.com/#checkout/"+e.id}),u.close()})},t.preNextThumbnail=function(o){var n=$(".store-content"),a=e.isMobile?n.find(".thumb"):n.find(".thumbnail"),i=a.find("li").length-1,r=a.find("li.on").index();switch(o){case"pre":r>0?t.activeThumbnail(r-1):t.activeThumbnail(i);break;case"next":i>r?t.activeThumbnail(r+1):t.activeThumbnail(0)}},t.activeThumbnail=function(t){var o=$(".store-content"),n=o.find(".thumb"),a=o.find(".thumbnail");e.isMobile?n.find("li").removeClass("on").eq(t).addClass("on"):(n.find("li").eq(t).stop(!0,!1).animate({opacity:1},300).show().siblings().stop(!0,!1).animate({opacity:0},300).hide(),a.find("li").removeClass("on").eq(t).addClass("on"))},t.scrollFixedNav=function(e){var o=$(".store-content"),n=0,a=[],i=$(".fixed-nav");$(window).scroll(function(){t.hideCartTipDiag(),n=$(this).scrollTop(),o.find(".item-params-box .anchor-to").each(function(e,t){a[e]=$(t).offset().top-80}),n>a[0]?i.stop(!0,!1).animate({opacity:1},100).show():i.stop(!0,!1).animate({opacity:0},100,function(){i.hide()})})},t.bindSwipeUp=function(){$(".store-content");if(e.isMobile){var o=$(window).height(),n=$(window).scrollTop(),a=$(document).height(),i=o+n-a;i>=-5&t.$gallery.is(":visible")&&($(window).scrollTop(0),t.$gallery.fadeOut(),t.$detail.fadeIn())}},t.bindSwipeDown=function(){$(".store-content");if(e.isMobile){var o=$(window).scrollTop();0===o&t.$detail.is(":visible")&&($(window).scrollTop(0),t.$detail.fadeOut(),t.$gallery.fadeIn())}},t.touchMore=function(){t.$detail.is(":visible")||(t.$el.addClass("page-item-show-all"),t.$more.hide(),t.$detail.fadeIn(),$("html,body").scrollTop(t.$detail.offset().top-95))}}]),appsControllers.controller("JianguoCtrl",["$timeout","$rootScope","$scope","Utils","$location","pageParams","specMap","StoreConfig","NutsService","MobileGoodsService","curMobile","StorePv","MobileService","Topbar",function(e,t,o,n,a,i,r,s,l,c,u,d,p,m){o.categoryID=a.search().id,o.sortType=a.search().sort||"sort",o.page=a.search().page||1,n.setTitle("坚果手机","Smartisan"),m.set({titleLabel:"坚果手机",isBar:!0,prevShow:!0,prevLabel:"返回",prevIsBack:!0}),o.pageParams=i,o.specMap=r,o.curMobile=o.pageParams.curMobile,o.resetMobile=o.curMobile?{edition:o.curMobile.edition,version:o.curMobile.version,color:o.curMobile.color,capacity:o.curMobile.capacity}:{},o.subTotalObj={total:0,cost:0},o.chooseMobile=function(){var e=l.getNutsParams(o.resetMobile.version,o.resetMobile);o.pageParams.color=e.color,o.pageParams.capacity=e.capacity,o.subTotal()},o.subTotal=function(){var e={};e={edition:o.resetMobile.edition,version:o.resetMobile.version,color:o.resetMobile.color,capacity:o.resetMobile.capacity};var t=_.where(c.mapPhones,e),n={};1==t.length&&o.resetMobile.capacity?n=t[0]:o.resetMobile.color&&o.resetMobile.capacity&&(delete o.resetMobile.color,delete o.resetMobile.capacity),o.curMobile=$.extend(o.resetMobile,n,l.mapStock[n.sku]);var a=0|o.curMobile.price,i=0==a?0:a+200;o.subTotalObj={total:a,cost:i}},o.checkRadio=function(e,t,n){var a=$(e.currentTarget);$(e.target);if(!a.hasClass("disabled"))switch(t){case"edition":o.chooseEdition(n);break;case"version":o.chooseVersion(n);break;case"color":o.chooseColor(n);break;case"capacity":o.chooseCapacity(n)}},o.chooseEdition=function(e){var t=$(".store-content"),n={};o.resetMobile.edition=e,o.resetMobile.version?(n.version=o.resetMobile.version,n=o.pageParams.defChooseMobileData[e][n.version]):o.pageParams.defChooseMobileData[e].hasStock&&(n=o.pageParams.defChooseMobileData[e].hasStock),n?o.resetMobile=$.extend({},n):o.resetMobile=$.extend({},{edition:e,version:o.resetMobile.version}),o.imageLoopView.exitCarousel();var a=t.find('.js-loop-item[data-version="'+o.resetMobile.version+'"]'),i=0;a=o.resetMobile.color?a.filter('[data-color="'+o.resetMobile.color+'"]'):a.first(),
i=a.index(),o.chooseParametersImage(a.data("color")),o.imageLoopView.loopUpdate(i),o.imageLoopView.toggleSwitchClass(),o.chooseMobile()},o.chooseVersion=function(e){var t=$(".store-content"),n={};n=o.resetMobile.edition?o.pageParams.defChooseMobileData[o.resetMobile.edition][e]:o.pageParams.defChooseMobileData.netcom[e]||o.pageParams.defChooseMobileData.all[e],n?o.resetMobile=$.extend({},n):o.resetMobile=$.extend({},{edition:o.resetMobile.edition,version:e}),o.imageLoopView.exitCarousel();var a=t.find('.js-loop-item[data-version="'+e+'"]'),i=0;a=o.resetMobile.color?a.filter('[data-color="'+o.resetMobile.color+'"]'):a.first(),i=a.index(),o.chooseParametersImage(a.data("color")),o.imageLoopView.loopUpdate(i),o.imageLoopView.toggleSwitchClass(),o.chooseMobile()},o.chooseColor=function(e){var t=$(".store-content"),n={};if(e==t.find(".js-loop-item.selected").data("color")&&o.curMobile.color==e)return!1;n=$.extend({},{edition:o.resetMobile.edition,version:o.resetMobile.version,color:e});var a,i=_.where(c.mapPhones,n);i.length&&$.each(i,function(e,t){t.stock&&(a=t.capacity,o.resetMobile.capacity&&(n.capacity=o.resetMobile.capacity))}),!n.capacity&&a&&(n.capacity=a),o.resetMobile=$.extend({},n),o.chooseParametersImage(e);var r=t.find('.js-loop-item[data-color="'+e+'"]'),s=r.index();e!=t.find(".js-loop-item.selected").data("color")&&o.imageLoopView.toggleSwitchClass(),o.imageLoopView.loopUpdate(s),o.chooseMobile()},o.chooseCapacity=function(e){e=e||o.pageParams.curMobile.capacity;var t={};t=$.extend({},{edition:o.curMobile.edition,version:o.curMobile.version,color:o.curMobile.color,capacity:e}),o.resetMobile=$.extend({},t),o.chooseMobile()},o.chooseParametersImage=function(e){var t=$(".store-content");t.find(".js-parameters-size-color").removeClass().addClass("mobile-size js-parameters-size-color "+e),t.find(".js-parameters-keysPorts").removeClass().addClass("spec-parameters-detail spec-parameters-keysPorts js-parameters-keysPorts "+e)};var g=function(){var e=$(".store-content");if(s.isMobile)return!1;var t=e.find(".js-checkout-panel"),o=$(".footer").offset().top,n=$(window).height();t.toggleClass("checkout-fix-panel-follow",o>=n),$(window).on("resize, scroll",function(){var e=$(window).height(),n=$(this).scrollTop();t.toggleClass("checkout-fix-panel-follow",o>=n+e)})};o.LoopView=function(){var e=$(".store-content"),t=function(t){e.find(".js-loop-item").eq(t).addClass("selected").siblings("li").removeClass("selected")},o=function(){s.config.isIE?(e.find(".js-loop-list").toggleClass("switch",!1),setTimeout(function(){e.find(".js-loop-list").toggleClass("switch",!0)},0)):e.find(".js-loop-list").toggleClass("switch",!1).show().delay(0).toggleClass("switch",!0)};return{loopUpdate:t,toggleSwitchClass:o}},o.checkout=function(e){if(o.curMobile){var t=$(e.currentTarget),n=(o.pageParams.activity,_.where(c.mapPhones,{sku:o.curMobile.sku})),i={};t.hasClass("disabled-btn")||1!=n.length||(n=n[0],i={mobile_id:n.sku,pay_type:2,mobileData:n},d.SMpvEvent("坚果","现在购买"),a.url("/accessories?"+p.parseTempOrderParams(i)))}},e(function(){g(),o.imageLoopView=$(".js-nuts-image-panel").carousel({slideName:".js-loop-list",slideBtnsName:"",timeout:3e3}),o.imageLoopView.doCarousel(),o.curMobile&&(o.imageLoopView.exitCarousel(),o.chooseColor(o.curMobile.color),o.chooseCapacity(o.curMobile.capacity),o.chooseMobile())},500)}]),appsControllers.controller("AccessoriesCtrl",["$rootScope","$scope","$location","$timeout","StoreConfig","Utils","pageData","$routeParams","StorageService","MobileGoodsService","MobileFittingService","StorePv","CartService","MobileService","DialogService","Topbar","$filter","BaseInfo","Account",function(e,t,o,n,a,i,r,s,l,c,u,d,p,m,g,f,h,v,b){t.warrantys=r.warrantys,t.titleLabel=r.titleLabel,t.mobileVersion=r.mobileVersion,t.goodsStock1=r.goodsStock,t.goodsStock1.then(function(e){t.goodsStock=e,t.goodsStock&&angular.isObject(t.goodsStock)&&(t.goodsStock.cover&&angular.forEach(t.goodsStock.cover.listData,function(e,t){e.value=0}),t.goodsStock.headset&&(angular.forEach(t.goodsStock.headset.listData.three,function(e,t){e.value=0}),angular.forEach(t.goodsStock.headset.listData.bass,function(e,t){e.value=0})))},function(e){}),i.setTitle(t.titleLabel,"Smartisan"),f.set({titleLabel:t.titleLabel,isBar:!0,prevShow:!0,prevLabel:"返回",prevIsBack:!0,nextShow:!1}),t.order=r.order,t.order.discount_amount=parseInt(t.order.discount_amount),t.mobileName=r.mobileName,t.mapCovers=c.mapCovers,t.mapHeadset=c.mapHeadset,t.cartTotal=h("decimal")(t.order.amountTotal,e.isMobile),t.cartCostTotal=h("decimal")(t.order.amountTotal,e.isMobile),t.discountTotalNum=t.order.discount_amount,t.discountTotal=h("rmb")(t.order.discount_amount,e.isMobile),t.cartCoverList=[],t.cartHeadsetList=[],t.allAccessoriesNum={},t.discountNum=0,t.getAllNum=function(){var e=$(".store-content"),t={};return e.find(".js-select-quantity").each(function(){var e=$(this);t[e.data("id")]={num:e.find("input").val()}}),t},t.cartQuantityConfig={el:$(".store-content"),useData:!0,canDelete:!0,callback:function(e,o,i){if(a.isMobile){var r=e.closest(".js-select-quantity");r.toggleClass("select-open",i>0);var s=e.closest("li"),l=0|o;0==i?(t.mapCovers[l]&&t.removeCoverCart(s),t.mapHeadset[l]&&t.removeHeadsetCart(s)):(t.mapCovers[l]&&t.addCoverToCart(null,l,i),t.mapHeadset[l]&&t.addHeadsetToCart(null,l,i))}else if(0==i){var s=e.closest("li"),l=s.data("accessories");t.mapCovers[l]&&t.removeCoverCart(s),t.mapHeadset[l]&&t.removeHeadsetCart(s)}else n(function(){t.countTotal()},50)}},t.order.stepFitting?n(function(){t.curCoverData=t.goodsStock.cover&&t.goodsStock.cover.curData||{},t.curHeadsetData=t.goodsStock.headset&&t.goodsStock.headset.curData||{};var o=$(".store-content");t.goodsStock.cover.checked=0,t.coverConfig={normalClass:e.isMobile?"m-blue-radio":"blue-radio",parentEl:"li",callback:function(e,n,a,i){i=0|i,t.goodsStock.cover.checked=0!=i,i?(o.find(".js-choose-color").children("li").each(function(){$(this).toggleClass("disabled",!$(this).data("stock"))}),t.chooseColor(t.curCoverData.sku)):(o.find(".js-choose-color").children("li").toggleClass("selected",!1).toggleClass("disabled",!0),t.emptyCoverCart())}},t.goodsStock.headset.checked=0,t.headsetConfig={normalClass:e.isMobile?"m-blue-radio":"blue-radio",parentEl:"li",callback:function(e,n,a,i){if(t.goodsStock.headset.checked=i,"0"!=i){o.find(".js-choose-headset").children("li").each(function(){$(this).toggleClass("disabled",!$(this).data("stock"))});var r=null;if(i!=t.curHeadsetData.version&&t.goodsStock.headset.listData[i].length>0)for(var s=t.goodsStock.headset.listData[i],l=0;l<s.length;l++){var c=s[l];if(c.stock===!0){r=c.sku;break}}else r=t.curHeadsetData.sku;r&&t.chooseHeadsetColor(r)}else o.find(".js-choose-headset").children("li").toggleClass("selected",!1).toggleClass("disabled",!0),t.emptyHeadsetCart();t.countTotal()}}},350):($.each(t.warrantys,function(e,o){t.warrantys[e].checked=0}),t.warrantyConfig={normalClass:e.isMobile?"m-blue-radio":"blue-radio",parentEl:"li",callback:function(e,o,n,a){a=0|a;var i=_.findIndex(t.warrantys,{sku:0|o});t.warrantys[i].checked=0!=a,a?t.addAccessories(t.warrantys[i]):t.removeAccessories(t.warrantys[i]),t.countTotal()}}),t.cacheHeadsetList={},t.checkRadio=function(e,o,n){var a=$(e.currentTarget);$(e.target);if(!a.hasClass("disabled"))switch(o){case"color":t.chooseColor(n);break;case"headset":var i=t.mapHeadset[n];t.cacheHeadsetList[i.version]=n,t.chooseHeadsetColor(n)}},t.chooseColor=function(e){e=0|e;var o=$(".store-content"),n=o.find(".js-cover-image-list"),a=t.mapCovers[e];t.curCoverData=$.extend(!0,{},a),n.find(".selected").toggleClass("selected",!1),n.find("."+a.color).toggleClass("selected",!0)},t.chooseHeadsetColor=function(e){e=0|e;var o=$(".store-content"),n=o.find(".js-headset-image-list"),a=t.mapHeadset[e];t.cacheHeadsetList[a.version]&&(a=t.mapHeadset[t.cacheHeadsetList[a.version]]),t.curHeadsetData=$.extend({},a),n.find(".selected").toggleClass("selected",!1),n.find("."+a.color).toggleClass("selected",!0),$(".js-add-headset-cart-item").toggleClass("disabled-btn",!1)},t.addAccessories=function(e){var o=_.findIndex(t.order.warrantys,{postName:e.postName});0>o&&t.order.warrantys.push(e)},t.removeAccessories=function(e){var o=_.findIndex(t.order.warrantys,{postName:e.postName});o>=0&&(delete t.order[e.postName],t.order.warrantys.splice(o,1))},t.deleteCartItem=function(e){var o=_.findIndex(t.warrantys,{postName:e});t.warrantys[o].checked=0,t.removeAccessories({postName:e}),n(function(){t.countTotal()},50)},t.addCoverToCart=function(e,o,a){$(".store-content");if(angular.isObject(e)){var i=$(e.currentTarget);if(i.hasClass("disabled-btn"))return}else{var r=t.mapCovers[o];t.curCoverData=$.extend(!0,{},r)}var s=_.findIndex(t.cartCoverList,{sku:t.curCoverData.sku});if(t.allAccessoriesNum=angular.extend({},t.getAllNum()),0>s)t.cartCoverList.push(t.curCoverData),t.cartCoverList[t.cartCoverList.length-1].value=1,n(function(){t.cartCoverList[t.cartCoverList.length-1].fadein=!0},50);else{if(angular.isObject(e)){var l=t.cartCoverList[s].value;l++}else var l=a;if(l>10)return void g.setContent("dialog",{message:"已达到可购买的最大数量",dialogClass:"module-dialog-confirm"}).open("dialog");t.cartCoverList[s].value=l}t.countTotal()},t.removeCoverCart=function(e){var o=e.data("accessories"),a=_.findIndex(t.cartCoverList,{sku:o});t.cartCoverList[t.cartCoverList.length-1].fadein=!1,n(function(){t.cartCoverList.splice(a,1),t.countTotal()},300)},t.addHeadsetToCart=function(e,o,a){$(".store-content");if(angular.isObject(e)){var i=$(e.currentTarget);if(i.hasClass("disabled-btn"))return}else{var r=t.mapHeadset[o];t.curHeadsetData=$.extend(!0,{},r)}var s=($(".store-content"),_.findIndex(t.cartHeadsetList,{sku:t.curHeadsetData.sku}));if(t.allAccessoriesNum=angular.extend({},t.getAllNum()),0>s)t.cartHeadsetList.push(t.curHeadsetData),t.cartHeadsetList[t.cartHeadsetList.length-1].value=1,n(function(){t.cartHeadsetList[t.cartHeadsetList.length-1].fadein=!0},50);else{if(angular.isObject(e)){var l=t.cartHeadsetList[s].value;l++}else var l=a;if(l>10)return void g.setContent("dialog",{message:"已达到可购买的最大数量",dialogClass:"module-dialog-confirm"}).open("dialog");t.cartHeadsetList[s].value=l}t.countTotal()},t.removeHeadsetCart=function(e){var o=e.data("accessories"),a=_.findIndex(t.cartHeadsetList,{sku:o});t.cartHeadsetList[t.cartHeadsetList.length-1].fadein=!1,n(function(){t.cartHeadsetList.splice(a,1),t.countTotal()},300)},t.emptyCoverCart=function(){t.discountNum=0,t.cartCoverList=[],t.countTotal()},t.emptyHeadsetCart=function(){t.cartHeadsetList=[],t.countTotal()},t.countTotal=function(){var o=0|t.order.total,n=t.order,i=n.mobileData.price;$.each(t.order.warrantys,function(e,t){o+=0|t.price,i+=0|t.price}),t.cartCoverList.length>0&&(t.discountNum=0,angular.forEach(t.cartCoverList,function(e,n){o+=e.price*e.value,i+=e.price*e.value,t.discountNum+=0|e.value})),t.cartHeadsetList.length>0&&angular.forEach(t.cartHeadsetList,function(e,t){o+=e.price*e.value,i+=e.price*e.value});var r=a.goodsDiscount.cover,s=0;if(n.discount_amount&&(s=n.discount_amount),t.order.stepFitting&&t.goodsStock.cover&&t.goodsStock.cover.discountData){var l=Math.floor(t.discountNum/r.num);s+=r.discount*l}o-=s,i-=s,t.cartTotal=h("decimal")(o,e.isMobile),t.discountTotal=h("rmb")(s,e.isMobile),t.discountTotalNum=s,t.cartCostTotal=h("decimal")(i,e.isMobile)},t.bindFixedBar=function(){if(a.isMobile)return!1;var e=t.$el.find(".js-accessories-fixed-panel"),o=t.$el.find(".js-phone-fixed-bar"),n=t.$el.find(".js-phone-fixed-bar-bg"),i=t.$el.find(".js-cart-btn").offset().top-15;$(window).on("scroll",function(){e.toggleClass("hide",$(this).scrollTop()<=i),o.toggleClass("phone-fixed-bar",$(this).scrollTop()>i),n.toggleClass("phone-fixed-bar-bg",$(this).scrollTop()>i)})},t.buyMobile=function(e){var o=$(e.currentTarget);if(o.hasClass("disabled-btn"))return!1;if(t.order.stepFitting){switch(t.order.mobileData.category){case"nuts":d.SMpvEvent("坚果","去结算");break;case"t2":d.SMpvEvent("T2","去结算")}t.checkoutStep()}else{var n=!1;switch(t.order.mobileData.category){case"t1":n=!0;break;case"t2":break;case"nuts":}n?t.checkoutStep():t.coverStep()}},t.coverStep=function(){var e=t.order,n={mobile_id:e.mobileData.sku,fitting:e.mobileData.category};!!e.cdkey_code&&(n.cdkey_code=e.cdkey_code),!!e.discount_amount&&(n.discount_amount=e.discount_amount),$.each(t.warrantys,function(e,o){o.checked&&"-1"!=_.findIndex(t.order.warrantys,{sku:o.sku})&&(n[o.postName]=t.order[o.postName]=o.sku)}),u.getFitting(t.order.mobileData.category,t.mobileVersion).then(function(e){var a=e.fittingStock;if(a){switch(t.order.mobileData.category){case"nuts":d.SMpvEvent("坚果","下一步");break;case"t2":d.SMpvEvent("T2","下一步")}o.url("/accessories/?"+m.parseTempOrderParams(n))}else{switch(t.order.mobileData.category){case"nuts":d.SMpvEvent("坚果","去结算");break;case"t2":d.SMpvEvent("T2","去结算")}t.checkoutStep()}})},t.checkoutStep=function(){var n=t.order,a={mobile_id:n.mobileData.sku},i=[],r=[],s={sku:a.mobile_id,num:1,warranty:[]};if(n.safety1&&(s.warranty.push(n.safety1),a.safety1=n.safety1),n.safety2&&(s.warranty.push(n.safety2),a.safety2=n.safety2),s.warranty.length?s.warranty=s.warranty.join(":"):delete s.warranty,r.push(s),!!n.cdkey_code&&(a.cdkey_code=n.cdkey_code),!!n.discount_amount&&(a.discount_amount=n.discount_amount),t.cartCoverList.length>0||t.cartHeadsetList.length){var l=t.getAllNum();$.each(l,function(e,t){0!=t.num&&(r.push({sku:e,num:t.num}),i.push(e+":"+t.num))})}a.goods_infos=i.join(","),a.cdkey_code?(v.update().then(function(t){e.isLoggedIn=!0,e.isMobile?location.href="http://m.store.smartisan.com/#/checkout?"+m.parseTempOrderParams(a,!0):m.completeTempOrder(a).then(function(e){location.href="http://store.smartisan.com/#/checkout/"+e.id})},function(e){b.login()}),e.$on("login",function(t,o){if(o&&angular.isObject(o))switch(o.name){case"accessories":e.isMobile?location.href="http://m.store.smartisan.com/#/checkout?"+m.parseTempOrderParams(a,!0):m.completeTempOrder(a).then(function(e){location.href="http://store.smartisan.com/#/checkout/"+e.id})}})):(p.addCart(r),o.url("/cart"))},n(function(){t.$el=$(".store-content"),t.bindFixedBar()},500),t.wapOpenChooseFitting=function(e){var t=$(e.currentTarget);t.closest(".js-wap-fitting-operation-section").toggleClass("wap-cover-operation-section-choose",!0)}}]),appsControllers.controller("CartCtrl",["$rootScope","$scope","StoreConfig","Utils","$location","carts","$timeout","CartCollection","MobileGoodsService","CartService","$filter","DialogService","BaseInfo","OrderService","CartWarrantyDialogService","Topbar","$route","MobileService",function(e,t,o,n,a,i,r,s,l,c,u,d,p,m,g,f,h,v){n.setTitle("我的购物车","Smartisan"),f.set({titleLabel:"购物车",isBar:!0,prevShow:!0,prevLabel:"返回",prevIsBack:!0,nextShow:!1}),t.discountGoods=l.mapCovers,t.collection=s.CartCollection,t.discountTotal=0,t.discountTotalNumeral=0,t.cartTotal=0,t.allCartChecked={},t.carts=angular.extend({isEmpty:!0},e.isLoggedIn?i:{}),t.getAllNum=function(){var e=$(".store-content"),t={};return e.find(".js-select-quantity").each(function(){var e=$(this);t[e.data("id")]={num:e.find("input").val()}}),t},t.cartQuantityConfig={el:$(".store-content"),useData:!0,canDelete:e.isMobile,callback:function(e,o,n){var a=e.closest(".js-cart-items"),i=a.data("id"),r=s.CartCollection.get({id:i});0==n?t.removeCart(null,r):(c.updateCart({sku:i,num:n}),t.countTotal())}},t.checkboxConfig={el:$(".store-content"),normalClass:e.isMobile?"m-red-checkbox":"blue-checkbox",callback:function(e,o,n){o=$.trim(o);var a=_.findIndex(t.carts.mobileList,{sku:o});a>=0&&(t.carts.mobileList[a].warrantyList=t.updateWarranty(t.carts.mobileList[a],n)),r(function(){t.countTotal()},50)}},t.checkboxConfigTmp={el:$(".store-content"),parentEl:"div.js-agree-label",normalClass:e.isMobile?"m-red-checkbox":"blue-checkbox",callback:function(e,o,n){var a=_.findIndex(t.carts.mobileList,{sku:o});a>=0&&(t.carts.mobileList[a].warrantyList=t.updateWarranty(t.carts.mobileList[a]))}},t.checkboxConfigAll={el:$(".store-content"),parentEl:"div.js-choose-all",normalClass:e.isMobile?"m-red-checkbox":"blue-checkbox",callback:function(e,o,n){o=$.trim(o),"all"==o&&(t.chooseAll(n),t.updateAllWarrantys()),r(function(){t.countTotal()},50)}},t.updateWarranty=function(e,t){if(!e.isSell||e.isOut)return!1;var o=[],t="undefined"!=typeof t?t:e.checked,n=e.isAccident?angular.extend({},e.accident,{disabled:!0,checked:t,isAccident:e.isAccident,isDelay:2},{num:e.num,subtotal:e.accident.price*e.num}):angular.extend({isAccident:!1},e.accident),a=e.isDelay?angular.extend({},e.delay,{disabled:!0,checked:t,isAccident:2,isDelay:e.isDelay},{num:e.num,subtotal:e.delay.price*e.num}):angular.extend({isDelay:!1},e.delay);return o.push(n),o.push(a),e.isDelay&&!e.isAccident&&o.reverse(),o},t.chooseAll=function(e){e="undefined"!=typeof e?e:!e,angular.forEach(t.carts.mobileList,function(t,o){t.checked=e}),angular.forEach(t.carts.discountList,function(t,o){t.checked=e}),angular.forEach(t.carts.sellList,function(t,o){t.checked=e}),t.allCartChecked.checked=e},t.updateAllWarrantys=function(){angular.forEach(t.carts.mobileList,function(e,o){e.warrantyList=t.updateWarranty(e)})},t.render=function(){var e=$(".store-content");t.$cartBox=e.find(".gray-box:first"),t.$fix=e.find(".cart-bottom-bg"),t.$cartInner=e.find(".box-inner:first"),r(function(){t.chooseAll(!0),t.updateAllWarrantys(),t.countTotal(),r(function(){t.scrollFixCount()},30)},50)},t.$on("$viewContentLoaded",function(e){t.render()},50),$(window).on("scroll resize",function(){t.scrollFixCount()}),t.scrollFixCount=function(){if(!e.isMobile&&t.$cartBox&&t.$cartBox.length>0){var o=$(window).scrollTop()+$(window).height(),n=t.$cartBox.offset().top+t.$cartBox.height(),a=t.$cartBox.height()-315,i=0;t.collection.length>1&&n>o&&(i=n-o-1,i=Math.min(i,a)),t.$fix.css("bottom",i)}},t.addWarranty=function(e){var o=$(e.currentTarget),n=o.data("id"),a=o.data("mobile"),i=s.CartCollection.get({id:a});i&&(t.tmpWarranty=l.mapWarrantys[n],t.tmpWarranty.checked=!1,t.tmpWarranty.doneCallback=function(e){var o=$(e.currentTarget);if(o.hasClass("disabled-btn"))return!1;var s=i,l={sku:a,num:s.num},u=[];(s.accident.sku==n||s.isAccident)&&u.push(s.accident.sku),(s.delay.sku==n||s.isDelay)&&u.push(s.delay.sku),l.warranty=u.join(":"),c.updateCart(l);var d=_.findIndex(t.carts.mobileList,{sku:a+""});d>=0&&(t.carts.mobileList[d].warrantyList=t.updateWarranty(t.carts.mobileList[d])),r(function(){t.countTotal(),t.scrollFixCount()},50),g.close()},g.setOptions({scope:t}),g.init())},t.mAddWarranty=function(e){var o=$(e.currentTarget),n=o.data("id"),a=o.data("mobile"),i=s.CartCollection.get({id:a});if(i){var l=i,u={sku:a,num:l.num},d=[];(l.accident.sku==n||l.isAccident)&&d.push(l.accident.sku),(l.delay.sku==n||l.isDelay)&&d.push(l.delay.sku),u.warranty=d.join(":"),c.updateCart(u);var p=_.findIndex(t.carts.mobileList,{sku:a+""});p>=0&&(t.carts.mobileList[p].warrantyList=t.updateWarranty(t.carts.mobileList[p]),angular.forEach(t.carts.mobileList[p].warrantyList,function(e,t){e.cartImage=e.image})),r(function(){t.countTotal()},50)}},t.countTotal=function(){var n=$(".store-content"),a=0,i=t.getChooseItem(),r=n.find(".js-goods-discount-info"),s=n.find(".js-delete-choose-goods"),l=t.getAllNum();o.useGoodsDiscount&&($.each(l,function(e,o){t.discountGoods[e]&&a++}),a||r.remove()),s.toggleClass("hide",!i.length);var d=c.countCart(i);return t.toggleDiscountLabel(d.discountGoodsNum),t.carts.canCheckout=n.find(".js-selling-list").length>0,t.discountTotal=u("rmb")(d.discountTotal,!0),t.discountTotalNumeral=d.discountTotal,t.cartTotal=u("rmb")(d.total,!0),n.find(".js-checkout").toggleClass(e.isMobile?"m-disabled-btn":"disabled-btn",!i.length),d},t.toggleDiscountLabel=function(e){$(".store-content");o.useGoodsDiscount&&(t.discountGoodsNum=e)},e.$on("cart",function(e,o){if(o&&angular.isObject(o))switch(o.name){case"removeSingleCart":r(function(){angular.isObject(o.data)&&angular.isObject(o.data.model)&&t.removeItem(o.data.model)},50);break;case"changeCart":}}),t.removeCart=function(e,o){var n;if(n=e?$(e.currentTarget).closest(".js-cart-items"):self.$('.js-cart-items[data-id="'+o.id+'"]'),!n.data("deling")){var a=n.data("id");d.setContent("dialog",{message:"您确认删除该商品吗？",templateObj:null,dialogClass:"module-dialog-confirm",cancelText:"返回",doneText:"是",hasBtn:!0,hasCancel:!0}),r(function(){d.open("dialog",function(){n.data("deling",!0);var e=n.data("mobile"),o=s.CartCollection.get({id:e});if(e&&o&&l.mapWarrantys[a]){var i=o,u={sku:e,num:i.num,warranty:i.warranty?i.warranty+"":null};u.warranty&&(u.warranty=u.warranty.replace(a,"").replace(/^\:|\:$/gi,"")),c.updateCart(u);var p=_.findIndex(t.carts.mobileList,{sku:e+""});p>=0&&(t.carts.mobileList[p].warrantyList=t.updateWarranty(t.carts.mobileList[p])),r(function(){t.countTotal(),t.scrollFixCount()},50)}else c.removeCart(a);d.close()},function(){if(o){var e=$(".store-content"),n=e.find(".js-cart-items[data-id="+o.id+"]"),i=n.find(".js-select-quantity").find("input").val();0==i&&t.setGoodsNum(a,1)}d.close()})},50)}},t.removeItem=function(n){var a=$(".store-content");n=n||{};var i=l.mapPhones,s=a.find(".js-cart-items[data-id="+n.id+"]"),c=s.next(".js-warranty-group"),u=e.isMobile?s.closest(".js-goods-panel"):s.closest(".cart-table");e.isMobile?(s.remove(),(!u.find(".js-cart-items").length||i[n.id]&&!u.hasClass("js-off-list"))&&u.remove(),a.find(".js-cart-items").length||(t.carts.isEmpty=!0,t.$fix.hide()),r(function(){t.countTotal(),t.scrollFixCount()},50)):u.find(".js-cart-items").length>1?(c.length>0&&(s.wrap('<div class="js-del-mobile-wrapper"></div>'),s=s.closest(".js-del-mobile-wrapper"),s.append(c)),n.isDiscount&&1==s.closest(".js-cart-group").find(".js-cart-items").length&&(s=s.closest(".js-cart-group")),o.opacity?s.animate({height:0,opacity:0,padding:0},{duration:500,easing:"easeOutQuart",complete:function(){t.$apply(function(){s.closest(".js-cart-group").find(".js-cart-items").length>1?s.parent().parent().remove():s.closest(".js-cart-group").remove(),u.find(".js-cart-items").length||t.removeItem(),t.countTotal(),t.scrollFixCount()})}}):t.$apply(function(){s.closest(".js-cart-group").find(".js-cart-items").length>1?s.remove():s.closest(".js-cart-group").remove(),t.countTotal(),t.scrollFixCount()})):(1==u.find(".js-cart-items").length||0==u.find(".js-cart-items").length)&&(o.opacity?(t.$cartInner.height(t.$cartInner.height()),t.$cartInner.children().animate({opacity:0},400,function(){t.$cartInner.animate({height:614},200,function(){t.$apply(function(){t.carts.isEmpty=!0})})}),t.$fix.animate({opacity:0},400,function(){$(this).hide()})):(t.carts.isEmpty=!0,t.$fix.hide()))},t.removeChooseCart=function(e){var o=($(".store-content"),t.getChooseItem());d.setContent("dialog",{message:"您确认删除所选中的商品吗？",dialogClass:"module-dialog-confirm",doneText:"是",cancelText:"返回",hasBtn:!0,hasCancel:!0}),r(function(){d.open("dialog",function(){var e=20;angular.forEach(o,function(t,o){r(function(){c.removeCart(t.id)},e),e+=20}),d.close()})},50)},t.getChooseItem=function(){var e=$(".store-content"),o=[],n=[];t.carts.mobileList||(t.carts.mobileList=[]),t.carts.discountList||(t.carts.discountList=[]),t.carts.sellList||(t.carts.sellList=[]);var a=[].concat(t.carts.mobileList,t.carts.discountList,t.carts.sellList);return!a.length,angular.forEach(a,function(t,a){e.find('.js-cart-items[data-id="'+t.sku+'"]').length>=1&&(t.checked?o.push({id:t.sku}):n.push({id:t.sku}))}),t.allCartChecked.checked=0==n.length,o},t.setGoodsNum=function(e,o){angular.forEach(t.carts.mobileList,function(t,n){t.sku==e&&(t.num=o)}),angular.forEach(t.carts.discountList,function(t,n){t.sku==e&&(t.num=o)}),angular.forEach(t.carts.sellList,function(t,n){t.sku==e&&(t.num=o)})},t.createOrder=function(o){var n=$(o.currentTarget);if(n.hasClass("disabled-btn")||n.hasClass("m-disabled-btn"))return!1;var a=t.getChooseItem(),i=l.mapPhones,c=t.getAllNum();if(a.length>0){var u={goods_infos:[],carts:[],mobileGoods:[],isNormal:!0};$.each(a,function(e,t){if(i[t.id]){var o=s.CartCollection.get({id:t.id}),n={id:t.id,num:1,warranty:[]};o.isAccident&&n.warranty.push(o.accident.sku),o.isDelay&&n.warranty.push(o.delay.sku),n.warranty.length?n.warranty=n.warranty.join(":"):delete n.warranty,u.mobileGoods.push(n)}else u.carts.push({id:t.id,num:c[t.id].num}),u.goods_infos.push(t.id+":"+c[t.id].num)}),u.goods_infos=u.goods_infos.join(","),e.isMobile?location.href="http://m.store.smartisan.com/#/checkout?"+v.parseTempOrderParams(u,!0):p.update().then(function(e){m.createTempOrder(u).then(function(e){location.href="http://store.smartisan.com/#/checkout/"+e.id})},function(e){})}else d.setContent("dialog",{message:"请选择需要购买的商品",dialogClass:"module-dialog-confirm",doneText:"确定",hasCancel:!1}),r(function(){d.open("dialog")},50)}}]),appsControllers.controller("CdkeyCtrl",["$rootScope","$scope","Config","StoreConfig","Utils","$timeout","$location","MobileService","MobileGoodsService","StorePv","Topbar",function(e,t,o,n,a,i,r,s,l,c,u){a.setTitle("优先购买通道","Smartisan"),u.set({titleLabel:"优先购买通道"}),t.invalid={},t.util={},t.focus={},t.util.submitted=!1,t.errorMsg="",t.phone=null,t.reloadCaptcha=function(){var e="mobileCode",a=o.storeUrlRest+n.captcha[e],i=+new Date;a=a.replace(/\&*$/gi,""),t.loginCaptchaUrl=a+"&"+i},i(function(){t.reloadCaptcha()},10),t.verifyCode=function(){if(t.util.submitted=!0,!t.form.$invalid){var e={cdkey_code:t.cdkey.cdkeycode,captcha_code:t.cdkey.captcha};s.verifyMobileCdkey(e).then(function(e){var o,n="",a=e.errInfo;if(e.code)a[10014]?(t.invalid.captchaValid=!1,t.focus.captcha=!0,t.reloadCaptcha()):n=a[21003]?"该优先购买码已过期":a[21008]?"该优先购买码被使用":a[21009]?"该产品尚未发布":"该优先购买码无效";else{o=e.data;var i=l.mapPhones[o.pre_goods_id];t.phone={mobile_id:o.pre_goods_id,mobileData:i,cdkey_code:t.cdkey.cdkeycode,name:i.name,codeImage:i.codeImage,discount_amount:o.money,isDisabled:1==o.status}}t.errorMsg=n})}},t.returnVerify=function(){t.errorMsg=""},t.useCode=function(e){return t.phone&&t.phone.isDisabled?!1:void s.createTempOrder(t.phone).then(function(e){var o=l.mapPhones[t.phone.mobile_id];if(o){var n;"t2"==o.category&&(n="T2"),"nuts"==o.category&&(n="坚果"),n&&c.SMpvEvent(n,"现在购买")}r.url("/accessories?"+s.parseTempOrderParams(t.phone))})}}]),appsControllers.controller("T2Ctrl",["$rootScope","$scope","Config","StoreConfig","Utils","$timeout","$location","MobileService","MobileGoodsService","StorePv","Topbar","pageParams","T2Service",function(e,t,o,n,a,i,r,s,l,c,u,d,p){a.setTitle("Smartisan T2","Smartisan"),u.set({titleLabel:"Smartisan T2",isBar:!0,prevShow:!0,prevLabel:"返回",prevIsBack:!0}),t.pageParams=d,t.curMobile=t.pageParams.curMobile,t.subTotalObj={total:0,cost:0},t.resetMobile=t.curMobile?{edition:t.curMobile.edition,version:t.curMobile.version,color:t.curMobile.color,capacity:t.curMobile.capacity}:{},t.chooseMobile=function(){var e=p.getT2Params(t.resetMobile.version,t.resetMobile);t.pageParams.color=e.color,t.pageParams.capacity=e.capacity,t.subTotal()},t.subTotal=function(){var e={};e={edition:t.resetMobile.edition,version:t.resetMobile.version,color:t.resetMobile.color,capacity:t.resetMobile.capacity};var o=_.where(l.mapPhones,e),n={};1==o.length&&t.resetMobile.capacity?n=o[0]:t.resetMobile.color&&t.resetMobile.capacity&&(delete t.resetMobile.color,delete t.resetMobile.capacity),t.curMobile=$.extend(t.resetMobile,n,p.mapStock[n.sku]);var a=0|t.curMobile.price,i=0==a?0:a+200;t.subTotalObj={total:a,cost:i}},t.checkRadio=function(e,o,n){var a=$(e.currentTarget);$(e.target);if(!a.hasClass("disabled"))switch(o){case"capacity":t.chooseCapacity(n)}},t.chooseCapacity=function(e){e=e||t.pageParams.curMobile.capacity;var o={};o=$.extend({},{edition:t.curMobile.edition,version:t.curMobile.version,color:t.curMobile.color,capacity:e}),t.resetMobile=$.extend({},o),t.chooseMobile()},t.chooseParametersImage=function(e){var t=$(".store-content");t.find(".js-parameters-size-color").removeClass().addClass("mobile-size js-parameters-size-color "+e),t.find(".js-parameters-keysPorts").removeClass().addClass("spec-parameters-detail spec-parameters-keysPorts js-parameters-keysPorts "+e)},t.checkout=function(e){if(t.curMobile){var o=$(e.currentTarget),n=(t.pageParams.activity,_.where(l.mapPhones,{sku:t.curMobile.sku})),a={};o.hasClass("disabled-btn")||1!=n.length||(n=n[0],a={mobile_id:n.sku,pay_type:2,mobileData:n},c.SMpvEvent("T2","现在购买"),r.url("/accessories?"+s.parseTempOrderParams(a)))}};var m=function(){var e=$(".store-content");if(n.isMobile)return!1;var t=e.find(".js-checkout-panel"),o=$(".footer").offset().top,a=$(window).height();t.toggleClass("checkout-fix-panel-follow",o>=a),$(window).on("resize, scroll",function(){var e=$(window).height(),n=$(this).scrollTop();t.toggleClass("checkout-fix-panel-follow",o>=n+e)})};t.$on("$viewContentLoaded",function(e){if(t.curMobile&&t.chooseMobile(),!a.isMobile()){var o=$(".js-loop-banner-list").carousel({slideName:".show-loop-list",slideBtnsName:".loop-dot-list",timeout:5e3,isLoopStop:!0});o.doCarousel(),m()}}),t.bindScroll=function(){var e=$(".store-content"),o=e.find(".js-fix-btn-panel");$(window).scroll(function(){t.pageParams.allStock&&o.toggleClass("on",$(window).scrollTop()>155)})},e.isMobile&&t.bindScroll()}]),appsControllers.controller("QinghuaiCtrl",["$rootScope","$scope","$timeout","Utils","Config","Topbar","Cover","ThemeService","CategoryService",function(e,t,o,n,a,i,r,s,l){var c=63;n.setTitle("“情怀”背壳","Smartisan"),i.set({titleLabel:"“情怀”背壳"}),e.currentPage="qinghuai",t.cover={list:s.getCoverData(r.list)},t.curPage=1,t.pageSize=10,t.maxPageCount=r.page_count,t.getDoodlesByPage=function(){t.curPage<t.maxPageCount&&(t.curPage++,l.getCategory(c,t.curPage).then(function(e){var n,i=0;if(e.list)for(;n=e.list.length,n>i;++i)e.list[i].shop_info&&(e.list[i].shop_info.image=a.imgUrl+e.list[i].shop_info.images[0]);var r=s.getCoverData(e.list);return angular.isArray(r)&&angular.forEach(r,function(e,n){e.isHide=!0,t.cover.list.push(e),o(function(){$(".cover-item-"+e.id).fadeIn()},30)}),e}))},$(window).scroll(function(){var e=$(window).height(),o=$(window).scrollTop(),n=$(document).height(),a=$(".footer").height();e+o+a>=n&&t.getDoodlesByPage()})}]),appsServices.factory("PullPlugin",["$rootScope",function(e){function t(){var e=this;e.domConfig={}}return t.prototype.init=function(){},t.prototype.bindPull=function(e){var t=function(e){var t={};return window.navigator.pointerEnabled&&"touch"==e.pointerType||window.navigator.msPointerEnabled&&e.pointerType&&e.pointerType==e.MSPOINTER_TYPE_TOUCH?(t.y=e.pageY,t.x=e.pageX):e.changedTouches&&e.changedTouches.length&&(t.y=e.changedTouches[0].pageY,t.x=e.changedTouches[0].pageX),t},o=this,n={start:0,offset:0},a=$.extend({domWrapper:$(".wrapper"),swipeWrapper:$(".wrapper"),loadingClass:"swiping",swipeMaxHeight:50,swipeUpCallback:null,swipeDownCallback:null},e),i=function(e){var o=e.originalEvent,a=t(o);a.y&&(n.start=a.y)},r=function(e){n.isTop=$(window).scrollTop(),n.isBottom=$(window).scrollTop()+$(window).height()-$(document).height();var o,i=e.originalEvent,r=t(i);r.y&&(n.offset=r.y-n.start,o=Math.round(n.offset/3),a.enableUp&&0===n.isTop&&n.offset>0&&(e.preventDefault(),o=o>=a.swipeMaxHeight?a.swipeMaxHeight:o,a.isLoading=!0,a.swipeWrapper.addClass(a.loadingClass),a.swipeWrapper.css({transform:"translate3d(0, "+o+"px, 0)"})),a.enableDown&&0===n.isBottom&&n.offset<0&&(e.preventDefault(),o=o<=-a.swipeMaxHeight?-a.swipeMaxHeight:o,a.isLoading=!0,a.swipeWrapper.addClass(a.loadingClass),a.swipeWrapper.css({transform:"translate3d(0, "+o+"px, 0)"})))},s=function(e){a.isLoading&&(a.enableUp&&n.offset>0&&(a.swipeWrapper.removeClass(a.loadingClass),a.swipeWrapper.css({transform:"translate3d(0, 0, 0)",transition:"transform 0.6s cubic-bezier(0.1, 0.57, 0.1, 1)"})),a.enableDown&&n.offset<0&&(a.swipeWrapper.removeClass(a.loadingClass),a.swipeWrapper.css({transform:"translate3d(0, 0, 0)",transition:"transform 0.6s cubic-bezier(0.1, 0.57, 0.1, 1)"})),n.offset>=150?a.swipeUpCallback():n.offset<=-150&&a.swipeDownCallback(),a.isLoading=!1)};return a.swipeWrapper.on("touchstart",i),a.swipeWrapper.on("touchend",s),a.swipeWrapper.on("touchmove",r),o},new t}]),appsServices.service("$bsCompiler",["$q","$http","$injector","$compile","$controller","$templateCache",function(e,t,o,n,a,i){
function r(e,t){return angular.element((t||document).querySelectorAll(e))}function s(e){return l[e]?l[e]:l[e]=t.get(e,{cache:i}).then(function(e){return e.data})}this.compile=function(t){t.template&&/\.html$/.test(t.template)&&(console.warn("Deprecated use of `template` option to pass a file. Please use the `templateUrl` option instead."),t.templateUrl=t.template,t.template="");var i=t.templateUrl,l=t.template||"",c=t.controller,u=t.controllerAs,d=angular.copy(t.resolve||{}),p=angular.copy(t.locals||{}),m=t.transformTemplate||angular.identity,g=t.bindToController;if(angular.forEach(d,function(e,t){angular.isString(e)?d[t]=o.get(e):d[t]=o.invoke(e)}),angular.extend(d,p),l)d.$template=e.when(l);else{if(!i)throw new Error("Missing `template` / `templateUrl` option.");d.$template=s(i)}return t.titleTemplate&&(d.$template=e.all([d.$template,s(t.titleTemplate)]).then(function(e){var t=angular.element(e[0]);return r('[ng-bind="title"]',t[0]).removeAttr("ng-bind").html(e[1]),t[0].outerHTML})),t.contentTemplate&&(d.$template=e.all([d.$template,s(t.contentTemplate)]).then(function(e){var o=angular.element(e[0]),n=r('[ng-bind="content"]',o[0]).removeAttr("ng-bind").html(e[1]);return t.templateUrl||n.next().remove(),o[0].outerHTML})),e.all(d).then(function(e){var o=m(e.$template);t.html&&(o=o.replace(/ng-bind="/gi,'ng-bind-html="'));var i=angular.element("<div>").html(String.prototype.trim?o.trim():o).contents(),r=n(i);return{locals:e,element:i,link:function(t){if(e.$scope=t,c){var o=a(c,e,!0);g&&angular.extend(o.instance,e);var n=angular.isObject(o)?o:o();i.data("$ngControllerController",n),i.children().data("$ngControllerController",n),u&&(t[u]=n)}return r.apply(null,arguments)}}})};var l={}}]),appsServices.factory("PagingService",["$timeout","StoreConfig",function(e,t){var o,n,a={hasFirst:!0,hasEnd:!0,prevPage:1,nextPage:1,pageCount:1,pages:[]},i={},r=!1,s=function(e){var o=0|e.pageCount,n=0|e.curPage,a=(e.$wrapper,$(".store-content").width()),i=0,r=a,s=t.paging;1==n?e.hasFirst=!1:(e.prevPage=n-1,r-=s.prevWidth,r-=s.firstWidth,i=i+s.prevWidth+s.firstWidth),n==o?e.hasEnd=!1:(e.nextPage=n+1,r-=s.nextWidth,r-=s.lastWidth,i=i+s.nextWidth+s.lastWidth);var l=Math.floor(r/s.itemWidth),c=1,u=o;if(u>l){var d=Math.floor(l/2);d>=n?(c=1,u=l):n>=u-d?(c=o-l+1,u=o):(c=n-d+(l%2==0?1:0),u=n+d)}else l=u;e.pages=[];for(var p=c,m=u;m>=p;p++)e.pages.push(p);return e};return{set:function(e){if(!r)return void(n=e);tmpObj=angular.extend({},a,e?e:{}),i[o].paging=angular.extend({},s(tmpObj))},init:function(e){a=angular.extend(a,e?e:{})},addDom:function(e,t,a){var s=this;r=!0,domsMap=t,o=e||"paging",i[o]=a,s.init(),n&&(s.set(n),n=null)}}}]),appsServices.factory("DialogService",["$rootScope","$animate",function(e,t){var o={},n={},a=function(){},i=function(){},r=function(){},s=e.isMobile?".m-module-dialog":".module-dialog",l=e.isMobile?"m-module-dialog-show":"module-dialog-show",c="",u={mark:"",isLayer:!0,isCenter:!1,once:!1,top:!1,title:"提示",dialogClass:"",doneText:"确定",cancelText:"取消",template:"",templateUrl:"",templateData:null,hasBtn:!0,useBtn:!1,hasCancel:!1,params:{},content:null,done:null,cancel:null,closeFn:null};return{setContent:function(e,a){function i(e,t){return angular.element((t||document).querySelectorAll(e))}n[e].dialogContent=angular.extend({},u,a);var r=i(".js-dialog-container",o[e][0]);r[0]&&r[0].lastChild?angular.element(r[0].lastChild):null;return r.html(""),angular.isObject(n[e].dialogContent.templateObj)?t.enter(n[e].dialogContent.templateObj,r):t.enter($('<div class="confirm-msg">'+n[e].dialogContent.message+"</div>"),r),this},open:function(e,t,u,d){var p=this;a=function(){p.close()},i=function(){p.close()},r=function(){p.close()},angular.isFunction(t)?(a=t,n[e].dialogContent.dialogConfirm=t):n[e].dialogContent.dialogConfirm=p.close,angular.isFunction(u)?(i=u,n[e].dialogContent.dialogCancel=u):n[e].dialogContent.dialogCancel=p.close,angular.isFunction(d)&&(r=d,n[e].dialogContent.dialogCustom=d),o[c]&&(o[c].find(s).removeClass(l),o[c].find(".module-dialog-layer").hide()),c=e,o[c].find(".module-dialog-layer").show(),o[c].find(s).show(20).delay().addClass(l),setTimeout(function(){$("body").one("click.dialog",function(){$(document).off("keyup.dialog")}),$(document).one("keyup.dialog",function(e){27===e.keyCode&&$("body").off("click.dialog")})},1)},close:function(){$("body").off("click.dialog"),$(document).off("keyup.dialog"),o[c].find(s).removeClass(l),setTimeout(function(){o[c].find(s).hide()},200),o[c].find(".module-dialog-layer").hide()},cancel:function(){i()},confirm:function(){a()},custom:function(e){r(e)},addDom:function(e,t,a){o[e]=t,n[e]=a}}}]),appsServices.factory("CartWarrantyDialogService",["$q","$timeout","$bsCompiler","DialogService",function(e,t,o,n){function a(){var e=this;e.options={templateUrl:"view/html/tempDialog-cart-warranty.html"},e.dialog=null}return a.prototype.setOptions=function(e){var t=this;angular.isObject(e)&&(this.options=angular.extend(t.options,e))},a.prototype.init=function(){var e=this,a=o.compile(e.options);a.then(function(o){e.dialog=n.setContent("dialog",{templateObj:o.link(e.options.scope.$new(),function(e,t){}),dialogClass:"module-dialog-cart-warranty",hasBtn:!1}),t(function(){n.open("dialog")},50)})},a.prototype.close=function(){var e=this;e.dialog.cancel()},new a}]),appsServices.constant("StoreConfig",{storeUrl:"http://store.smartisan.com/#/",storeUrlRest:"http://store.smartisan.com/index.php?r=",mStoreUrlRest:"http://m.store.smartisan.com/index.php?r=",postageTerm:150,postage:15,useGoodsDiscount:!0,goodsDiscount:{cover:{num:3,discount:48}},useGoodsDiscount520Data:!1,useGoodsDiscount520:!1,jsonp520Time:1463661066,goodsDiscount520:{num:5,freeNum:2},isRetina:window.devicePixelRatio&&window.devicePixelRatio>1.2,isMobileTerminal:/iphone|android|ucweb|ucbrowser|nokia|sony|ericsson|mot|samsung|sgh|lg|philips|panasonic|alcatel|lenovo|cldc|midp|wap|mobile/i.test(navigator.userAgent.toLowerCase()),isMobile:/iphone|android|ucweb|ucbrowser|nokia|sony|ericsson|mot|samsung|sgh|lg|philips|panasonic|alcatel|lenovo|cldc|midp|wap|mobile/i.test(navigator.userAgent.toLowerCase())&&!/ipad/i.test(navigator.userAgent.toLowerCase()),isUC:/ucweb|ucbrowser/i.test(navigator.userAgent.toLowerCase()),csstransitions:Modernizr.csstransitions,opacity:Modernizr.opacity,recommendedProds:[],paging:{pageViewClass:"page-view",selectClass:"on",prevClass:"page-prev",prevWidth:97,nextClass:"page-next",nextWidth:97,lastClass:"page-last",lastWidth:50,firstClass:"page-first",firstWidth:51,itemWidth:51},captcha:{supportImei:"Captcha/imeishow",mobileCode:"Captcha/Show",singleWarranty:"Captcha/ImeiShow",tmallExchange:"captcha/recruitShow",addressCode:"Captcha/Show"},formatJSONToHash:function(e){var t=[];return $.each(e,function(e,o){t.push(e+"="+o)}),t.join("&")},formatUrlHash:function(e,t,o){var n=!1,e=e&&e.replace(/^[?|&]/,"")||"",a=e.split("&")||[],i={arrParams:[],jsonParams:{}};return $.each(a,function(e,a){var r=a.split("=");r.length>1&&(r[0]==t?(n=!0,i.arrParams.push({key:t,value:o})):i.arrParams.push({key:r[0],value:r[1]}),i.jsonParams[r[0]]=r[1])}),t&&o&&!n&&i.arrParams.push({key:t,value:o}),i},config:function(){var e=navigator.userAgent.toLowerCase(),t={layoutContainer:$(document),commonTempUrl:"base-template",pageUrl:"",ajaxUrl:"",errorMap:{},isIE:/msie/.test(e),isIE6:/msie 6/.test(e),isHackIE:/msie [7-8]/.test(e),isWebkit:/webkit/.test(e),isFirefox:/firefox/.test(e),isWindows:/windows/.test(e),isLinux:/linux/.test(e),isMac:/mac/.test(e)};return t.isNormalIE=t.isIE&&!t.isIE6&&!t.isHackIE,t}()});try{jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",easeOutQuart:function(e,t,o,n,a){return-n*((t=t/a-1)*t*t*t-1)+o}}),function(e,t,o){function n(){a=t[s](function(){i.each(function(){var t=e(this),o=t.width(),n=t.height(),a=e.data(this,c);(o!==a.w||n!==a.h)&&t.trigger(l,[a.w=o,a.h=n])}),n()},r[u])}var a,i=e([]),r=e.resize=e.extend(e.resize,{}),s="setTimeout",l="resize",c=l+"-special-event",u="delay",d="throttleWindow";r[u]=250,r[d]=!0,e.event.special[l]={setup:function(){if(!r[d]&&this[s])return!1;var t=e(this);i=i.add(t),e.data(this,c,{w:t.width(),h:t.height()}),1===i.length&&n()},teardown:function(){if(!r[d]&&this[s])return!1;var t=e(this);i=i.not(t),t.removeData(c),i.length||clearTimeout(a)},add:function(t){function n(t,n,i){var r=e(this),s=e.data(this,c);s.w=n!==o?n:r.width(),s.h=i!==o?i:r.height(),a.apply(this,arguments)}if(!r[d]&&this[s])return!1;var a;return e.isFunction(t)?(a=t,n):(a=t.handler,void(t.handler=n))}}}(jQuery,this),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,o=Number(arguments[1])||0;for(o=0>o?Math.ceil(o):Math.floor(o),0>o&&(o+=t);t>o;o++)if(o in this&&this[o]===e)return o;return-1})}catch(e){}appsServices.factory("StorePv",["$q",function(e){function t(){}return t.prototype.init=function(){},t.prototype.pvPage=function(){try{MLTrackerz.track({type:"pageview",path:window.location.href})}catch(e){}},t.prototype.pvEvent=function(e){try{MLTrackerz.track({type:"event",action:e})}catch(t){}},t.prototype.pvBusiness=function(e){try{MLTrackerz.track(e)}catch(t){}},t.prototype.SMpvEvent=function(e,t){try{_smq.push(["custom",e,t])}catch(o){}},t.prototype.SMpvOrder=function(e,t,o){try{_smq.push(["custom","提交订单",t,o,e])}catch(n){}},t.prototype.SMpvPayment=function(e,t,o){try{_smq.push(["custom","成交订单",t,o,e])}catch(n){}},new t}]),appsServices.factory("StorageService",["$q",function(e){function t(){var e=this;e.canUsed=!!window.localStorage&&"object"==typeof JSON&&null!==JSON&&"function"==typeof JSON.parse&&"function"==typeof JSON.stringify}return t.prototype.init=function(){},t.prototype.get=function(e,t){var o=this,t=t||{},n=$.cookies.get(e,t);if(o.canUsed&&!t.useCookie){var a=decodeURIComponent(localStorage.getItem(e)),i="null"!==a?JSON.parse(a):n;return n&&(o.remove(e,t),o.set(e,i)),i}return n},t.prototype.set=function(e,t,o){var n=this,o=o||{};n.canUsed&&!o.useCookie?(n.remove(e),"string"!=typeof t&&(t=JSON.stringify(t)),localStorage.setItem(e,encodeURIComponent(t))):$.cookies.set(e,t,o)},t.prototype.filter=function(e,t){var o=this,t=t||{},n=$.cookies.filter(e,t);if(o.canUsed&&!t.useCookie){"string"==typeof e&&(e=new RegExp(e));for(var a in localStorage)a.match(e)&&(n[a]=o.get(a,t))}return n},t.prototype.remove=function(e,t){var o=this,t=t||{};o.canUsed&&localStorage.removeItem(e),$.cookies.del(e,t)},new t}]),appsServices.factory("CartCollection",["$rootScope","$collection","$filter","Config",function(e,t,o,n){var a={CartCollection:t.getInstance()};return a.syncCollection=function(t,i){var r=a.CartCollection.get(t.sku),s={};if(r)s=$.extend({},r,t),s.num=0|s.num,s.num=Math.min(s.max,s.num),s.subtotal=s.price*s.num;else{if(i)return!1;_.indexOf(["nuts","t2","t1"],t.category)<0?t.isWarranty?t.cartImage=t.image:t.cartImage=n.imgUrl+o("realImage")(t.image,80):t.cartImage=t.image,s=$.extend({},t),s.max=s.max||10,s.num=0|s.num||1,s.num=Math.min(s.max,s.num),s.price=s.price||0,s.subtotal=s.price*s.num}var l;try{l=o("nextDate")(30)}catch(c){}try{$.cookies.set("ct"+s.sku,s.num,{expiresAt:l,domain:n.getDomain()}),s.isMobile&&(s.warranty?$.cookies.set("cw"+s.sku,s.warranty,{expiresAt:l,domain:n.getDomain()}):$.cookies.del("cw"+s.sku,{domain:n.getDomain()})),r?a.CartCollection.update(s):a.CartCollection.add(s),e.$emit("cart",{name:"changeCart"})}catch(c){}},a.removeAll=function(){a.CartCollection.removeAll(),e.$emit("cart",{name:"changeCart"})},a}]),appsServices.factory("CartService",["$q","StoreConfig","Config","$rootScope","CartCollection","CartRequest","GoodsService","MobileGoodsService","$filter",function(e,t,o,n,a,i,r,s,l){function c(){var e=this;e.CartModel=null,e.CartCollection=a.CartCollection,e.MobileGoodsService=null,e.GoodsService=null,e.carts=[],e.cache={},e.phones={},e.fetchData={},e.fetchLoop=null,e.loopTime=[]}return c.prototype.init=function(){var e=$.cookies.filter("^ct");$.each(e,function(e,t){$.cookies.del(e)})},c.prototype.syncList=function(){var t=this,n=[],a=$.cookies.filter("^ct");clearInterval(t.fetchLoop),t.fetchLoop=null,$.each(a,function(e,t){var o=e.replace(/^ct/,""),a=$.cookies.get("cw"+o);o&&"undefined"!=o&&(a?n.push(o+":"+a+":"+Math.max(t,1)):n.push(o+":"+Math.max(t,1)))});var r={};return n.length&&(r.goods=n.join(",")),i.sync(r).then(function(n){var a=e.defer();if(n.code)a.reject("网络异常!");else{var i=n.data;angular.forEach(i,function(e){if(e.extended&&e.extended.length){var t=e.extended.join(":");$.cookies.set("cw"+e.goods_code,t,{expiresAt:l("nextDate")(30),domain:o.getDomain()})}}),t.getLocalList(i).then(function(e){a.resolve(e)})}return a.promise},function(e){return!1})},c.prototype.getLocalList=function(t){var o=e.defer(),n=this,i=s.mapWarrantys,l=[],c=$.cookies.filter("^ct");if(t)for(var u=0;u<t.length;u++)c["ct"+t[u].goods_code]=t[u].goods_num;return $.each(c,function(e,t){l.push(e.replace(/^ct/,""))}),l.length?r.getSimpleDetail(l).then(function(t){var o=(e.defer(),{on_sell_list:[],off_sell_list:[]});return $.each(c,function(e,r){var s=e.replace(/^ct/,""),l=t[s];if(l){if(l.num=0|r,l.isMobile&&(l.isAccident=0,l.isDelay=0),l.isMobile&&$.cookies.get("cw"+l.sku)){l.warranty=$.cookies.get("cw"+l.sku);var c=(l.warranty+"").split(":");$.each(c,function(e,t){var o=i[t];o&&("safety1"==o.postName&&(l.isAccident=1),"safety2"==o.postName&&(l.isDelay=1))})}a.syncCollection(l),l=n.CartCollection.get({id:l.sku}),l.isSell?o.on_sell_list.push(l):o.off_sell_list.push(l)}}),o.on_sell_list=n.formatOnlineCart(o.on_sell_list),o.carts=n.CartCollection.all(),o}):(o.resolve({on_sell_list:[],off_sell_list:[]}),o.promise)},c.prototype.getRecommendedProds=function(){var e=this,o=t.recommendedProds;return e.getProdInfo(o)},c.prototype.countCart=function(e){var o=this;s.mapPhones;if(!this.CartCollection||!this.CartCollection.length){var n=0,a=$.cookies.filter("^ct"),i=$.cookies.filter("^cw");return $.each(a,function(e,t){n+=0|t}),$.each(i,function(e,t){var o=(t+"").split(":").length;n+=o*$.cookies.get(e.replace("cw","ct"))}),{num:n,carts:[],total:0}}var r=0,l=0,c=(s.mapCovers,0),u=0,a=e?[]:o.CartCollection&&o.CartCollection.length?o.CartCollection.all():[];e&&$.each(e,function(e,t){var n=o.CartCollection.get(t);n&&a.push(n)}),$.each(a,function(e,t){t.num=0|t.num,r+=t.price*t.num,l+=t.num,t.isMobile&&(t.isAccident&&t.accident&&(r+=t.accident.price*t.num,l+=t.num),t.isDelay&&t.delay&&(r+=t.delay.price*t.num,l+=t.num)),t.isDiscount&&(c+=t.num)});var d=t.goodsDiscount.cover;return t.useGoodsDiscount&&c>=d.num&&(u=d.discount*Math.floor(c/d.num),r-=u),{discountTotal:u,discountGoodsNum:c,num:l,carts:a,total:r}},c.prototype.parseSyncData=function(e){var t=this,o=angular.isArray(e),e=o?e:[e],n=[];return $.each(e,function(e,o){var i=r.parseCommonData(o);if(i.num=o.goods_num||1,i.isMobile){var s=[];1==o.is_accident&&(i.isAccident=1,s.push(i.accident.sku)),1==o.is_delay&&(i.isDelay=1,s.push(i.delay.sku)),s.length&&(i.warranty=s.join(":"))}a.syncCollection(i),i=t.CartCollection.get({id:i.sku}),n.push(i)}),o?n:n[0]},c.prototype.formatOnlineCart=function(e){var t=[],o=[];return $.each(e,function(e,n){n.isOut?o.push(n):t.push(n)}),[].concat(t).concat(o)},c.prototype.getFeatureList=function(t){return i.getFeatureList({pos_ids:t}).then(function(t){var o=e.defer();return t.code?o.reject("网络延迟"):o.resolve(t.data),o.promise},function(e){return!1})},c.prototype.getProdInfo=function(t){for(var n=this,a=t&&t.constructor===Array?t:(t+"").split(","),r=[],s={},l=0,c=a.length;c>l;l++)n.cache[a[l]]?s[a[l]]=$.extend({},n.cache[a[l]]):r.push(a[l]);if(r.length)return i.GetSkusInfo({ids:r.join(","),with_stock:!0}).then(function(t){var i,r=e.defer();if(t.code)r.reject("网络延迟");else{i=t.data;for(var l=i.list,c=0,u=l.length;u>c;c++)l[c].max=l[c].shop_info.limit_num||5,l[c].price=l[c].price,n.cache[l[c].id]||(n.cache[l[c].id]=l[c],s[l[c].id]=l[c]);for(var c=0,u=a.length;u>c;c++)n.cache[a[c]]||$.cookies.del("ct"+a[c],{domain:o.getDomain()});r.resolve(s)}return r.promise},function(e){return!1});var u=e.defer();return u.resolve(s),u.promise},c.prototype.addCart=function(t,o){var n=this,t=o?{sku:t,num:o}:t,a=angular.isArray(t),t=a?t:[t],i=[],r=[];$.each(t,function(e,t){var o=n.CartCollection.get({id:t.sku}),a=$.cookies.get("ct"+t.sku),l={id:t.sku,sku:t.sku,num:0|t.num};s.mapPhones[l.sku]&&(l.isMobile=!0,l.num=1,l.warranty=t.warranty),o?(l.num+=o.num,l.num=Math.min(l.num,o.max),r.push(l)):a?(l.num+=0|a,r.push(l)):i.push(l)}),r.length&&n.updateCart(r),i.length&&n.insertCart(i);var l=e.defer();return l.resolve(!0),l.promise},c.prototype.updateCart=function(e){var t=this,o=s.mapPhones,n=s.mapWarrantys,i=angular.isArray(e),l=[],e=i?e:[e];$.each(e,function(e,i){if(o[i.sku]){var r=t.CartCollection.get({id:i.sku});r=r?$.extend({},r):$.extend({},i);var s=i.warranty?(i.warranty+"").split(":"):[];r.isAccident=0,r.isDelay=0,r.warranty=[],$.each(s,function(e,t){var o=n[t];o&&("safety1"==o.postName&&(r.isAccident=1,r.warranty.push(t)),"safety2"==o.postName&&(r.isDelay=1,r.warranty.push(t)))}),r.warranty=r.warranty.join(":"),i=$.extend({},r)}l.push(i.sku),a.syncCollection(i)}),t.fetchCart(e),r.getSimpleDetail(l)},c.prototype.insertCart=function(e){var t=this,o=[];$.each(e,function(e,t){var n=$.extend({},r.goodsCache[t.sku],{id:t.sku+"",sku:t.sku+"",num:t.num});if(o.push(t.sku),t.isMobile){var i=s.mapPhones[t.sku];n.max=1,n.image=i.image,n.price=i.price,n.subtotal=i.price*t.num,n.isMobile=1,n.warranty=t.warranty}a.syncCollection(n)}),t.fetchCart(e),r.getSimpleDetail(o)},c.prototype.fetchCart=function(e,t){var o=this,n=angular.isArray(e),e=n?e:[e],a=s.mapPhones,r=(s.mapWarrantys,+new Date);$.each(e,function(e,n){t?delete o.fetchData[n.sku]:(o.fetchData[n.sku]=[n.num],a[n.sku]&&n.warranty&&o.fetchData[n.sku].unshift(n.warranty),o.fetchData[n.sku]=o.fetchData[n.sku].join(":"))}),o.loopTime.push(r),o.fetchLoop=setTimeout(function(){if(r==o.loopTime[o.loopTime.length-1]){var e=[];$.each(o.fetchData,function(t,o){e.push(t+":"+o)}),i.save({goods_code:e.join(",")}).then(function(e){},function(e){return!1}),clearInterval(o.fetchLoop),o.fetchLoop=null}},2e3)},c.prototype.removeCart=function(t){var o=this,n=angular.isArray(t),a=n?t:[t];t&&o.fetchData[t]&&delete o.fetchData[t],o.removeCollection(a),i.del({goods_codes:a.join(",")}).then(function(t){var o={},n=e.defer();return t.code?n.reject("网络延迟"):n.resolve(o.data),n.promise},function(e){return!1})},c.prototype.removeCollection=function(e){var t=this,i=!e,r=s.mapPhones,l=angular.isArray(e),c=l?e:[e];if(i){var u=$.cookies.filter("^ct|^cw");$.each(u,function(e,t){$.cookies.del(e,{domain:o.getDomain()})}),a.removeAll()}else $.each(c,function(e,a){var i=t.CartCollection.get({id:a});$.cookies.del("ct"+a,{domain:o.getDomain()}),r[a]&&$.cookies.del("cw"+a,{domain:o.getDomain()}),n.$emit("cart",{name:"removeSingleCart",data:{model:i}}),i&&t.CartCollection.remove(i)})},c.prototype.parsePageCartList=function(e){var o=s.mapCovers,n={mobileList:[],discountList:[],sellList:[],outList:[],offList:[],isEmpty:!(e.on_sell_list.length||e.off_sell_list.length),canCheckout:!1};return e.on_sell_list=angular.isArray(e.on_sell_list)?e.on_sell_list:[],e.off_sell_list=angular.isArray(e.off_sell_list)?e.off_sell_list:[],n.offList=[].concat(e.off_sell_list),$.each(e.on_sell_list,function(e,a){a.isOut?n.outList.push(a):(n.canCheckout=!0,t.useGoodsDiscount&&o[a.sku]&&"t2"!=o[a.sku].category?(a.isDiscountGoods=!0,n.discountList.push(a)):a.isMobile?n.mobileList.push(a):n.sellList.push(a))}),n},c.prototype.removeAll=function(t){var o=e.defer(),n=this,a=$.cookies.filter("^ct"),r=[];return $.each(a,function(e,t){r.push(e.replace(/^ct/,""))}),n.removeCollection(),t&&o.resolve(!0),i.del({goods_codes:r.join(",")}).then(function(e){var t;e.code?o.reject("网络延迟"):(t=e.data,o.resolve(t))},function(e){o.reject(!1)}),o.prmose},new c}]),appsServices.factory("CartRequest",["$rootScope","$http","$q","Config","Utils",function(e,t,o,n,a){var i="",r=new Date,s=e.isMobile?"&_="+r.getTime():"",l=/\{(\D+)\}/,c=n.headconfig,u=function(e,r,u){return r||(r="get"),function(d){var p=e,m=o.defer(),g=l.exec(e);if(i=_.indexOf(location.host.split("#"),"www.smartisan.com")>-1?u?n.middlewareProUrl:n.storeUrlRest:u?n.middlewareTestUrl:n.baseUrl,g&&(p=e.replace(g[0],d[g[1]]),delete d[g[1]]),"post"==r){var f=a.toKeyValue(d);t.post(i+p+s,f,c).success(function(e){m.resolve(e)}).error(function(){m.reject("网络异常!")})}else{var h=i+p+"?"+a.toKeyValue(d);t.get(h).success(function(e){m.resolve(e)}).error(function(){m.reject("网络异常!")})}return m.promise}};return{sync:u("ShoppingCart/Sync","post"),del:u("ShoppingCart/Del","post"),save:u("ShoppingCart/Save","post"),GetMobileSimpleInfo:u("goods/GetMobileSimpleInfo","post"),GetSkusInfo:u("skus","get",!0),GetDoodleGoodsList:u("Doodle/GetGoodsList","post"),GetSingleSkuInfo:u("skus/{skuId}","get",!0),getFeatureList:u("featured","get",!0),getCategoryList:u("shop_categories","get",!0),IsLogin:u("Account/IsLogin","post"),CdkeyVerify:u("Cdkey/Verify","post"),getStockList:u("Activity/Stocks","post")}}]),appsServices.factory("GoodsService",["$q","CartRequest","CartCollection","MobileGoodsService","StoreConfig","$filter","Config",function(e,t,o,n,a,i,r){function s(){var e=this;e.CartService=null,e.GoodsCollection=null,e.goodsCache={},n.init()}return s.prototype.parseCommonDataForMiddle=function(e){var t=this,o=angular.isArray(e),e=o?e:[e],i=n.mapPhones,r=n.mapWarrantys,s=n.mapCovers,l=[];return $.each(e,function(e,o){if(o){var c={id:o.id||o.product_info.goods_code,sku:o.id||o.product_info.goods_code,name:o.shop_info.title||o.name,subName:o.shop_info.sub_title||"",image:o.shop_info.image||"",max:o.stock&&o.stock||o.shop_info.limit_num||10,price:o.price||o.price,link:null,isSell:0,isOut:!o.in_stock,isMobile:0,isWarranty:0,isNormal:0,isCustom:0,isDiscount:0};if(c.max=0|c.max||1,c.price=0|c.price,i[c.sku]){c=$.extend(c,i[c.sku],{max:1,isSell:12==o.sale_status||3==o.sale_status,isMobile:1});var u=n.modelWarranty()[c.category];switch($.each(u,function(e,o){"safety1"==o.postName&&(c.accident=t.parseCommonData(o),c.accident.mobile=c.sku),"safety2"==o.postName&&(c.delay=t.parseCommonData(o),c.delay.mobile=c.sku)}),c.category){case"nuts":c.link="#/jianguo";break;case"t2":c.link="#/t2"}}else c=r[c.sku]?$.extend(c,r[c.sku],{isSell:1,isWarranty:1}):$.extend(c,{link:"#/item/"+c.sku,image:c.image,isSell:3==o.sale_status,isOut:!o.in_stock,isNormal:1,isCustom:o.shop_info.is_custom||0,isDiscount:a.useGoodsDiscount&&s[c.sku]&&"t2"!=s[c.sku].category});!c.isSell&&c.isMobile&&(c.cartImage=c.image),t.goodsCache[c.sku]=$.extend({},c),l.push(c)}}),o?l:l[0]},s.prototype.parseCommonData=function(e){var t=this,o=angular.isArray(e),e=o?e:[e],i=n.mapPhones,r=n.mapWarrantys,s=n.mapCovers,l=[];return $.each(e,function(e,o){if(o){var c={id:o.sku||o.goods_code,sku:o.sku||o.goods_code,name:o.name||o.goods_name,subName:o.subname,image:o.image,max:o.limit_num||10,price:o.sell_price||o.price,link:null,isSell:0,isOut:0,isMobile:0,isWarranty:0,isNormal:0,isCustom:0,isDiscount:0};if(c.max=0|c.max||1,c.price=0|c.price,i[c.sku]){c=$.extend(c,i[c.sku],{max:1,isSell:12==o.status||1==o.status,isMobile:1});var u=n.modelWarranty()[c.category];switch($.each(u,function(e,o){"safety1"==o.postName&&(c.accident=t.parseCommonData(o),c.accident.mobile=c.sku),"safety2"==o.postName&&(c.delay=t.parseCommonData(o),c.delay.mobile=c.sku)}),11==o.status||12==o.status?c.isOut=11==o.status?0:!o.store_status:c.isOut=0===Math.max(o.store_nums,0),c.category){case"nuts":c.link="#/jianguo";break;case"t2":c.link="#/t2"}}else c=r[c.sku]?$.extend(c,r[c.sku],{isSell:1,isWarranty:1}):$.extend(c,{link:"#/item/"+c.sku,image:c.image,isSell:1==o.status,isOut:0===Math.max(o.store_nums,0),isNormal:1,isCustom:0|o.is_custom,isDiscount:a.useGoodsDiscount&&s[c.sku]&&"t2"!=s[c.sku].category});t.goodsCache[c.sku]=$.extend({},c),l.push(c)}}),o?l:l[0]},s.prototype.getSimpleDetail=function(t){var o=this,a=angular.isArray(t)?t:(t+"").split(","),s=n.mapWarrantys,l=[],c={};if($.each(a,function(e,t){o.goodsCache[t]?c[t]=$.extend({},o.goodsCache[t]):s[t]?c[t]=o.getWarrantyDetail(t):l.push(t)}),l.length)return e.all({goodsResponse:o.fetchGoodsDetail(l)}).then(function(t){var o=e.defer(),n=t.goodsResponse,a=angular.isArray(n)?n[0]:n;return angular.forEach(a,function(e,t){_.indexOf(["nuts","t2","t1"],e.category)<0?e.isWarranty?e.cartImage=e.image:e.cartImage=r.imgUrl+i("realImage")(e.image,80):e.cartImage=e.image}),l.length&&$.each(l,function(e,t){!!a[t]&&(c[t]=a[t])}),o.resolve(c),o.promise});var u=e.defer();return u.resolve(c),u.promise},s.prototype.fetchMobileDetail=function(a){var i=this,r=angular.isArray(a)?a:(a+"").split(","),s=n.mapPhones,l=[],c={};if($.each(r,function(e,t){!!s[t]&&l.push(t)}),l.length)return t.GetMobileSimpleInfo({ids:l.join(",")}).then(function(t){var n=[],a=e.defer();return t.code?a.reject("网络异常!"):(n=t.data,$.each(n.list,function(e,t){var n=i.parseCommonData(t);c[n.sku]=$.extend({},n),o.syncCollection(n,!0)}),a.resolve(c)),a.promise},function(e){});var u=e.defer();return u.resolve(c),u.promise},s.prototype.getWarrantyDetail=function(e){var t=this,o=n.mapWarrantys[e],a=t.parseCommonData(o);return $.extend({},a)},s.prototype.fetchGoodsDetail=function(a){var i=this,r=angular.isArray(a)?a:(a+"").split(","),s=(n.mapPhones,n.mapWarrantys,n.mapCovers,[]),l={};if($.each(r,function(e,t){i.goodsCache[t]?l[t]=$.extend({},i.goodsCache[t]):s.push(t)}),s.length)return t.GetSkusInfo({ids:s.join(","),with_spu:!0,with_stock:!0}).then(function(t){var n=[],a=e.defer();return t.code?a.reject("网络异常!"):(n=t.data,$.each(n.list,function(e,t){var n=i.parseCommonDataForMiddle(t);l[n.sku]=$.extend({},n),o.syncCollection(n,!0)}),a.resolve(l)),a.promise},function(e){});var c=e.defer();return c.resolve(l),c.promise},new s}]),appsServices.factory("MobileGoodsService",["CartRequest","$q","Config","Utils",function(e,t,o,n){function a(){var e=this;e.mapWarrantys={},e.mapMobileGifts={},e.mapPhones={},e.mapCovers={},e.mapHeadset={},e.mapNormalT1={},e.mapDefectT1={},e.mapNormalT2={},e.mapNormalNuts={},e.mapYoungNuts={},e.mapBlackNuts={},e.mapDefectNuts={},e.mapStock={},e.listNormalT1=[],e.listDefectT1=[],e.listNormalT2=[],e.listNormalNuts=[],e.listYoungNuts=[],e.listBlackNuts=[],e.listDefectNuts=[],e.listWarrantysT1=[],e.listWarrantysT2=[],e.listWarrantysNuts=[],e.listCoversNuts=[],e.listCoversT2=[],e.listHeadset=[]}var i=["100000001","100000002","100000201","100000202","100007201","100007001","100007002","100007003","100007004","100007005","100007006"];return a.prototype.init=function(){var e=this;e.formatMobileData(),e.formatWarrantyData(),e.formatCoverData(),e.formatHeadsetData(),e.mapMobileGifts=e.modelMobileGift(),e.mapColor=e.modelColor(),e.mapColorT1=e.mapColor.t1,e.mapColorNuts=e.mapColor.nuts,e.mapPageImagesT1=e.pageImagesT1()},a.prototype.formatMobileData=function(e){var t=this,e=e||{},o=e.t1||t.t1(),n=e.t2||t.t2(),a=e.nuts||t.nuts(),i=t.modelColor(),r={},s={},l={};r=t.parsePhones(o,i.t1),s=t.parsePhones(n,i.t2),l=t.parsePhones(a,i.nuts),t.mapNormalT1=r.mapNormal,t.mapDefectT1=r.mapDefect,t.listNormalT1=r.listNormal,t.listDefectT1=r.listDefect,t.mapNormalT2=s.mapNormal,t.listNormalT2=s.listNormal,t.mapNormalNuts=l.mapNormal,t.mapYoungNuts=l.mapYoung,t.mapBlackNuts=l.mapBlack,t.mapDefectNuts=l.mapDefect,t.listNormalNuts=l.listNormal,t.listYoungNuts=l.listYoung,t.listBlackNuts=l.listBlack,t.listDefectNuts=l.listDefect},a.prototype.updateNutsStock=function(){var e=[],t=self.nuts();$.each(result.list,function(e,t){mapStock[t.sku]={stock:11==t.status?!0:t.store_status,usePresale:11==t.status}}),$.each(t,function(t,o){e.push($.extend({},o,{stock:!0,usePresale:!0}))}),self.formatMobileData({nuts:e})},a.prototype.getAllMobilesStock=function(o){var n=this,a=o||[].concat(i).join(","),r=!0,s=a.split(",");if($.each(s,function(e,t){return void 0==n.mapStock[t]?(r=!1,!1):void 0}),r){var l=t.defer();return l.resolve(n.mapStock),l.promise}return e.GetSkusInfo({ids:a,with_spu:!0,with_stock:!0}).then(function(e){var o,a=t.defer(),i=[],r=n.t1(),s={};return e.code?a.reject("网络延迟"):(o=e.data,$.each(o.list,function(e,t){s[t.id]={stock:t.in_stock}}),$.each(r,function(e,t){i.push($.extend({},t,s[t.sku]))}),n.formatMobileData({t1:i}),n.mapStock=$.extend(n.mapStock,s),a.resolve(s)),a.promise},function(e){return!1})},a.prototype.t1=function(){return[{category:"t1",version:"normal",isSale:!1,sku:"100000001",presaleAmount:300,name:"Smartisan T1 3G版 黑色 16GB",color:"black",standard:"3G",capacity:"16GB",price:1980,countdown:86400},{category:"t1",version:"normal",isSale:!1,sku:"100000002",presaleAmount:300,name:"Smartisan T1 3G版 黑色 32GB",color:"black",standard:"3G",capacity:"32GB",price:2080,countdown:86400},{category:"t1",version:"normal",isSale:!0,sku:"100000201",presaleAmount:300,name:"Smartisan T1 4G版 黑色 32GB",color:"black",standard:"4G",capacity:"32GB",price:2480,countdown:86400},{category:"t1",version:"normal",isSale:!0,sku:"100000202",presaleAmount:300,name:"Smartisan T1 4G版 白色 32GB",color:"white",standard:"4G",capacity:"32GB",price:2480,countdown:86400},{category:"t1",version:"normal",isSale:!0,sku:"100007201",presaleAmount:300,name:"Smartisan T1 一周年纪念版 黑色 32GB",color:"anniversary",standard:"4G",capacity:"32GB",price:2480,countdown:86400},{category:"t1",version:"normal",isSale:!1,sku:"100010501",presaleAmount:300,name:"Smartisan T1 4G 移动套餐版 黑色 32GB",color:"black",standard:"4G",capacity:"32GB",price:2480,countdown:86400},{category:"t1",version:"normal",isSale:!1,sku:"100010502",presaleAmount:300,name:"Smartisan T1 4G 移动套餐版 白色 32GB",color:"white",standard:"4G",capacity:"32GB",price:2480,countdown:86400},{category:"t1",version:"defect",isSale:!0,sku:"100007001",presaleAmount:300,defect:!0,defectDiscount:300,name:"Smartisan T1 官方翻新机 B级 3G版 黑色 32GB",color:"black",standard:"3G",capacity:"32GB",price:1780,countdown:86400},{category:"t1",version:"defect",isSale:!0,sku:"100007002",presaleAmount:300,defect:!1,defectDiscount:100,name:"Smartisan T1 官方翻新机 A级 3G版 黑色 32GB",color:"black",standard:"3G",capacity:"32GB",price:1980,countdown:86400},{category:"t1",version:"defect",isSale:!0,sku:"100007003",presaleAmount:300,defect:!0,defectDiscount:300,name:"Smartisan T1 官方翻新机 B级 4G版 黑色 32GB",color:"black",standard:"4G",capacity:"32GB",price:2180,countdown:86400},{category:"t1",version:"defect",isSale:!0,sku:"100007004",presaleAmount:300,defect:!1,defectDiscount:100,name:"Smartisan T1 官方翻新机 A级 4G版 黑色 32GB",color:"black",standard:"4G",capacity:"32GB",price:2380,countdown:86400},{category:"t1",version:"defect",isSale:!0,sku:"100007005",presaleAmount:300,defect:!0,defectDiscount:300,name:"Smartisan T1 官方翻新机 B级 3G版 黑色 16GB",color:"black",standard:"3G",capacity:"16GB",price:1680,countdown:86400},{category:"t1",version:"defect",isSale:!0,sku:"100007006",presaleAmount:300,defect:!1,defectDiscount:100,name:"Smartisan T1 官方翻新机 A级 3G版 黑色 16GB",color:"black",standard:"3G",capacity:"16GB",price:1880,countdown:86400}]},a.prototype.t2=function(){return[{category:"t2",version:"normal",edition:"netcom",edtionLabel:"全网通",isSale:!0,sku:"100014501",name:"Smartisan T2（黑色，32GB）",color:"black",standard:"4G",capacity:"32GB",price:2599,countdown:86400},{category:"t2",version:"normal",edition:"netcom",edtionLabel:"全网通",isSale:!0,sku:"100014502",name:"Smartisan T2（黑色，16GB）",color:"black",standard:"4G",capacity:"16GB",price:2499,countdown:86400}]},a.prototype.nuts=function(){return[{category:"nuts",version:"normal",versionLabel:"标准版",edition:"netcom",edtionLabel:"全网通",isSale:!0,sku:"100015803",presaleAmount:300,name:"坚果手机（灰色，32GB，全网通）",color:"gray",standard:"4G",capacity:"32GB",price:899,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"netcom",edtionLabel:"全网通",isSale:!0,sku:"100015804",presaleAmount:300,name:"坚果手机（灰色，16GB，全网通）",color:"gray",standard:"4G",capacity:"16GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007303",presaleAmount:300,name:"坚果手机（绿色，32GB）",color:"green",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007304",
presaleAmount:300,name:"坚果手机（绿色，16GB）",color:"green",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007305",presaleAmount:300,name:"坚果手机（黄色，32GB）",color:"yellow",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007306",presaleAmount:300,name:"坚果手机（黄色，16GB）",color:"yellow",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007307",presaleAmount:300,name:"坚果手机（橙色，32GB）",color:"orange",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007308",presaleAmount:300,name:"坚果手机（橙色，16GB）",color:"orange",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007309",presaleAmount:300,name:"坚果手机（紫色，32GB）",color:"purple",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007310",presaleAmount:300,name:"坚果手机（紫色，16GB）",color:"purple",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007311",presaleAmount:300,name:"坚果手机（红色，32GB）",color:"red",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007312",presaleAmount:300,name:"坚果手机（红色，16GB）",color:"red",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007313",presaleAmount:300,name:"坚果手机（蓝色，32GB）",color:"blue",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007314",presaleAmount:300,name:"坚果手机（蓝色，16GB）",color:"blue",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007317",presaleAmount:300,name:"坚果手机（青色，32GB）",color:"light-blue",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007318",presaleAmount:300,name:"坚果手机（青色，16GB）",color:"light-blue",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007319",presaleAmount:300,name:"坚果手机（灰色，32GB）",color:"gray",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007320",presaleAmount:300,name:"坚果手机（灰色，16GB）",color:"gray",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012905",presaleAmount:300,name:"坚果手机（绿色，32GB，移动定制）",color:"green",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012906",presaleAmount:300,name:"坚果手机（绿色，16GB，移动定制）",color:"green",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012907",presaleAmount:300,name:"坚果手机（黄色，32GB，移动定制）",color:"yellow",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012908",presaleAmount:300,name:"坚果手机（黄色，16GB，移动定制）",color:"yellow",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012909",presaleAmount:300,name:"坚果手机（橙色，32GB，移动定制）",color:"orange",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012910",presaleAmount:300,name:"坚果手机（橙色，16GB，移动定制）",color:"orange",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012911",presaleAmount:300,name:"坚果手机（紫色，32GB，移动定制）",color:"purple",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012912",presaleAmount:300,name:"坚果手机（紫色，16GB，移动定制）",color:"purple",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012913",presaleAmount:300,name:"坚果手机（红色，32GB，移动定制）",color:"red",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012914",presaleAmount:300,name:"坚果手机（红色，16GB，移动定制）",color:"red",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012915",presaleAmount:300,name:"坚果手机（蓝色，32GB，移动定制）",color:"blue",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012916",presaleAmount:300,name:"坚果手机（蓝色，16GB，移动定制）",color:"blue",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012903",presaleAmount:300,name:"坚果手机（青色，32GB，移动定制）",color:"light-blue",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012904",presaleAmount:300,name:"坚果手机（青色，16GB，移动定制）",color:"light-blue",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012901",presaleAmount:300,name:"坚果手机（灰色，32GB，移动定制）",color:"gray",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012902",presaleAmount:300,name:"坚果手机（灰色，16GB，移动定制）",color:"gray",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013005",presaleAmount:300,name:"坚果手机（绿色，32GB，电信定制）",color:"green",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013006",presaleAmount:300,name:"坚果手机（绿色，16GB，电信定制）",color:"green",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013007",presaleAmount:300,name:"坚果手机（黄色，32GB，电信定制）",color:"yellow",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013008",presaleAmount:300,name:"坚果手机（黄色，16GB，电信定制）",color:"yellow",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013009",presaleAmount:300,name:"坚果手机（橙色，32GB，电信定制）",color:"orange",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013010",presaleAmount:300,name:"坚果手机（橙色，16GB，电信定制）",color:"orange",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013011",presaleAmount:300,name:"坚果手机（紫色，32GB，电信定制）",color:"purple",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013012",presaleAmount:300,name:"坚果手机（紫色，16GB，电信定制）",color:"purple",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013013",presaleAmount:300,name:"坚果手机（红色，32GB，电信定制）",color:"red",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013014",presaleAmount:300,name:"坚果手机（红色，16GB，电信定制）",color:"red",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013015",presaleAmount:300,name:"坚果手机（蓝色，32GB，电信定制）",color:"blue",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013016",presaleAmount:300,name:"坚果手机（蓝色，16GB，电信定制）",color:"blue",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013003",presaleAmount:300,name:"坚果手机（青色，32GB，电信定制）",color:"light-blue",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013004",presaleAmount:300,name:"坚果手机（青色，16GB，电信定制）",color:"light-blue",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013001",presaleAmount:300,name:"坚果手机（灰色，32GB，电信定制）",color:"gray",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"normal",versionLabel:"标准版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013002",presaleAmount:300,name:"坚果手机（灰色，16GB，电信定制）",color:"gray",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"black",versionLabel:"黑色版",edition:"netcom",edtionLabel:"全网通",isSale:!0,sku:"100015801",presaleAmount:300,name:"坚果手机（黑色，32GB，全网通）",color:"black",standard:"4G",capacity:"32GB",price:899,countdown:3600},{category:"nuts",version:"black",versionLabel:"黑色版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007315",presaleAmount:300,name:"坚果手机（黑色，32GB）",color:"black",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"black",versionLabel:"黑色版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100007316",presaleAmount:300,name:"坚果手机（黑色，16GB）",color:"black",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"black",versionLabel:"黑色版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012917",presaleAmount:300,name:"坚果手机（黑色，32GB，移动定制）",color:"black",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"black",versionLabel:"黑色版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100012918",presaleAmount:300,name:"坚果手机（黑色，16GB，移动定制）",color:"black",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"black",versionLabel:"黑色版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013017",presaleAmount:300,name:"坚果手机（黑色，32GB，电信定制）",color:"black",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"black",versionLabel:"黑色版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013018",presaleAmount:300,name:"坚果手机（黑色，16GB，电信定制）",color:"black",standard:"4G",capacity:"16GB",price:699,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"netcom",edtionLabel:"全网通",isSale:!0,sku:"100015901",presaleAmount:300,name:"坚果手机文艺青年版（远州鼠，32GB，全网通）",color:"bone",standard:"4G",capacity:"32GB",price:899,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100013101",presaleAmount:300,name:"坚果手机文艺青年版（鸠羽紫，32GB）",color:"violet",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100013102",presaleAmount:300,name:"坚果手机文艺青年版（苏芳，32GB）",color:"rose",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100013103",presaleAmount:300,name:"坚果手机文艺青年版（落栗，32GB）",color:"coffee",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100013104",presaleAmount:300,name:"坚果手机文艺青年版（柳煤竹茶，32GB）",color:"olive",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100013105",presaleAmount:300,name:"坚果手机文艺青年版（枯草，32GB）",color:"sand",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100013106",presaleAmount:300,name:"坚果手机文艺青年版（石竹，32GB）",color:"pink",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100013107",presaleAmount:300,name:"坚果手机文艺青年版（远州鼠，32GB）",color:"bone",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"all",edtionLabel:"公开版",isSale:!0,sku:"100013108",presaleAmount:300,name:"坚果手机文艺青年版（锖青磁，32GB）",color:"grass",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100013201",presaleAmount:300,name:"坚果手机文艺青年版（鸠羽紫，32GB，移动定制）",color:"violet",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100013202",presaleAmount:300,name:"坚果手机文艺青年版（苏芳，32GB，移动定制）",color:"rose",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100013203",presaleAmount:300,name:"坚果手机文艺青年版（落栗，32GB，移动定制）",color:"coffee",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100013204",presaleAmount:300,name:"坚果手机文艺青年版（柳煤竹茶，32GB，移动定制）",color:"olive",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100013205",presaleAmount:300,name:"坚果手机文艺青年版（枯草，32GB，移动定制）",color:"sand",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100013206",presaleAmount:300,name:"坚果手机文艺青年版（石竹，32GB，移动定制）",color:"pink",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100013207",presaleAmount:300,name:"坚果手机文艺青年版（远州鼠，32GB，移动定制）",color:"bone",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"cmcc",edtionLabel:"移动定制版",isSale:!0,sku:"100013208",presaleAmount:300,name:"坚果手机文艺青年版（锖青磁，32GB，移动定制）",color:"grass",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013301",presaleAmount:300,name:"坚果手机文艺青年版（鸠羽紫，32GB，电信定制）",color:"violet",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013302",presaleAmount:300,name:"坚果手机文艺青年版（苏芳，32GB，电信定制）",color:"rose",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013303",presaleAmount:300,name:"坚果手机文艺青年版（落栗，32GB，电信定制）",color:"coffee",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013304",presaleAmount:300,name:"坚果手机文艺青年版（柳煤竹茶，32GB，电信定制）",color:"olive",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013305",presaleAmount:300,name:"坚果手机文艺青年版（枯草，32GB，电信定制）",color:"sand",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013306",presaleAmount:300,name:"坚果手机文艺青年版（石竹，32GB，电信定制）",color:"pink",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013307",presaleAmount:300,name:"坚果手机文艺青年版（远州鼠，32GB，电信定制）",color:"bone",standard:"4G",capacity:"32GB",price:799,countdown:3600},{category:"nuts",version:"young",versionLabel:"文艺青年版",edition:"telecom",edtionLabel:"电信定制版",isSale:!0,sku:"100013308",presaleAmount:300,name:"坚果手机文艺青年版（锖青磁，32GB，电信定制）",color:"grass",standard:"4G",capacity:"32GB",price:799,countdown:3600}]},a.prototype.modelColor=function(){return{t1:{black:{colorLabel:"黑色",thumb:"http://static.smartisanos.cn/index/img/store/mobile/s03_269fa33c0f.png",img:"http://static.smartisanos.cn/index/img/store/mobile/01_80_fd4824b5cf.png",image:"http://static.smartisanos.cn/index/img/store/mobile/01_80_fd4824b5cf.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/pm-slide-product-image-black_cdd64a7a97.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/black-product_5471d1f6f2.png"},white:{colorLabel:"白色",thumb:"http://static.smartisanos.cn/index/img/store/mobile/s03_white_28a6baac69.png",img:"http://static.smartisanos.cn/index/img/store/mobile/01_80_white_6416b19103.png",image:"http://static.smartisanos.cn/index/img/store/mobile/01_80_white_6416b19103.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/pm-slide-product-image-white_959a5c0659.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/white-product_5679ed5dc0.png"},anniversary:{colorLabel:"一周年纪念版",thumb:"http://static.smartisanos.cn/index/img/store/mobile/s03_269fa33c0f.png",img:"http://static.smartisanos.cn/index/img/store/mobile/01_80_fd4824b5cf.png",image:"http://static.smartisanos.cn/index/img/store/mobile/01_80_fd4824b5cf.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/pm-slide-product-image-black_cdd64a7a97.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/black-product_5471d1f6f2.png"}},t2:{black:{colorLabel:"黑色",img:"http://static.smartisanos.cn/index/img/store/t2/t2-black-80_091f72952f.png",image:"http://static.smartisanos.cn/index/img/store/t2/t2-black-80_091f72952f.png",codeImage:"http://static.smartisanos.cn/index/img/store/t2/t2-cdkey-black_48488c1e85.png"}},nuts:{green:{colorLabel:"绿色",thumb:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-fixbar-green_a991ffaafb.png",img:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_green_9dab19120d.png",image:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_green_9dab19120d.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-green.png",resultImage:"http://static.smartisanos.cn/index/img/store/mobile/result-page-green_a8fb712e40.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cart-slide-image-green_6c827248be.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cdkey-green_4f5efdb97e.png"},yellow:{colorLabel:"黄色",thumb:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-fixbar-yellow_b959df44e8.png",img:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_yellow_37e92db935.png",image:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_yellow_37e92db935.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-yellow.png",resultImage:"http://static.smartisanos.cn/index/img/store/mobile/result-page-yellow_8199a59134.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cart-slide-image-yellow_8b16ecba16.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cdkey-yellow_158f787a99.png"},orange:{colorLabel:"橙色",thumb:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-fixbar-orange_3a6bc45a36.png",img:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_orange_0d6bc6b363.png",image:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_orange_0d6bc6b363.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-orange.png",resultImage:"http://static.smartisanos.cn/index/img/store/mobile/result-page-orange_77f1721fb5.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cart-slide-image-orange_8b3754d90e.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cdkey-orange_424bc8ab35.png"},purple:{colorLabel:"紫色",thumb:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-fixbar-purple_d3a75bae5f.png",img:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_purple_937793947b.png",image:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_purple_937793947b.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-purple.png",resultImage:"http://static.smartisanos.cn/index/img/store/mobile/result-page-purple_f1d53d2263.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cart-slide-image-purple_992e927d72.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cdkey-purple_dd51e43de9.png"},red:{colorLabel:"红色",thumb:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-fixbar-red_96cf5ce6c2.png",img:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_red_57a2f4d2dc.png",image:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_red_57a2f4d2dc.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-red.png",resultImage:"http://static.smartisanos.cn/index/img/store/mobile/result-page-red_502a4196d0.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cart-slide-image-red_1cec6ea832.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cdkey-red_f237236025.png"},blue:{colorLabel:"蓝色",thumb:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-fixbar-blue_6fa9175830.png",img:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_blue_1da8958067.png",image:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_blue_1da8958067.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-blue.png",resultImage:"http://static.smartisanos.cn/index/img/store/mobile/result-page-blue_9f22a9e46f.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cart-slide-image-blue_8cc695dce3.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cdkey-blue_5335dfe528.png"},"light-blue":{colorLabel:"青色",thumb:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-fixbar-light-blue_150747c8ec.png",img:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_light_blue_ec85d5a93a.png",image:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_light_blue_ec85d5a93a.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-light-blue.png",resultImage:"http://static.smartisanos.cn/index/img/store/mobile/result-page-light-blue_dae7e833ea.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cart-slide-image-light-blue_db32e9deec.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cdkey-light-blue_1a546567a7.png"},gray:{colorLabel:"灰色",thumb:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-fixbar-gray.png",img:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_gray_6847b5fffd.png",image:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_gray_6847b5fffd.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-gray.png",resultImage:"http://static.smartisanos.cn/index/img/store/mobile/result-page-gray_fa129e4250.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cart-slide-image-gray.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cdkey-gray_3c1f0302f4.png"},black:{colorLabel:"黑色",thumb:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-fixbar-black.png",img:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_black_57a20b3054.png",image:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_black_57a20b3054.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-black_452871e6d7.png",resultImage:"http://static.smartisanos.cn/index/img/store/mobile/result-page-black_72334458d9.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cart-slide-image-black.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cdkey-black_92afa24215.png"},violet:{colorLabel:"鸠羽紫",thumb:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-fixbar-violet.png",img:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_violet_32ca4637fd.png",image:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_violet_32ca4637fd.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-violet.png",resultImage:"http://static.smartisanos.cn/index/img/store/mobile/result-page-violet_cce0a06fdd.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cart-slide-image-violet.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cdkey-violet_a2f09a9435.png"},sand:{colorLabel:"枯草",thumb:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-fixbar-sand.png",img:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_sand_da68b55dc1.png",image:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_sand_da68b55dc1.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-sand.png",resultImage:"http://static.smartisanos.cn/index/img/store/mobile/result-page-sand_8d7eb8e5ee.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cart-slide-image-sand.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cdkey-sand_a404c0cd3c.png"},olive:{colorLabel:"柳煤竹茶",thumb:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-fixbar-olive.png",img:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_olive_105f6279fd.png",image:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_olive_105f6279fd.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-olive.png",resultImage:"http://static.smartisanos.cn/index/img/store/mobile/result-page-olive_138d253398.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cart-slide-image-olive.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cdkey-olive_d748ebf7b3.png"},coffee:{colorLabel:"落栗",thumb:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-fixbar-coffee.png",img:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_coffee_637091ba24.png",image:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_coffee_637091ba24.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-coffee.png",resultImage:"http://static.smartisanos.cn/index/img/store/mobile/result-page-coffee_7206590f61.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cart-slide-image-coffee.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cdkey-coffee_d60b7f640c.png"},grass:{colorLabel:"锖青磁",thumb:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-fixbar-grass.png",img:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_grass_4c433357c3.png",image:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_grass_4c433357c3.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-grass.png",resultImage:"http://static.smartisanos.cn/index/img/store/mobile/result-page-grass_8d3c4885a5.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cart-slide-image-grass.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cdkey-grass_152b1f5af2.png"},pink:{colorLabel:"石竹",thumb:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-fixbar-pink.png",img:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_pink_b1ca13776d.png",image:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_pink_b1ca13776d.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-pink.png",resultImage:"http://static.smartisanos.cn/index/img/store/mobile/result-page-pink_c9c0f6e652.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cart-slide-image-pink.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cdkey-pink_663d85ae97.png"},rose:{colorLabel:"苏芳",thumb:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-fixbar-rose.png",img:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_rose_62479cda27.png",image:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_rose_62479cda27.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-rose.png",resultImage:"http://static.smartisanos.cn/index/img/store/mobile/result-page-rose_81ab28af2d.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cart-slide-image-rose.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cdkey-rose_5a578101d0.png"},bone:{colorLabel:"远州鼠",thumb:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-fixbar-bone.png",img:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_bone_873ead5e74.png",image:"http://static.smartisanos.cn/index/img/store/mobile/jianguo_80_bone_873ead5e74.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-bone.png",resultImage:"http://static.smartisanos.cn/index/img/store/mobile/result-page-bone_aa2b0da95a.png",cartImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cart-slide-image-bone.png",codeImage:"http://static.smartisanos.cn/index/img/store/mobile/jianguo-cdkey-bone_beadc6a562.png"}}}},a.prototype.modelWarranty=function(){return{t1:[{sku:100000101,aliases:"accident",postName:"safety1",name:"意外保修服务",category:" Smartisan T1 ",price:200,pageCss:"warranty-accident",img:"http://static.smartisanos.cn/index/img/store/mobile/04_3181115886.png",pageImg:"http://static.smartisanos.cn/index/img/store/mobile/phonecare-plus_7130b92179.png",dialogImg:"http://static.smartisanos.cn/index/img/store/mobile/dialog-phonecare-normal_7d2ad38f00.png",warning:"您选购的保修服务不支持单独退款，仅可以随手机订单一同退款。",introduction:["在您购买意外保修服务后的一年内，由于意外损坏造成手机硬件故障，将可以获得最多两次维修服务，或 1 次主机更换服务。（本服务优先采取维修服务,若锤子数码售后服务中心确认无法修复，则进行主机更换。）","您可选择在购机时购买，或收货次日起 3 日内购买本服务。",'服务细则参见<a href="http://www.smartisan.com/#/repair" target="_blank">《锤子数码手机意外损坏保修服务条款》</a>。']},{sku:100000102,aliases:"delay",postName:"safety2",name:"延长保修服务",category:" Smartisan T1 ",price:200,pageCss:"warranty-delay",img:"http://static.smartisanos.cn/index/img/store/mobile/05_650f100976.png",pageImg:"http://static.smartisanos.cn/index/img/store/mobile/phonecare-plus-1_bd0d59ce4f.png",dialogImg:"http://static.smartisanos.cn/index/img/store/mobile/dialog-phonecare-other_866e36b4cd.png",warning:"您选购的保修服务支持单独退款，也可以随手机订单一同退款。",introduction:["如您购买本服务，在手机正常“三包” 1 年保修期结束后，将额外多获得 1 年保修服务。","延长保修服务期为 1 年，自手机正常“三包” 1 年服务期的截止日之次日零时开始，至第二年对应日之 24 时结束。",'服务细则参见<a href="http://www.smartisan.com/#/insurance" target="_blank">《锤子数码手机延长保修服务条款》</a>。']}],t2:[{sku:100014402,aliases:"t2Accident",postName:"safety1",name:"意外保修服务",category:" Smartisan T2 ",price:200,pageCss:"warranty-accident",img:"http://static.smartisanos.cn/index/img/store/mobile/04_3181115886.png",pageImg:"http://static.smartisanos.cn/index/img/store/mobile/phonecare-plus_7130b92179.png",dialogImg:"http://static.smartisanos.cn/index/img/store/mobile/dialog-phonecare-normal_7d2ad38f00.png",warning:"您选购的保修服务不支持单独退款，仅可以随手机订单一同退款。",introduction:["在您购买意外保修服务后的一年内，由于意外损坏造成手机硬件故障，将可以获得最多两次维修服务，或 1 次主机更换服务。（本服务优先采取维修服务,若锤子数码售后服务中心确认无法修复，则进行主机更换。）","您可选择在购机时购买，或收货次日起 3 日内购买本服务。",'服务细则参见<a href="http://www.smartisan.com/#/repair" target="_blank">《锤子数码手机意外损坏保修服务条款》</a>。']},{sku:100014401,aliases:"t2Delay",postName:"safety2",name:"延长保修服务",category:" Smartisan T2 ",price:200,pageCss:"warranty-delay",img:"http://static.smartisanos.cn/index/img/store/mobile/05_650f100976.png",pageImg:"http://static.smartisanos.cn/index/img/store/mobile/phonecare-plus-1_bd0d59ce4f.png",dialogImg:"http://static.smartisanos.cn/index/img/store/mobile/dialog-phonecare-other_866e36b4cd.png",warning:"您选购的保修服务支持单独退款，也可以随手机订单一同退款。",introduction:["如您购买本服务，在手机正常“三包” 1 年保修期结束后，将额外多获得 1 年保修服务。","延长保修服务期为 1 年，自手机正常“三包” 1 年服务期的截止日之次日零时开始，至第二年对应日之 24 时结束。",'服务细则参见<a href="http://www.smartisan.com/#/insurance" target="_blank">《锤子数码手机延长保修服务条款》</a>。']}],nuts:[{sku:100010302,aliases:"nutsAccident",postName:"safety1",name:"意外保修服务",category:"坚果手机",price:99,pageCss:"warranty-accident",nutsImg:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-warranty-accident.png",img:"http://static.smartisanos.cn/index/img/store/mobile/04_3181115886.png",pageImg:"http://static.smartisanos.cn/index/img/store/mobile/phonecare-plus_7130b92179.png",dialogImg:"http://static.smartisanos.cn/index/img/store/mobile/dialog-phonecare-normal_7d2ad38f00.png",warning:"您选购的保修服务不支持单独退款，仅可以随手机订单一同退款。",introduction:["在您购买意外保修服务后的一年内，由于意外损坏造成手机硬件故障，将可以获得最多两次维修服务，或 1 次主机更换服务。（本服务优先采取维修服务,若锤子数码售后服务中心确认无法修复，则进行主机更换。）","您可选择在购机时购买，或收货次日起 3 日内购买本服务。",'服务细则参见<a href="http://www.smartisan.com/#/repair" target="_blank">《锤子数码手机意外损坏保修服务条款》</a>。']},{sku:100010301,aliases:"nutsDelay",postName:"safety2",name:"延长保修服务",category:"坚果手机",price:99,pageCss:"warranty-delay",nutsImg:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-warranty-delay.png",img:"http://static.smartisanos.cn/index/img/store/mobile/05_650f100976.png",pageImg:"http://static.smartisanos.cn/index/img/store/mobile/phonecare-plus-1_bd0d59ce4f.png",dialogImg:"http://static.smartisanos.cn/index/img/store/mobile/dialog-phonecare-other_866e36b4cd.png",warning:"您选购的保修服务支持单独退款，也可以随手机订单一同退款。",introduction:["如您购买本服务，在手机正常“三包” 1 年保修期结束后，将额外多获得 1 年保修服务。","延长保修服务期为 1 年，自手机正常“三包” 1 年服务期的截止日之次日零时开始，至第二年对应日之 24 时结束。",'服务细则参见<a href="http://www.smartisan.com/#/insurance" target="_blank">《锤子数码手机延长保修服务条款》</a>。']}]}},a.prototype.modelCover=function(){return{nuts:[{sku:100010601,category:"youth",name:"坚果手机彩色背盖 青色",price:49,max:10,color:"light-blue",colorLabel:"青色",img:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-light-blue_84a2826839.png",image:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-light-blue_84a2826839.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-light-blue.png"},{sku:100010602,category:"youth",name:"坚果手机彩色背盖 绿色",price:49,max:10,color:"green",colorLabel:"绿色",img:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-green_f1fee48d31.png",image:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-green_f1fee48d31.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-green.png"},{sku:100010603,category:"youth",name:"坚果手机彩色背盖 黄色",price:49,max:10,color:"yellow",colorLabel:"黄色",img:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-yellow_2d2242cf34.png",image:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-yellow_2d2242cf34.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-yellow.png"},{sku:100010604,category:"youth",name:"坚果手机彩色背盖 橙色",price:49,max:10,color:"orange",colorLabel:"橙色",img:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-orange_4c00fac5d6.png",image:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-orange_4c00fac5d6.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-orange.png"
},{sku:100010605,category:"youth",name:"坚果手机彩色背盖 紫色",price:49,max:10,color:"purple",colorLabel:"紫色",img:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-purple_99e9148378.png",image:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-purple_99e9148378.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-purple.png"},{sku:100010606,category:"youth",name:"坚果手机彩色背盖 红色",price:49,max:10,color:"red",colorLabel:"红色",img:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-red_867fb05bfe.png",image:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-red_867fb05bfe.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-red.png"},{sku:100010607,category:"youth",name:"坚果手机彩色背盖 蓝色",price:49,max:10,color:"blue",colorLabel:"蓝色",img:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-blue_d41f74d036.png",image:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-blue_d41f74d036.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-blue.png"},{sku:100010608,category:"youth",name:"坚果手机彩色背盖 白色",price:49,max:10,color:"white",colorLabel:"白色",img:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-white_d56c1643c9.png",image:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-white_d56c1643c9.png",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-white.png"},{sku:100013701,category:"art",name:"坚果手机文艺青年版背壳 鸠羽紫",price:49,max:10,color:"violet",colorLabel:"鸠羽紫",img:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-violet_a4ad953540.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-violet_a4ad953540.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-violet.png"},{sku:100013702,category:"art",name:"坚果手机文艺青年版背壳 苏芳",price:49,max:10,color:"rose",colorLabel:"苏芳",img:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-rose_c0dd8977f8.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-rose_c0dd8977f8.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-rose.png"},{sku:100013703,category:"art",name:"坚果手机文艺青年版背壳 落栗",price:49,max:10,color:"coffee",colorLabel:"落栗",img:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-coffee_ea9d39ae8a.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-coffee_ea9d39ae8a.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-coffee.png"},{sku:100013704,category:"art",name:"坚果手机文艺青年版背壳 柳煤竹茶",price:49,max:10,color:"olive",colorLabel:"柳煤竹茶",img:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-olive_c997d02e09.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-olive_c997d02e09.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-olive.png"},{sku:100013705,category:"art",name:"坚果手机文艺青年版背壳 枯草",price:49,max:10,color:"sand",colorLabel:"枯草",img:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-sand_4cb5b756bb.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-sand_4cb5b756bb.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-sand.png"},{sku:100013706,category:"art",name:"坚果手机文艺青年版背壳 石竹",price:49,max:10,color:"pink",colorLabel:"石竹",img:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-pink_c321fb3784.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-pink_c321fb3784.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-pink.png"},{sku:100013707,category:"art",name:"坚果手机文艺青年版背壳 远州鼠",price:49,max:10,color:"bone",colorLabel:"远州鼠",img:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-bone_0011113820.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-bone_0011113820.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-bone.png"},{sku:100013708,category:"art",name:"坚果手机文艺青年版背壳 锖青磁",price:49,max:10,color:"grass",colorLabel:"锖青磁",img:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-grass_efdc926e6e.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/cover-thumb-80-grass_efdc926e6e.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-grass.png"}],t2:[{sku:100014901,category:"t2",name:"Smartisan T2 手机保护套 红色",price:49,max:10,color:"red",colorLabel:"红色",img:"http://static.smartisanos.cn/index/img/store/t2/t2-cover-thumb-80-red_0b00367e13.png",image:"http://static.smartisanos.cn/index/img/store/t2/t2-cover-thumb-80-red_0b00367e13.png",pageImage:"http://static.smartisanos.cn/index/img/store/t2/t2-cover-page-red_9e38dee7d9.png"},{sku:100014902,category:"t2",name:"Smartisan T2 手机保护套 黑色",price:49,max:10,color:"black",colorLabel:"黑色",img:"http://static.smartisanos.cn/index/img/store/t2/t2-cover-thumb-80-black_6c15174e55.png",image:"http://static.smartisanos.cn/index/img/store/t2/t2-cover-thumb-80-black_6c15174e55.png",pageImage:"http://static.smartisanos.cn/index/img/store/t2/t2-cover-page-black_184f360137.png"}]}},a.prototype.modelHeadset=function(){return[{sku:100013608,name:"S-1000 BASS（红色，低频增强线控版）",version:"bass",versionLabel:"低频增强版",versionLessLabel:"增强版",ctrl:"line",ctrlLabel:"线控版",price:199,max:5,color:"red",colorLabel:"红色",img:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_red_f3ac0fe0ad.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_red_f3ac0fe0ad.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-light-blue.png"},{sku:100013610,name:"S-1000（红色，三段式均衡线控版）",version:"three",versionLabel:"三段式均衡版",versionLessLabel:"均衡版",ctrl:"line",ctrlLabel:"线控版",price:199,max:5,color:"red",colorLabel:"红色",img:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_red_f3ac0fe0ad.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_red_f3ac0fe0ad.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-light-blue.png"},{sku:100013612,name:"S-1000 BASS（黑色，低频增强线控版）",version:"bass",versionLabel:"低频增强版",versionLessLabel:"增强版",ctrl:"line",ctrlLabel:"线控版",price:199,max:5,color:"black",colorLabel:"黑色",img:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_black_9c9f8e88ec.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_black_9c9f8e88ec.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-light-blue.png"},{sku:100013614,name:"S-1000（黑色，三段式均衡线控版）",version:"three",versionLabel:"三段式均衡版",versionLessLabel:"均衡版",ctrl:"line",ctrlLabel:"线控版",price:199,max:5,color:"black",colorLabel:"黑色",img:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_black_9c9f8e88ec.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_black_9c9f8e88ec.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-light-blue.png"},{sku:100013616,name:"S-1000 BASS（米白色，低频增强线控版）",version:"bass",versionLabel:"低频增强版",versionLessLabel:"增强版",ctrl:"line",ctrlLabel:"线控版",price:199,max:5,color:"beige-white",colorLabel:"米白色",img:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_white.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_white.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-light-blue.png"},{sku:100013618,name:"S-1000（米白色，三段式均衡线控版）",version:"three",versionLabel:"三段式均衡版",versionLessLabel:"均衡版",ctrl:"line",ctrlLabel:"线控版",price:199,max:5,color:"beige-white",colorLabel:"米白色",img:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_white.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_white.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-light-blue.png"},{sku:100013607,name:"S-1000 BASS（红色，低频增强音乐版）",version:"bass",versionLabel:"低频增强版",versionLessLabel:"增强版",ctrl:"music",ctrlLabel:"音乐版",price:179,max:5,color:"red",colorLabel:"红色",img:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_red_f3ac0fe0ad.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_red_f3ac0fe0ad.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-light-blue.png"},{sku:100013609,name:"S-1000（红色，三段式均衡音乐版）",version:"three",versionLabel:"三段式均衡版",versionLessLabel:"均衡版",ctrl:"music",ctrlLabel:"音乐版",price:179,max:5,color:"red",colorLabel:"红色",img:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_red_f3ac0fe0ad.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_red_f3ac0fe0ad.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-light-blue.png"},{sku:100013611,name:"S-1000 BASS（黑色，低频增强音乐版）",version:"bass",versionLabel:"低频增强版",versionLessLabel:"增强版",ctrl:"music",ctrlLabel:"音乐版",price:179,max:5,color:"black",colorLabel:"黑色",img:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_black_9c9f8e88ec.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_black_9c9f8e88ec.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-light-blue.png"},{sku:100013613,name:"S-1000（黑色，三段式均衡音乐版）",version:"three",versionLabel:"三段式均衡版",versionLessLabel:"均衡版",ctrl:"music",ctrlLabel:"音乐版",price:179,max:5,color:"black",colorLabel:"黑色",img:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_black_9c9f8e88ec.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_black_9c9f8e88ec.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-light-blue.png"},{sku:100013615,name:"S-1000 BASS（白色，低频增强音乐版）",version:"bass",versionLabel:"低频增强版",versionLessLabel:"增强版",ctrl:"music",ctrlLabel:"音乐版",price:179,max:5,color:"white",colorLabel:"白色",img:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_white.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_white.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-light-blue.png"},{sku:100013617,name:"S-1000（白色，三段式均衡音乐版）",version:"three",versionLabel:"三段式均衡版",versionLessLabel:"均衡版",ctrl:"music",ctrlLabel:"音乐版",price:179,max:5,color:"white",colorLabel:"白色",img:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_white.jpg",image:"http://static.smartisanos.cn/index/img/store/mobile/headset_80_white.jpg",pageImage:"http://static.smartisanos.cn/index/img/store/mobile/nuts-page-light-blue.png"}]},a.prototype.pageImagesT1=function(){return{white:{gallery:["http://static.smartisanos.cn/index/img/store/mobile/phone_white_1_ba5e9bc92b.png","http://static.smartisanos.cn/index/img/store/mobile/phone_white_2_d12facb053.png","http://static.smartisanos.cn/index/img/store/mobile/phone_white_3_f285db179d.png","http://static.smartisanos.cn/index/img/store/mobile/phone_white_4_3368c134a4.png"],specification:{phoneBlack:"http://static.smartisanos.cn/index/img/store/mobile/specification-phone-black_b92ad4762c.png",phoneWhite:"http://static.smartisanos.cn/index/img/store/mobile/specification-phone-white_6617fa03df.png",anniversaryPhoneBlack:"http://static.smartisanos.cn/index/img/store/mobile/specification-anniversary-phone-black_a3850f3601.png",anniversaryPhoneWhite:"http://static.smartisanos.cn/index/img/store/mobile/specification-anniversary-phone-white_6617fa03df.png",anniversaryPhoneGold:"http://static.smartisanos.cn/index/img/store/mobile/specification-anniversary-phone-blackgold_551ea825ec.png",phoneSize:"http://static.smartisanos.cn/index/img/store/mobile/specification-phone-size-white_d9ba31979e.png",phoneCPU:"http://static.smartisanos.cn/index/img/store/mobile/specification-phone-cpu_59616dcfee.png",phoneUSB:"http://static.smartisanos.cn/index/img/store/mobile/procuct-interface-white_b6433e0f1b.jpg",phoneIcons:"http://static.smartisanos.cn/index/img/store/mobile/specification-icons_3b2442a8f5.png",preInstallIcons:"http://static.smartisanos.cn/index/img/store/mobile/specification-preicons_b99a8ce7ae.png"}},black:{gallery:["http://static.smartisanos.cn/index/img/store/mobile/phone_black_1_e7c89fa6a9.png","http://static.smartisanos.cn/index/img/store/mobile/phone_black_2_0289927f18.png","http://static.smartisanos.cn/index/img/store/mobile/phone_black_3_4961321496.png","http://static.smartisanos.cn/index/img/store/mobile/phone_black_4_f59d87d698.png"],specification:{phoneBlack:"http://static.smartisanos.cn/index/img/store/mobile/specification-phone-black_b92ad4762c.png",phoneWhite:"http://static.smartisanos.cn/index/img/store/mobile/specification-phone-white_6617fa03df.png",anniversaryPhoneBlack:"http://static.smartisanos.cn/index/img/store/mobile/specification-anniversary-phone-black_a3850f3601.png",anniversaryPhoneWhite:"http://static.smartisanos.cn/index/img/store/mobile/specification-anniversary-phone-white_6617fa03df.png",anniversaryPhoneGold:"http://static.smartisanos.cn/index/img/store/mobile/specification-anniversary-phone-blackgold_551ea825ec.png",phoneSize:"http://static.smartisanos.cn/index/img/store/mobile/specification-phone-size-black_e85b4f4079.png",phoneCPU:"http://static.smartisanos.cn/index/img/store/mobile/specification-phone-cpu_59616dcfee.png",phoneUSB:"http://static.smartisanos.cn/index/img/store/mobile/procuct-interface-black_5dcc6198da.jpg",phoneIcons:"http://static.smartisanos.cn/index/img/store/mobile/specification-icons_3b2442a8f5.png",preInstallIcons:"http://static.smartisanos.cn/index/img/store/mobile/specification-preicons_b99a8ce7ae.png"}},anniversary:{gallery:["http://static.smartisanos.cn/index/img/store/mobile/phone_black_1_e7c89fa6a9.png","http://static.smartisanos.cn/index/img/store/mobile/phone_blackgold_2_3653070928.png","http://static.smartisanos.cn/index/img/store/mobile/phone_black_3_4961321496.png","http://static.smartisanos.cn/index/img/store/mobile/phone_black_4_f59d87d698.png"],specification:{phoneBlack:"http://static.smartisanos.cn/index/img/store/mobile/specification-phone-black_b92ad4762c.png",phoneWhite:"http://static.smartisanos.cn/index/img/store/mobile/specification-phone-white_6617fa03df.png",anniversaryPhoneBlack:"http://static.smartisanos.cn/index/img/store/mobile/specification-anniversary-phone-black_a3850f3601.png",anniversaryPhoneWhite:"http://static.smartisanos.cn/index/img/store/mobile/specification-anniversary-phone-white_6617fa03df.png",anniversaryPhoneGold:"http://static.smartisanos.cn/index/img/store/mobile/specification-anniversary-phone-blackgold_551ea825ec.png",phoneSize:"http://static.smartisanos.cn/index/img/store/mobile/specification-phone-size-black_e85b4f4079.png",phoneCPU:"http://static.smartisanos.cn/index/img/store/mobile/specification-phone-cpu_59616dcfee.png",phoneUSB:"http://static.smartisanos.cn/index/img/store/mobile/procuct-interface-black_5dcc6198da.jpg",phoneIcons:"http://static.smartisanos.cn/index/img/store/mobile/specification-icons_3b2442a8f5.png",preInstallIcons:"http://static.smartisanos.cn/index/img/store/mobile/specification-preicons_b99a8ce7ae.png"}}}},a.prototype.modelMobileGift=function(){return{}},a.prototype.parsePhones=function(e,t){var o=this,n={mapNormal:{},mapYoung:{},mapBlack:{},mapDefect:{},listNormal:[],listYoung:[],listBlack:[],listDefect:[]},a=[].concat(e);return $.each(a,function(e,a){switch(a=$.extend({},a,t[a.color]),a.id=a.goods_id=a.sku,o.mapPhones[a.sku]=a,a.version){case"defect":n.mapDefect[a.sku]=a,n.listDefect.push(a);break;case"young":n.mapYoung[a.sku]=a,n.listYoung.push(a);break;case"black":n.mapBlack[a.sku]=a,n.listBlack.push(a);break;default:n.mapNormal[a.sku]=a,n.listNormal.push(a)}}),n},a.prototype.formatWarrantyData=function(){var e=this,t=e.modelWarranty(),o=[].concat(t.t1),n=[].concat(t.t2),a=[].concat(t.nuts);$.each(o,function(t,o){o=$.extend({},o),o.image=o.img,o.id=o.goods_id=o.sku,e.mapWarrantys[o.sku]=o,e.mapWarrantys[o.aliases]=o,e.listWarrantysT1.push(o)}),$.each(n,function(t,o){o=$.extend({},o),o.image=o.img,o.id=o.goods_id=o.sku,e.mapWarrantys[o.sku]=o,e.mapWarrantys[o.aliases]=o,e.listWarrantysT2.push(o)}),$.each(a,function(t,o){o=$.extend({},o),o.image=o.img,o.id=o.goods_id=o.sku,e.mapWarrantys[o.sku]=o,e.mapWarrantys[o.aliases]=o,e.listWarrantysNuts.push(o)})},a.prototype.formatCoverData=function(){var e=this,t=e.modelCover(),o=[].concat(t.nuts),n=[].concat(t.t2);$.each(o,function(t,o){o=$.extend({},o),o.image=o.img,o.id=o.goods_id=o.sku,e.mapCovers[o.sku]=o,e.listCoversNuts.push(o)}),$.each(n,function(t,o){o=$.extend({},o),o.image=o.img,o.id=o.goods_id=o.sku,e.mapCovers[o.sku]=o,e.listCoversT2.push(o)})},a.prototype.formatHeadsetData=function(){var e=this,t=e.modelHeadset(),o=[].concat(t);$.each(o,function(t,o){o=$.extend({},o),o.image=o.img,o.id=o.goods_id=o.sku,e.mapHeadset[o.sku]=o,e.listHeadset.push(o)})},new a}]),appsServices.factory("MobileService",["$q","StorageService","StoreConfig","MobileGoodsService","CartRequest",function(e,t,o,n,a){function i(){var e=this;e.type={},e.UserService=null,e.MobileGoodsService=null,e.StorageService=null}return i.prototype.createTempOrder=function(o){var n=this,a="o"+(new Date).getTime(),i=2;o.mobileData&&o.mobileData.usePresale&&(i=1);var r={id:a,mobile_id:o.mobileData.id,pay_type:i,discount_amount:o.discount_amount||0};o.cdkey_code&&(r.cdkey_code=o.cdkey_code),n.removeCache(function(){t.set(a,r,{useCookie:!0,domain:".smartisan.com"})});var s=e.defer();return s.resolve({id:a}),s.promise},i.prototype.completeTempOrder=function(o){var n=this,a=$.extend({mobileGoods:[o.mobile_id]},o);a.id=a.id||"o"+(new Date).getTime(),o.safety1&&a.mobileGoods.push(o.safety1),o.safety2&&a.mobileGoods.push(o.safety2),delete o.mobile_id,delete o.safety1,delete o.safety2,a.mobileGoods.push(1),a.mobileGoods=a.mobileGoods.join(":"),n.removeCache(function(){t.set(a.id,a,{useCookie:!0,domain:".smartisan.com"})});var i=e.defer();return i.resolve(a),i.promise},i.prototype.removeCache=function(e){var o=t.filter("^o");$.each(o,function(e,o){t.remove(e,{domain:".smartisan.com"})}),"function"==typeof e&&e()},i.prototype.parseTempOrderParams=function(e,t){var n={};if(e.mobile_id&&(n.m=e.mobile_id),e.cdkey_code&&(n.c=e.cdkey_code),e.discount_amount&&(n.d=e.discount_amount),e.safety1&&(n.w1=e.safety1),e.safety2&&(n.w2=e.safety2),e.fitting&&(n.fitting=e.fitting),e.goods_infos&&(n.g=e.goods_infos),t){var a=e.mobileGoods||[],i=[];if(e.mobile_id){var r=[];r.push(e.mobile_id),e.safety1&&r.push(e.safety1),e.safety2&&r.push(e.safety2),r.push(1),i.push(r.join(":"))}$.each(a,function(e,t){var o=[t.id];!!t.warranty&&o.push(t.warranty),o.push(t.num),i.push(o.join(":"))}),i.length&&(n.mg=i.join(","))}return o.formatJSONToHash(n)},i.prototype.parseOrderViewData=function(e){var t={total:0,amountTotal:0},o=[],a=[];return e.m&&(t.isMobileOrder=!0,t.mobileData=n.mapPhones[e.m],o.push(t.mobileData),t.total+=t.mobileData.price),e.c&&(t.cdkey_code=e.c),t.discount_amount=e.d||0,e.w1&&(t.isMobileOrder=!0,t.safety1=e.w1,a.push(n.mapWarrantys[e.w1]),t.total+=n.mapWarrantys[e.w1].price),e.w2&&(t.isMobileOrder=!0,t.safety2=e.w2,a.push(n.mapWarrantys[e.w2]),t.total+=n.mapWarrantys[e.w2].price),t.mobiles=o,t.warrantys=a,e.fitting&&(t.fitting=e.fitting),e.g&&(t.goods_infos=e.g),t.amountTotal=t.total-t.discount_amount,t},i.prototype.verifyMobileCdkey=function(t){return a.CdkeyVerify(t).then(function(t){var o=e.defer();return o.resolve(t),o.promise},function(e){return!1})},new i}]),appsServices.factory("CategoryService",["$rootScope","$q","CartRequest","StoreConfig","Config","MobileGoodsService","$timeout",function(e,t,o,n,a,i,r){function s(){var e=this;e.CategoryModel=null,e.cacheCategoryList=null}return s.prototype.getCategoryList=function(){var e=this,n=t.defer();if(e.cacheCategoryList){var a=[].concat(e.cacheCategoryList);n.resolve({list:a})}return o.getCategoryList().then(function(t){var o;t.code?n.reject("网络延迟"):(o=t.data,e.cacheCategoryList=o.list,n.resolve(o))},function(e){}),n.promise},s.prototype.getSku=function(e){return o.GetSingleSkuInfo({skuId:e,with_spu:!0,with_spu_sku:!0,with_stock:!0}).then(function(e){var o,a=t.defer();if(e.code)a.reject("网络异常!");else{o=e.data;var r=0|o.sale_status,s=o.in_stock,l=o.spu.shop_info.tpl_id,c=!1,u="",d=$.extend({},o);if(l&&(c=_.indexOf(l.split(","),"doodle")>=0?!0:!1),o.shop_info.is_custom=0|o.shop_info.is_custom,o.shop_info.is_doodle=c,o.shop_info.is_custom)u="追加定制",d.product_info.in_stock=!1;else switch(r){case 2:u=o.product_info.is_doodle?"即将发售":"该商品已下架";break;case 3:s||(u="该商品已售罄");break;default:u="该商品已售罄"}d.statusLabel=u;var p=i.mapCovers;d.isDiscountGoods=n.useGoodsDiscount&&!!p[d.id]&&"t2"!=p[d.id].category,a.resolve(d)}return a.promise},function(e){})},s.prototype.getSpecList=function(e,t,o){var n=this,i={};angular.forEach(t,function(e){e.id==o&&(i=e)});var r=[].concat(t),s=[];angular.forEach(e,function(e,o){var l=[];angular.forEach(e.spec_values,function(o,s){var c;angular.forEach(t,function(t){t.attr_info[e.spec_id]&&t.attr_info[e.spec_id].spec_value_id==o.id&&(o.image&&(t.attr_info[e.spec_id].image=a.imgUrl+o.image),t.attr_info[e.spec_id].value=o.show_name,t.attr_info[e.spec_id].show_type=e.show_type,c=t)}),c&&l.push({key:e.spec_id,value:c.attr_info[e.spec_id],soldout:n.isSoldout(r,e.spec_id,o.id),isExist:n.isExist(r,i,e.spec_id,o.id),selected:i.attr_info[e.spec_id].spec_value_id==o.id})}),s.push(l),r=n.findSkus(r,e.spec_id,i.attr_info[e.spec_id].spec_value_id,"getSpecList")});var l=[];return angular.forEach(e,function(e,t){var o,n={name:e.spec_name,item:s[t],cur:""};angular.forEach(n.item,function(e){return 1==e.selected?void(o=e):void 0}),o&&(n.cur=o.value.spec_value_id),l.push(n)}),angular.forEach(l,function(e,t){l[t].isColor="颜色"==e.name}),l},s.prototype.isSoldout=function(e,t,o){var e=[].concat(e),n=!0;return $.each(e,function(e,a){return a.attr_info[t]&&a.attr_info[t].spec_value_id==o&&a.in_stock&&a.is_sell?(n=!1,!1):void 0}),n},s.prototype.isExist=function(e,t,o,n){var a=this,i=[].concat(e),r=[],s=!0;return $.each(t.attr_info,function(e,t){t.spec_id==o&&t.spec_value_id!=n?r.push({key:o,value:n}):r.push({key:t.spec_id,value:t.spec_value_id})}),$.each(r,function(e,t){return i=a.findSkus(i,t.key,t.value,"isExist"),i.length?void 0:(s=!1,!1)}),s},s.prototype.findSkus=function(e,t,o,n){var e=[].concat(e),a=[];return $.each(e,function(e,n){n.attr_info[t].spec_value_id==o&&a.push(n)}),a},s.prototype.getCategory=function(n,a,i){var r={page_size:20};n&&63==n&&(r.page_size=10),n&&(r.category_id=n),a&&(r.page=a),i&&(r.sort=i);var s=e.isMobile?2:4;return o.GetSkusInfo(r).then(function(e){var o,a=t.defer();if(e.code)a.reject("网络异常!");else{if(o=e.data,n&&63!=n){var i=s-o.list.length%s;i=i==s?0:i;for(var r=0,l=i;l>r;r++)o.list.push({placeholder:!0})}a.resolve(o)}return a.promise},function(e){})},s.prototype.getCurrentSku=function(e,t){var o={},e=[].concat(e);return $.each(e,function(e,n){return n.id==t?(o=n,!1):void 0}),o},s.prototype.getUpdateSkuID=function(e,t,o,n){var a=this,i=[].concat(e),r={},s="";return $.each(t.attr_info,function(e,t){r[e]=e==o?n:t.spec_value_id}),$.each(r,function(e,t){i=a.findSkus(i,e,t)}),i.length&&(s=i[0].id),s},new s}]),appsServices.factory("MobileFittingService",["$q","CartService","MobileGoodsService","StoreConfig",function(e,t,o,n){function a(){var e=this;e.type={},e.UserService=null,e.MobileGoodsService=null,e.StorageService=null,e.CartService=null}return a.prototype.headset=function(e){var t={},n=[],a=o.modelHeadset(),i=o.mapHeadset;switch(e){default:n=[100013614,100013610,100013612,100013608,100013618,100013616],t={version:[{value:"bass",label:"低频增强版",lessLabel:"增强版"},{value:"three",label:"三段式均衡版",lessLabel:"均衡版"}],color:[{value:"black",label:"黑色"},{value:"red",label:"红色"},{value:"beige-white",label:"米白色"}]}}return{skus:n,params:t,listHeadset:a,mapHeadset:i}},a.prototype.cover=function(e){var t,a,i={},r=[],s=[],l=o.mapCovers,c=100;switch(e){case"youth":s=o.modelCover().nuts,r=[100010606,100010604,100010603,100010602,100010601,100010607,100010605,100010608],i=[{value:"red",label:"红色"},{value:"orange",label:"橙色"},{value:"yellow",label:"黄色"},{value:"green",label:"绿色"},{value:"light-blue",label:"青色"},{value:"blue",label:"蓝色"},{value:"purple",label:"紫色"},{value:"white",label:"白色"}],a="背壳",c=49,t=n.useGoodsDiscount?{num:n.goodsDiscount.cover.num,discount:n.goodsDiscount.cover.discount}:null;break;case"art":s=o.modelCover().nuts,r=[100013707,100013703,100013702,100013706,100013705,100013704,100013708,100013701],i=[{value:"bone",label:"远州鼠"},{value:"coffee",label:"落栗"},{value:"rose",label:"苏芳"},{value:"pink",label:"石竹"},{value:"sand",label:"枯草"},{value:"olive",label:"柳煤竹茶"},{value:"grass",label:"锖青磁"},{value:"violet",label:"鸠羽紫"}],a="背壳",c=49,t=n.useGoodsDiscount?{num:n.goodsDiscount.cover.num,discount:n.goodsDiscount.cover.discount}:null;break;case"t2":s=o.modelCover().t2,r=[100014901,100014902],i=[{value:"black",label:"黑色"},{value:"red",label:"红色"}],a="保护套",c=49}return{skus:r,coverName:a,price:c,params:i,listCover:s,mapCover:l,discountData:t}},a.prototype.getFitting=function(e,o){var n=this,a={fittingStock:!1,headset:{},cover:{}},i=[];switch(e){case"nuts":switch(i=["headset:1"],o){case"youth":i.push("cover:youth");break;case"art":i.push("cover:art")}break;case"t2":i=["headset:1","cover:t2"];break;default:i=[]}if(i.length){for(var r=[],s={},l=0,c=i.length;c>l;l++){var u=i[l].split(":")[0],d=i[l].split(":")[1],p=angular.isFunction(n[u])&&n[u](d);p&&(r=r.concat(p.skus),s[u]={fittingCategory:u,fittingVersion:d,fittingData:p})}return t.getProdInfo(r).then(function(e){return $.each(s,function(t,o){switch(t){case"cover":a.cover=n.parseCoverData(o,e),!!a.cover.stock&&(a.fittingStock=!0);break;case"headset":a.headset=n.parseHeadsetData(o,e),!!a.headset.stock&&(a.fittingStock=!0)}}),a})}return a},a.prototype.parseHeadsetData=function(e,t){var o=e.fittingData.params,n=e.fittingData.mapHeadset,a={stock:!1,curData:{},listData:{}};return $.each(o.version,function(e,i){$.each(o.color,function(e,o){var r=_.find(n,function(e){return e.version==i.value&&e.color==o.value&&"line"==e.ctrl});if(r){angular.isArray(a.listData[i.value])||(a.listData[i.value]=[]);var s=t[r.sku];if(s){var l=3==s.sale_status&&s.in_stock,c=$.extend({},r,{stock:l});a.listData[i.value].push(c),!a.curData.sku&&l&&(a.curData=c),!!l&&(a.stock=!0)}}})}),a},a.prototype.parseCoverData=function(e,t){var o=e.fittingData.params,n=(e.fittingData.mapCover,e.fittingData.listCover),a={},i={stock:!1,listData:[],curData:{},coverName:e.fittingData.coverName,price:e.fittingData.price,discountData:e.fittingData.discountData};return $.each(n,function(e,t){a[t.color]=t}),$.each(o,function(e,o){var n=t[a[o.value].sku],r=3==n.sale_status&&n.in_stock,s=$.extend({},a[o.value],n,{stock:r});i.listData.push(s),!i.curData.sku&&r&&(i.curData=s),!!r&&(i.stock=!0)}),i},new a}]),appsServices.factory("OrderService",["$q","StorageService",function(e,t){function o(){self.OrderParseService=null,self.CartService=null,self.OrderCollection=null,self.StorageService=null}return o.prototype.createTempOrder=function(o){var n=this,a="eo"+(new Date).getTime(),i=[],r=[];$.each(o.carts,function(e,t){r.push(t.id+":"+t.num)}),o.mobileGoods&&$.each(o.mobileGoods,function(e,t){var o=[t.id];!!t.warranty&&o.push(t.warranty),o.push(t.num),i.push(o.join(":"))});var s={id:a,mobileGoods:i.join(","),goods_infos:r.join(","),isDoodle:o.isDoodle};n.removeCache(function(){t.set(a,s,{useCookie:!0,domain:".smartisan.com"})});var l=e.defer();return l.resolve(s),l.promise},o.prototype.completeTempOrder=function(o){var n=this,a=$.extend({},o,{mobileGoods:[o.mobile_id]});a.id=a.id||"to"+(new Date).getTime(),o.safety1&&a.mobileGoods.push(o.safety1),o.safety2&&a.mobileGoods.push(o.safety2),a.mobileGoods.push(1),a.mobileGoods=a.mobileGoods.join(":"),n.removeCache(function(){t.set(orderID,a,{useCookie:!0,domain:".smartisan.com"})});var i=e.defer();return i.resolve(a),i.promise},o.prototype.removeCache=function(e){var t=$.cookies.filter("^eo");$.each(t,function(e,t){$.cookies.del(e)}),"function"==typeof e&&e()},new o}]),appsServices.factory("NutsService",["$q","MobileGoodsService","CartRequest","CategoryService",function(e,t,o,n){function a(){var e=this;e.type={},e.UserService=null,e.MobileGoodsService=null,e.StorageService=null,e.CartService=null,e.mapStock={}}var i=["100007303","100007304","100007305","100007306","100007307","100007308","100007309","100007310","100007311","100007312","100007313","100007314","100007317","100007318","100007319","100007320","100015803","100015804","100007315","100007316","100015801","100013101","100013102","100013103","100013104","100013105","100013106","100013107","100013108","100015901"];return a.prototype.getMobilesStock=function(n){var a=this,r=n||[].concat(i).join(","),s=!0,l=r.split(",");if($.each(l,function(e,t){return void 0==a.mapStock[t]?(s=!1,!1):void 0}),s){var c=e.defer();return c.resolve(a.mapStock),c.promise}return o.GetSkusInfo({ids:r,with_spu:!0,with_stock:!0}).then(function(o){var n,i=e.defer(),r=[],s=t.nuts(),l={};return o.code?i.reject("网络延迟"):(n=o.data,$.each(n.list,function(e,t){l[t.id]={stock:t.in_stock}}),$.each(s,function(e,t){r.push($.extend({},t,l[t.sku]))}),t.formatMobileData({nuts:r}),a.mapStock=$.extend(a.mapStock,l),i.resolve(a.mapStock)),i.promise},function(e){return!1})},a.prototype.pageParams=function(e){var t={edition:[{value:"netcom",label:"全网通"},{value:"all",label:"公开版"}],version:[{value:"normal",label:"标准版"},{value:"young",label:"文艺青年版"},{value:"black",label:"黑色版"}],color:[{version:"normal",value:"red",label:"红色"},{version:"normal",value:"orange",label:"橙色"},{version:"normal",value:"yellow",label:"黄色"},{version:"normal",value:"green",label:"绿色"},{version:"normal",value:"light-blue",label:"青色"},{version:"normal",value:"blue",label:"蓝色"},{version:"normal",value:"purple",label:"紫色"},{version:"normal",value:"gray",label:"灰色"},{version:"young",value:"bone",label:"远州鼠"},{version:"black",value:"black",label:"黑色"}],capacity:[{value:"16GB",label:"16GB",price:"699"},{value:"32GB",label:"32GB",price:"799"}]},o=$.extend({},t);return"netcom"==e&&(o.color=[{version:"normal",value:"gray",label:"灰色"},{version:"young",value:"bone",label:"远州鼠"},{version:"black",value:"black",label:"黑色"}],o.capacity=[{value:"16GB",label:"16GB",price:"799"},{value:"32GB",label:"32GB",price:"899"}]),o},a.prototype.getSkuByCategory=function(e){var o=t.mapPhones,n={defChoose:void 0},a={netcom:{normal:["100015803","100015804"],young:["100015901"],black:["100015801"]},all:{normal:["100007311","100007312","100007307","100007308","100007305","100007306","100007303","100007304","100007317","100007318","100007313","100007314","100007309","100007310","100007319","100007320"],young:["100013107"],black:["100007315","100007316"]}};return $.each(a,function(t,a){n[t]={},$.each(a,function(a,i){$.each(i,function(i,r){return!n[t][a]&&e[r]&&e[r].stock?(n[t][a]=o[r],n[t].hasStock=o[r],n.defChoose||(n.defChoose=o[r]),!1):void 0})})}),n},a.prototype.getPageParams=function(e,o){var n=this,a=t.nuts(),i=(t.mapPhones,{edition:[],version:[],color:[],allStock:!1,curMobile:void 0});return n.getMobilesStock().then(function(t){var r={},s={};i.defChooseMobileData=n.getSkuByCategory(t),$.each(a,function(e,o){t[o.sku]&&t[o.sku].stock&&(r[o.edition]=!0,s[o.version]=!0,i.allStock=!0)}),i.allStock&&(e?i.curMobile=i.defChooseMobileData.netcom[e]||i.defChooseMobileData.all[e]:i.curMobile=i.defChooseMobileData.defChoose);var l=n.pageParams(o);$.each(l.edition,function(e,t){i.edition.push($.extend({},t,{stock:r[t.value]}))}),$.each(l.version,function(e,t){i.version.push($.extend({},t,{stock:s[t.value]}))}),i.allColor=[].concat(l.color);var c=n.getNutsParams(e);return i.color=c.color,i.capacity=c.capacity,i})},a.prototype.getNutsParams=function(e,o){var n=this,e=e||"normal",o=o||{},a=n.pageParams(o.edition),i=t.nuts(),r=(t.mapPhones,[]),s={},l=[],c=[];if(o.edition&&o.version){var u={edition:o.edition,version:o.version};r=_.where(i,u),$.each(r,function(e,t){n.mapStock[t.sku]&&n.mapStock[t.sku].stock&&(!s[t.color]&&(s[t.color]={}),s[t.color][t.capacity]=!0)})}return $.each(a.color,function(t,n){n.version==e&&l.push($.extend(n,{stock:s[n.value],selected:s[n.value]&&n.value==o.color}))}),("young"==e||"netcom"==o.edition&&"black"==e)&&a.capacity.shift(),$.each(a.capacity,function(e,t){c.push($.extend(t,{stock:s[o.color]&&s[o.color][t.value],selected:s[o.color]&&s[o.color][t.value]&&t.value==o.capacity}))}),a.color=l,a.capacity=c,a},a.prototype.specMap=function(){var e={storage:{title:"容量和内存",youth:"16 / 32 GB 高速闪存",art:"32 GB 高速闪存",black:"16 / 32 GB 高速闪存",memory:"2 GB 内存"},color:{title:"颜色",youth:"红、橙、黄、绿、青、蓝、紫、灰",art:"遠州鼠",black:"黑色"},dimensions:{title:"机身尺寸和重量",num_height:"152.9 mm",num_width:"76.9 mm",num_thickness:"9.0 mm",text_height:"高度：152.9 mm",text_width:"宽度：76.9 mm",text_thickness:"厚度：9.0 mm",text_weight:"重量：约 155 g"},cpu:{title:"处理器",desc:"Qualcomm<sup>®</sup> 骁龙™ 615 ( MSM8939 ) 处理器",desc1:"ARM<sup>®</sup> cortex™ - A53 1.5 GHz x 4 +",desc2:"ARM<sup>®</sup> cortex™ - A53 1.0 GHz x 4"},gpu:{title:"图形处理器",desc:"Adreno™ 405 550MHz 图形处理器"},cellular:{title:"蜂窝网络",yidong_h3:"公开版",table:'<tr><th colspan="3" class="n0">网络制式</th><th>支持频段</th></tr><tr><td rowspan="2" class="eq-0">4G</td><td class="eq-1">联通</td><td class="eq-2">FDD-LTE</td><td>B1 / B3 / B7</td></tr><tr><td>移动</td><td>TDD-LTE</td><td>B38 / B39 / B40 / B41 <span>( 注：B41 仅支持中国频段 )</span></td></tr><tr><td rowspan="2">3G</td><td>联通</td><td>WCDMA</td><td>B1 / B2 / B5 / B8</td></tr><tr><td>移动</td><td>TD-SCDMA</td><td>B34 / B39</td></tr><tr><td class="n1">2G</td><td class="n2">移动/联通</td><td class="n3">GSM</td><td>B2 / B3 / B5 / B8</td></tr>',sim1:"SIM 1 卡槽：支持 移动/联通 2G/3G/4G",sim2:"SIM 2 卡槽：仅支持 移动/联通 2G",dianxin_h3:"电信版",dianxin_table:'<tr><th colspan="3" class="n0">网络制式</th><th>支持频段</th></tr><tr><td rowspan="3" class="eq-0">4G</td><td rowspan="2" class="eq-1">电信</td><td class="eq-2">TDD-LTE</td><td>B41</td></tr><tr><td>FDD-LTE</td><td>B1 / B3 / B7 <span>（注：FDD-LTE 制式仅支持电信要求频段）</span></td></tr><tr><td>移动</td><td>TDD-LTE</td><td>B38 / B39 / B40 / B41</td></tr><tr><td rowspan="2">3G</td><td>电信</td><td>EVDO</td><td>BC0</td></tr><tr><td>移动</td><td>TD-SCDMA</td><td>B34 / B39</td></tr><tr><td class="n21" rowspan="2">2G</td><td class="n22">电信</td><td class="n23">CDMA 1X</td><td class="n24">BC0</td></tr><tr><td>移动/联通</td><td>GSM</td><td>B2 / B3 / B5 / B8</td></tr>',dianxin_sim1:"SIM 1 卡槽：支持 电信/移动 2G/3G/4G 联通 2G",dianxin_sim2:"SIM 2 卡槽：仅支持 移动/联通 2G",quanwangtong_h3:"全网通版",quanwangtong_table:'<tr><th colspan="3" class="n0">网络制式</th><th>支持频段</th></tr><tr><td rowspan="4" class="eq-0">4G</td><td>移动</td><td>TDD-LTE</td><td>B38 / B39 / B40 / B41</td></tr><tr><td>联通</td><td>FDD-LTE</td><td>B1 / B3 / B7</td></tr><tr><td rowspan="2" class="eq-1">电信</td><td class="eq-2">TDD-LTE</td><td>B41</td></tr><tr><td>FDD-LTE</td><td>B1 / B3 / B7</td></tr><tr><td rowspan="3">3G</td><td>移动</td><td>TD-SCDMA</td><td>B34 / B39</td></tr><tr><td>联通</td><td>WCDMA</td><td>B1 / B2 / B5 / B8</td></tr><tr><td>电信</td><td>EVDO</td><td>BC0</td></tr><tr><td class="n21" rowspan="2">2G</td><td>移动/联通</td><td>GSM</td><td>B2 / B3 / B5 / B8</td></tr><tr><td class="n22">电信</td><td class="n23">CDMA 1X</td><td class="n24">BC0</td></tr>',quanwangtong_sim1:"SIM 1 卡槽：支持 移动/联通/电信 2G/3G/4G",quanwangtong_sim2:"SIM 2 卡槽：仅支持 移动/联通 2G"},wireless:{title:"无线网络",wireless:"802.11 b/g/n 无线网络，支持 2.4 GHz 频段",bluetooth:"蓝牙 4.0",nfc:"NFC"},display:{title:"屏幕",display:"5.5 英寸 TFT 显示屏",resolution:"1920 x 1080 像素分辨率，403 PPI",contrast:"1000:1 对比度（标准）",brightness:"400 cd/m<sup>2</sup> 最大亮度（标准）",kang:"康宁<sup>®</sup>第三代大猩猩<sup>®</sup>玻璃"},frontCamera:{title:"前置摄像头",desc1:"500 万像素",desc2:"ƒ/2.2 光圈，等效焦距约 25mm 镜头"
},rearCamera:{title:"主摄像头",desc1:"1300 万像素",desc2:"ƒ/2.2 光圈，等效焦距约 28mm 镜头",desc3:"LED 闪光灯"},audioPlayback:{title:"音频播放",desc1:"支持声音文件格式：MP3，M4A，AAC，AMR",desc2:"支持无损格式：ALAC ( Apple Lossless )，FLAC，APE，WAV ( 最高支持 192-KHz/24-bits ) ，AIFF",desc3:"支持声音解码格式：AAC/AAC+/eAAC+，MP3"},videoPlayback:{title:"视频播放",desc1:"支持的视频格式：",desc2:"H.264 视频，支持 1080p，60 fps，High Profile Level 4.2 和 AAC-LC/MP3 音频，文件格式为 .mp4，.avi，.mkv，.webm，.3gp",desc3:"MPEG4-ASP 视频，最高可达 1080p，60 fps，Level 5，Simple Profile，最高可达 1080p，60 fps，Level 8，AAC-LC 音频，文件格式为 .mp4",desc4:"H.263 视频，最高可达 864 x 480，Level 70，30 fps，AAC-LC 音频，文件格式为 .mp4"},keysPorts:{title:"按钮和接口",mode1:"开机设置为左手模式时",mode2:"开机设置为右手模式时",onOff:'长按 <span class="emphasis">开机 / 关机</span>',lock:'短按 <span class="emphasis">唤醒 / 锁屏</span>',volume:"音量调节",brightness:"可自定义键",back:"返回<br /><i>BACK</i>",home:"桌面<br /><i>HOME</i>",menu:"菜单<br /><i>MENU</i>",jack:"3.5mm 耳机接口",topSide:"顶部",usb:"Micro-USB 接口",bottomSide:"底部"},battery:{title:"电池",desc:"内置 2900 mAh 锂聚合物充电电池"},sensors:{title:"传感器",desc1:"陀螺仪",desc2:"重力传感器",desc3:"地磁传感器",desc4:"环境光传感器",desc5:"距离传感器"},os:{title:"操作系统",desc1:"基于 Android™ 深度定制的 Smartisan OS",desc2:"支持语言：中文简体、中文繁体（台湾）、英语、日语、韩语",desc3:"注：部分系统功能需要 Smartisan ID 与互联网连接"},builtIn:{title:"内置应用",icons:[{className:"phone",label:"电话"},{className:"music",label:"音乐"},{className:"messages",label:"短信"},{className:"calendar",label:"日历"},{className:"clock",label:"时钟"},{className:"notes",label:"便签"},{className:"recorder",label:"录音机"},{className:"mail",label:"邮件"},{className:"market",label:"应用商店"},{className:"game-center",label:"游戏中心"},{className:"browser",label:"浏览器"},{className:"gallery",label:"相册"},{className:"settings",label:"设置"},{className:"calculator",label:"计算器"},{className:"camera",label:"相机"},{className:"weather",label:"天气"},{className:"search",label:"搜索"},{className:"voice-assistant",label:"语音搜索"},{className:"downloads",label:"下载"},{className:"security-center",label:"安全中心"},{className:"cloud",label:"欢喜云服务"},{className:"bbs",label:"锤子科技论坛"}],remark:"“内置应用”是系统内建的为用户提供智能手机基本功能的应用程序，包括但不限于以上列举的锤子科技自主开发及与软件提供商共同研发的内建程序（如触宝输入法定制版、讯飞语音＋等）。为确保手机的正常使用，除锤子科技论坛外的所有内置应用均无法卸载。"},preloaded:{title:"预装第三方应用",remark:"你在首次使用坚果手机（ OS v2.0.4 ）时，如果发现手机中的应用与以上列表中的内置应用和预置第三方应用的数量、名称或图标有任何不同，则说明该手机的软件系统被除锤子科技（包括其关联公司）之外的其他方改动过。此种改动可能给你的手机带来病毒、系统不稳定、被植入广告或被偷偷盗取费用等不良影响。你可以联系你购买手机的经销商解决此类问题，也欢迎给 report@smartisan.com 发邮件向我们检举经销商，如果是我们的正式授权经销商，我们会严肃处理。但手机可能会由于不可控的因素落入非正规销售商甚至是职业黄牛手中，对于这种情况，我们无法控制，所以锤子科技对于非官方或非授权经销商售出手机的软件系统的人为改动，将不承担赔偿损失、免费维修等任何形式的责任。",icons:{weibo:"微博",wechat:"微信",zhifubao:"支付宝",momo:"陌陌",airdroid:"AirDroid",wpsOffice:"WPS Office",youku:"优酷视频",amap:"高德地图",youdao:"网易有道词典",dingxiang:"丁香医生",tencenVideo:"腾讯视频",mafengwo:"蚂蜂窝自由行",douban:"豆瓣",ireader:"掌阅iReader",qunar:"去哪儿旅行",neteaseNewsreader:"网易新闻",meituan:"美团",dianping:"大众点评",didi:"滴滴打车",daxiang:"大象公会"}},sim:{title:"SIM 卡",desc:"Micro-SIM 卡"},packagingContents:{title:"包装内容",desc1:"坚果手机",desc2:"USB 线缆及集线器",desc3:"充电器",desc4:"坚果手机产品使用说明书",desc5:"坚果手机三包凭证",desc6:"电子信息产品有害物质说明"},remarks:{desc1:'注：<br class="mobile">1. 本页面所列配置及参数均以实际上市产品为准，如有变更，恕不另行通知；',desc2:"2. Android™ is a trademark of Google Inc."}};return $.extend({},e)},new a}]),appsServices.factory("T2Service",["$q","MobileGoodsService","CartRequest",function(e,t,o){function n(){var e=this;e.type={},e.UserService=null,e.MobileGoodsService=null,e.StorageService=null,e.CartService=null,e.mapStock={}}var a=["100014501","100014502"];return n.prototype.getMobilesStock=function(n){var i=this,r=n||[].concat(a).join(","),s=!0,l=r.split(",");if($.each(l,function(e,t){return void 0==i.mapStock[t]?(s=!1,!1):void 0}),s){var c=e.defer();return c.resolve(i.mapStock),c.promise}return o.GetSkusInfo({ids:r,with_spu:!0,with_stock:!0}).then(function(o){var n,a=e.defer(),r=[],s=t.t2(),l={};return o.code?a.reject("网络延迟"):(n=o.data,$.each(n.list,function(e,t){l[t.id]={stock:t.in_stock}}),$.each(s,function(e,t){r.push($.extend({},t,l[t.sku]))}),t.formatMobileData({t2:r}),i.mapStock=$.extend(i.mapStock,l),a.resolve(i.mapStock)),a.promise},function(e){return!1})},n.prototype.getPageParams=function(e,o){var n=this,a=[].concat(t.t2()),i=(t.mapPhones,{allColor:null,allStock:!1,curMobile:void 0});return n.getMobilesStock().then(function(t){i.defChooseMobileData=n.getSkuByCategory(t),$.each(a,function(e,o){t[o.sku]&&t[o.sku].stock&&(a[e].stock=!0,i.allStock=!0)}),i.allStock&&(e?i.curMobile=i.defChooseMobileData.netcom[e]||i.defChooseMobileData.all[e]:i.curMobile=i.defChooseMobileData.defChoose);var r=n.pageParams(o);i.allColor=[].concat(r.color);var s=n.getT2Params(e);return i.t2List=a,i.color=s.color,i.capacity=s.capacity,i})},n.prototype.getT2Params=function(e,o){var n=this,e=e||"normal",o=o||{},a=n.pageParams(o.edition),i=t.t2(),r=(t.mapPhones,[]),s={},l=[],c=[];if(o.edition&&o.version){var u={edition:o.edition,version:o.version};r=_.where(i,u),$.each(r,function(e,t){n.mapStock[t.sku]&&n.mapStock[t.sku].stock&&(!s[t.color]&&(s[t.color]={}),s[t.color][t.capacity]=!0)})}return $.each(a.color,function(t,n){n.version==e&&l.push($.extend(n,{stock:s[n.value],selected:s[n.value]&&n.value==o.color}))}),$.each(a.capacity,function(e,t){c.push($.extend(t,{stock:s[o.color]&&s[o.color][t.value],selected:s[o.color]&&s[o.color][t.value]&&t.value==o.capacity}))}),a.color=l,a.capacity=c,a},n.prototype.pageParams=function(e){var t={edition:[{value:"netcom",label:"全网通"}],version:[{value:"normal",label:"标准版"}],color:[{version:"normal",value:"black",label:"黑色"}],capacity:[{value:"16GB",label:"16GB",price:"2499"},{value:"32GB",label:"32GB",price:"2599"}]},o=$.extend({},t);return o},n.prototype.getSkuByCategory=function(e){var o=t.mapPhones,n={defChoose:void 0},a={netcom:{normal:["100014501","100014502"]}};return $.each(a,function(t,a){n[t]={},$.each(a,function(a,i){$.each(i,function(i,r){return!n[t][a]&&e[r]&&e[r].stock?(n[t][a]=o[r],n[t].hasStock=o[r],n.defChoose||(n.defChoose=o[r]),!1):void 0})})}),n},new n}]),appsServices.factory("ThemeService",["$q","MobileGoodsService","CartRequest","$filter","StoreConfig",function(e,t,o,n,a){function i(){}return i.prototype.init=function(){},i.prototype.getLimitContent=function(e,t,o){var t=t+"",a="";document.location.origin+"/#/item/"+e;return a=n("ellipsis")(t,o),a=a.replace(/\.+$/,"······")},i.prototype.shareWeibo=function(e,t,o){var t="http://service.weibo.com/share/share.php?appkey=&title="+e+"&url="+encodeURIComponent(t)+"&pic="+o;return t},i.prototype.getCoverData=function(e){for(var t=this,o=[],n=0,a=e.length;a>n;n++){var i=e[n],r=i.shop_info,s=document.location.origin+"#/item/"+i.id;i.is_custom=0|r.is_custom,i.status=0|i.sale_status,i.doodleImg=r.image,i.title=r.title,i.subtitle=r.sub_title;var l="";i.is_custom?(l="追加定制",i.store_nums_out=!1):i.in_stock?i.store_nums_out=!1:(l="暂时无货",i.store_nums_out=!0),i.buttonLabel=l,r.tpl_content&&r.tpl_content.doodle&&(i.content=r.tpl_content.doodle.text),r.tpl_content&&r.tpl_content.weibo&&(i.share_text=r.tpl_content.weibo.text)&&(i.share_pic=r.tpl_content.weibo.images.image_pre+r.tpl_content.weibo.images["1x"]+r.tpl_content.weibo.images.image_name),i.thumbContent=t.getLimitContent(i.id,i.content,110),i.shareWeibo=t.shareWeibo(i.share_text,s,i.share_pic),o.push(i)}return o},new i}]),appsFilters.filter("realImage",["StoreConfig",function(e){return function(t,o,n){var n=n||"jpg";if(t){if(_.indexOf(t.split(","),".png")>-1)return t;var a=e.isRetina,i="";return i=a?t+o+"X"+o+"@2x."+n:t+o+"X"+o+"."+n}return""}}]).filter("nextDate",["StoreConfig",function(e){return function(e){var t=new Date,e=0|e;return t.setDate(t.getDate()+e),t}}]).filter("retinaImage",["StoreConfig",function(e){return function(t,o){if(t){var n=e.isRetina;if(n){var a=t.split("/"),i=a.pop().replace("@2x","").replace(/(\.[^.]+)$/,"@2x$1"),r=a.join("/");return o?r+"/"+i:r+"/retina/"+i}return t}return""}}]).filter("floatNumber",["StoreConfig",function(e){return function(e,t){var o=e+"",n=o,a="";return o.match(/[^\d\.]/)?e:(o.match(/\./)&&(n=o.replace(/\..*$/gi,""),a=o.replace(/^[^\.]+\.?/gi,""),a=a.replace(/^(\d{1,2})\d*/,"$1"),a=2==a.length?a:a+"0"),t?n+"."+(""==a?"00":a):n+"."+(""==a?"00":a)-0)}}]).filter("rmb",["StoreConfig",function(e){return function(e,t,o){if(void 0==e)return 0;var n=e+"",a=n,i="";if(n.match(/[^\d\.]/))return e;n.match(/\./)&&(a=n.replace(/\..*$/gi,""),i=n.replace(/^[^\.]+\.?/gi,""),i=i.replace(/^(\d{1,2})\d*/,"$1"),i=2==i.length?i:i+"0");for(var r=a.split("").reverse(),s=[],l=0;l<r.length;l++)l%3==0&&s.push(","),s.push(r[l]);var c=s.reverse().join("").replace(/\,$/gi,"");return c=o?c:"¥ "+c,("boolean"==typeof t&&t||"true"==t)&&(c=c+"."+(""==i?"00":i)),c}}]).filter("decimal",["StoreConfig","$filter",function(e,t){return function(e,o){var n=t("rmb")(e,o),a=n.indexOf("¥ ");return n=a>=0?n.substr(a+2):n}}]).filter("ellipsis",["StoreConfig","$filter",function(e,t){return function(e,t){var e=e+"",o="",n=e.replace(/[^\x00-\xff]/g,">>");if(n.length<=2*t)return e;var a=n.substr(0,2*t).split(">>"),i=0;return $.each(a,function(t,n){""==n?(o+=e.substr(i,1),i++):(o+=e.substr(i,n.length),i+=n.length)}),o+"..."}}]),appsDirectives.directive("realSrc",["$timeout","StoreConfig",function(e,t){return{restrict:"A",link:function(e,o,n,a){function i(e){n.$set("src",e),t.configmsie&&o.prop("src",e)}n.$observe("realSrc",function(e){e&&i(e)})}}}]).directive("uiRadio",["$timeout",function(e){return{restrict:"EA",templateUrl:"view/html/tempUiRadio.html",replace:!0,scope:{name:"@name",options:"=options",value:"@",parentEl:"@",checked:"=checked"},link:function(t,o,n,a){t.normalClass=!!t.options&&t.options.normalClass||"blue-radio",o&&e(function(){t.options&&t.options.parentEl?o.closest(t.options.parentEl).click(function(e){t.$apply(function(){t.options&&angular.isFunction(t.options.callback)&&t.options.callback(o,t.name,t.checked,t.value)})}):t.toggleRadio=function(e){t.options&&angular.isFunction(t.options.callback)&&t.options.callback(o,t.name,t.checked,t.value)}},500)}}}]).directive("uiCheckbox",["$timeout",function(e){return{restrict:"EA",templateUrl:"view/html/tempUiCheckbox.html",replace:!0,scope:{name:"@",options:"=options",checked:"=checked",parentEl:"@",disableddd:"=disableddd"},link:function(t,o,n,a){t.normalClass=t.options.normalClass||"blue-checkbox",o&&e(function(){t.options&&t.options.parentEl?o.closest(t.options.parentEl).click(function(e){t.$apply(function(){t.disabled||(t.checked=!t.checked,t.options&&angular.isFunction(t.options.callback)&&t.options.callback(o,t.name,t.checked))})}):t.toggleCheck=function(e){t.disabled||(t.checked=!t.checked,t.options&&angular.isFunction(t.options.callback)&&t.options.callback(o,t.name,t.checked))}},500)}}}]).directive("cartQuantity",["$timeout","DialogService",function(e,t){return{restrict:"EA",templateUrl:"view/html/tempCartQuantity.html",replace:!0,scope:{options:"=options",value:"=value",sku:"@",min:"@",max:"@"},link:function(o,n,a,i){o.arr=[1,2],o.customClass=o.options.customClass||"select",n&&(o.resetList=function(e,t){o.$apply(function(){o.value=t,o.arr=[t-1,t,t-0+1],angular.isFunction(o.options.callback)&&o.options.callback(e,o.sku,t)})},n.find("input").on("keydown",function(e){var t=e.keyCode;return!e.shiftKey&&(t>47&&58>t||t>94&&106>t||8==t||13==t)?void(13==t&&$(e.currentTarget).blur()):!1}),n.find("input").on("blur",function(e){var t=$(e.currentTarget),n=t.siblings("ul"),a=(t.closest(".cart-items"),t.closest(".js-select-quantity"),0|o.min||1),i=0|o.max||0,r=t.val();r=r.match(/^\d+$/)?r:1,r=Math.max(r,a),r=Math.min(r,i),t.val(r),o.resetList(n,r)}),o.up=function(n){var a=$(n.currentTarget),i=a.siblings(".num"),r=i.find("input"),s=i.find("ul"),l=a.closest(".cart-items"),c=(r.closest(".js-select-quantity"),o.max||0),u=o.value,d=i.height();return c=Math.max(c,1),l.hasClass("cart-disabled-items")?!1:u>=c&&o.options.useData?(t.setContent("dialog",{message:"已达到可购买的最大数量",dialogClass:"module-dialog-confirm"}),e(function(){t.open("dialog")},50),!1):s.is("animated")||u>=c?!1:(r.hide(),s.show(),e(function(){},100),void s.animate({top:"-="+d},100,function(){++u,r.show(),s.css("top","-"+d+"px").hide(),o.resetList(s,u)}))},o.down=function(e){var t=$(e.currentTarget),n=t.siblings(".num"),a=n.find("input"),i=n.find("ul"),r=t.closest(".cart-items"),s=(a.closest(".js-select-quantity"),o.min||1),l=o.value,c=n.height();return o.options.canDelete&&(s=0),r.hasClass("cart-disabled-items")?!1:1!=l||o.options.canDelete?i.is("animated")||s>=l?!1:(a.hide(),i.show(),void i.animate({top:"+="+c},100,function(){--l,a.show(),i.css("top","-"+c+"px").hide(),o.resetList(i,l)})):!1})}}}]).directive("tempSubNavGoodsItem",["$timeout",function(e){return{restrict:"EA",templateUrl:"view/html/tempSubNavGoodsItem.html",replace:!0,link:function(e,t,o,n){if(t){e.navGoods=[{category:"mobile",list:[{mark:"t2",name:"Smartisan T2",price:2499,link:"t2"},{mark:"youth",name:"坚果手机标准版",price:699,link:"jianguo?name=youth"},{mark:"art",name:"坚果手机文艺青年版",price:799,link:"jianguo?name=art"},{mark:"black",name:"坚果手机黑色版",price:699,link:"jianguo?name=black"}]},{category:"warranty",list:[{mark:"accident",name:"意外保修服务",link:"insurance/information"},{mark:"delay",name:"延长保修服务",link:"insurance/information"}]}];var a=!1,i="",r=$(".sub-nav-fix-panel"),s=function(e){r.find('.js-sub-nav-list li[data-category="'+e+'"]').toggleClass("selected",!0)},l=function(){r.find(".js-sub-nav-list li .js-toggle-nav").parent().removeClass("selected")},c=function(){r.toggleClass("open-nav",!1),$(document).off("click.openSubNav"),a=!1,l(),i=""},u=function(e){r.find(".js-nav-goods-list").toggleClass("on",!1),r.find('.js-nav-goods-list[data-type="'+e+'"]').toggleClass("on",!0)};$(document).on("click",".js-toggle-nav",function(e){var t=$(e.currentTarget),o=$(".js-nav-zoom-panel"),n=t.data("type"),l=t.data("close");return o.length?void o.find(".js-banner-zoom").toggleClass("banner-zoom",!0):l?void c():(n||(n=t.parent("li").data("category")),s(n),a?i==n?c():u(n):(a=!0,r.toggleClass("open-nav",!0),u(n),setTimeout(function(){$(document).on("click.openSubNav",function(e){$(e.target).closest(".js-sub-nav-list").length||c()})},50)),void(i=n))})}}}}]).directive("tempDialog",["$timeout","DialogService",function(e,t){return{restrict:"EA",templateUrl:"view/html/tempDialog.html",link:function(e,o,n,a){o&&t.addDom(n.dialog,o,e)}}}]).directive("tempPaging",["$timeout","StoreConfig","PagingService",function(e,t,o){return{restrict:"EA",templateUrl:"view/html/tempPaging.html",link:function(e,t,n,a){o.addDom(null,t,e)}}}]).directive("uiShoppingService",["$timeout",function(e){return{restrict:"EA",templateUrl:"view/html/tempUiShoppingService.html",link:function(e,t,o,n){}}}]),appsDirectives.directive("cartMain",["$rootScope","$document","$filter","$timeout","CartService","StoreConfig","Config","CartCollection","DialogService","MobileGoodsService","AddCartAnimation",function(e,t,o,n,a,i,r,s,l,c,u){return{restrict:"EA",templateUrl:"view/html/tempMainCart.html",scope:{options:"@options"},link:function(d,p,m,g){var f,h=!1;p&&(d.carts=[],d.num=0,d.isCartLoading=!0,d.render=function(){var e=s.CartCollection.all(),t=a.countCart(),n=[],l=0,c=0,u=0;e.length>0&&angular.forEach(e,function(e,t){"100013608"==e.sku,e.isSell&&(n.push(e),l+=e.num,c+=e.subtotal,e.isMobile&&e.isAccident&&(n.push(e.accident),l+=e.num,c+=e.accident.price*e.num),e.isMobile&&e.isDelay&&(n.push(e.delay),l+=e.num,c+=e.delay.price*e.num),e.isDiscount&&(u+=e.num))});var p=i.goodsDiscount.cover;if(i.useGoodsDiscount&&u>=p.num){var m=p.discount*Math.floor(u/p.num);c-=m}if(e.length||(l=t.num),d.num=l,d.total=c,angular.forEach(n,function(e,t){_.indexOf(["nuts","t2","t1"],e.category)<0?e.isWarranty?e.cartImage=e.image:e.cartImage=r.imgUrl+o("realImage")(e.image,80):e.cartImage=e.image}),d.carts=n,f){var g=_.findIndex(d.carts,{sku:f});if(g>0){var h=d.carts.splice(g,1);d.carts.splice(0,0,h[0])}}$(".layout-sub-header .cart-full-num").toggleClass("cart-full-num-active",!!l)},d.removeCart=function(e){var t=$(e.currentTarget),o=t.closest("li"),n=o.data("id");l.setContent("dialog",{title:"提示",message:"您确认删除该商品吗？",cancelText:"返回",hasCancel:!0,doneText:"是",dialogClass:"module-dialog-confirm"}),l.open("dialog",function(){var e=o.data("mobile"),t=s.CartCollection.get({id:e});if(e&&t&&c.mapWarrantys[n]){var i=t,r={sku:e,num:i.num,warranty:i.warranty?i.warranty+"":null};r.warranty&&(r.warranty=r.warranty.replace(n,"").replace(/^\:|\:$/gi,"")),a.updateCart(r)}else a.removeCart(n),d.render();l.close()})},d.getList=function(e){var t=null;t=setTimeout(function(){a.syncList().then(function(e){d.isCartLoading=!1,clearTimeout(t),d.render()},function(e){a.getLocalList().then(function(e){d.isCartLoading=!1,clearTimeout(t),d.render()},function(e){})})},20)},n(function(){d.render()},50),p.on("mouseenter",function(e){e.preventDefault(),d.$apply(function(){d.getList()}),$(this).addClass("cart-label-hover")}).on("mouseleave",function(e){e.preventDefault(),$(this).removeClass("cart-label-hover")}),t.on("click",function(e){var t=$(e.target);t.closest(".js-add-cart").is(".js-add-cart")||t.closest("#js-main-cart-panel").is("#js-main-cart-panel")||$("#js-main-cart-panel").removeClass("cart-label-hover")}),e.$on("cart",function(e,t){if(t&&angular.isObject(t))switch(t.name){case"addCartInAnimation":h=!0,f=t.sku;break;case"changeCart":case"removeSingleCart":h?n(function(){h=!1,i.csstransitions&&u.pop(),d.isCartLoading=!1,d.render(),h=!1},700):n(function(){d.render()},50);break;case"syncList":n(function(){d.getList()},50);break;case"removeCartAll":a.removeAll(!0)}}))}}}]),appsDirectives.directive("iAutoFocus",["$timeout",function(e){return{restrict:"A",require:"ngModel",link:function(t,o,n,a){o&&e(function(){o.focus()},10)}}}]).directive("selectOn",["$timeout",function(e){return{restrict:"A",require:"ngModel",link:function(t,o,n,a){t.$watch(n.selectOn,function(t){t&&e(function(){o.select()},10)})}}}]).directive("iFocus",[function(){var e="i-focused";return{restrict:"A",require:"ngModel",link:function(t,o,n,a){a.$focused=!1,a.$blurred=!1,o.on("focus",function(n){o.addClass(e),t.$apply(function(){a.$focused=!0})}).on("blur",function(n){o.removeClass(e),t.$apply(function(){a.$focused=!1,a.$blurred=!0})}).on("keydown",function(e){t.$apply(function(){a.$blurred=!1})})}}}]).directive("iInput",function(){return{restrict:"A",require:"ngModel",link:function(e,t,o,n){t.on("focus",function(){$(this).parent(".input").addClass("module-form-item-shadow"),!jQuery.support.opacity}),t.on("blur",function(){$(this).parent(".input").removeClass("module-form-item-shadow"),$(this).val()||$(this).prev(".placeholder").show()}),t.on("keydown input",function(t){if($(this).prev(".placeholder").hide(),13!=t.which)switch(n.$submitted=!1,e.util.submitted=!1,e.errAnimation={},angular.forEach(e.focus,function(t,o){e.focus[o]=!1}),n.$name){case"cdkeycode":e.invalid.cdkeycodeValid=!0;break;case"captcha":e.invalid.captchaValid=!0,e.invalid.captchaReload=!0;break;case"password":e.invalid.passwordValid=!0;break;case"oldpassword":e.invalid.oldpasswordValid=!0;break;case"mobile":e.invalid.mobileRegistered=!0;break;case"mail":e.invalid.emailRegistered=!0;break;case"nickname":e.invalid.nickname=!0,e.invalid.nicknameRegistered=!0,e.invalid.nicknameIllegal=!0;break;case"verification":e.invalid.mobileCaptchaValid=!0,e.invalid.mobileCaptchaReload=!0;break;case"answer1":case"answer2":e.invalid.answerInvalid=!0}}),e.$watch("util.submitted",function(e){e&&(n.$submitted=!0,n.$blurred=!0)})}}}).directive("iCdkeycode",["Config","$timeout",function(e,t){return{restrict:"A",require:"ngModel",link:function(o,n,a,i){t(function(){i.$parsers.push(function(t){return e.regExp.numOrEn.test(t)?($(n).parent(".input").removeClass("module-form-item-shadow"),$(n).parent(".input").addClass("focus-item"),i.$setValidity(i.$name,!0),t):($(n).parent(".input").removeClass("focus-item"),void i.$setValidity(i.$name,!1))})},20)}}}]).directive("iResponse",["$timeout",function(e){return{restrict:"A",require:"ngModel",link:function(e,t,o,n){switch(n.$name){case"cdkeycode":e.$watch("invalid.cdkeycodeValid",function(e){e="undefined"==typeof e?!0:e,e?n.$setValidity("cdkeycodeValid",!0):n.$setValidity("cdkeycodeValid",!1)});break;case"captcha":e.$watch("invalid.captchaValid",function(e){e="undefined"==typeof e?!0:e,e?($(t).parent(".input").addClass("focus-item"),n.$setValidity("captchaValid",!0)):($(t).parent(".input").removeClass("focus-item"),n.$setValidity("captchaValid",!1))}),e.$watch("invalid.captchaReload",function(e){e="undefined"==typeof e?!0:e,e?n.$setValidity("captchaReload",!0):n.$setValidity("captchaReload",!1)})}}}}]).directive("iWarning",[function(){return{restrict:"A",link:function(e,t,o,n){var a=t.parent(".input");e.$watch(o.iWarning,function(e,o){!!e!=!!o&&(e?(a.addClass("module-small-error-wrapper"),jQuery.support.opacity?t.stop().show().animate({opacity:1},{queue:!1,duration:300}):t.stop().show()):(a.removeClass("module-small-error-wrapper"),jQuery.support.opacity?t.stop().animate({opacity:0},{duration:300,done:function(){t.hide()}}):t.stop().hide()))})}}}]).directive("iEnter",[function(){return function(e,t,o,n){t.bind("keydown keypress",function(t){13==t.which&&(e.$apply(function(){e.$eval(o.iEnter,{event:t})}),t.preventDefault())})}}]),appsServices.factory("AddCartAnimation",["$rootScope","$collection",function(e,t){function o(e){var t=this,o={mask:".addcart-mask",maskY:".mask-y",maskX:".mask-x",maskItem:".mask-item",el:".content",button:".blue-title-btn",cartLabel:".cart-label",cartIcon:".cart-link",cartNumber:".cart-num",cartEmptyNumber:".cart-empty-num",cartFullNumber:".cart-full-num",speedTime:300};t.settings=$.extend(o,e||{}),t.len_x=0,t.len_y=0,t.slidTime=0,t.bounceMoreY=45,t.itemToCart=!0,$.each(t.settings,function(e,o){t.settings[e]=$.trim(o)}),t.isRunning=!1}return o.prototype.init=function(e,t){var o=this;o.isRunning||(t=t||"",o.$mask=$(o.settings.mask),o.$maskY=o.$mask.find(o.settings.maskY),o.$maskX=o.$mask.find(o.settings.maskX),o.$maskItem=o.$mask.find(o.settings.maskItem),o.$el=$(o.settings.el),o.$button=o.$el.find(o.settings.button),o.$cartLabel=$(o.settings.cartLabel),o.$cartIcon=o.$cartLabel.find(o.settings.cartIcon),o.$cartNumber=o.$cartLabel.find(o.settings.cartNumber),o.$cartEmptyNumber=o.$cartNumber.find(o.settings.cartEmptyNumber),o.$cartFullNumber=o.$cartNumber.find(o.settings.cartFullNumber),t&&o.$maskItem.css({"background-image":"url( "+t+")"}))},o.prototype.start=function(){var e=this;e.maskWidth=e.$cartIcon.offset().left+22-(e.$button.offset().left+e.$button[0].clientWidth/2),e.maskHeight=Math.abs(e.$cartIcon.offset().top+10-(e.$button.offset().top+e.$button[0].clientHeight/2)),e.len_x=Math.abs(e.maskWidth/279)/10,e.len_y=Math.abs(e.maskHeight/360)/10,e.slidTime=Math.max(e.len_x,e.len_y),e.$mask.show(20),setTimeout(function(){e.isRunning=!0,e.$mask.css({width:e.maskWidth,height:e.maskHeight}),setTimeout(function(){e.slidInto()},20),setTimeout(function(){e.reset()},e.itemToCart?900:900+1e3*e.slidTime)},30)},o.prototype.getIsRunnng=function(){var e=this;return e.isRunning},o.prototype.slidInto=function(){var e=this;e.itemToCart?e.$maskY.addClass("mask-y1"):e.$maskY.css({transform:"translateY(-"+(e.maskHeight+e.bounceMoreY)+"px)",transition:"transform "+(.3+e.slidTime)+"s cubic-bezier(0,0,.58,1)"}),e.itemToCart?e.$maskX.addClass("mask-x1"):e.$maskX.css({transform:"translateX("+e.maskWidth+"px)",transition:"transform "+(.45+e.slidTime)+"s cubic-bezier(0, 0, 1, 1)"}),e.$maskItem.addClass("mask-item1");var t=!1;e.$maskY.on("webkitTransitionEnd transitionend",function(o){var n=$(o.target);n.hasClass(e.settings.maskY.substr(1))&&!t&&(t=!0,e.itemToCart?e.$maskY.addClass("mask-y2"):e.$maskY.css({transform:"translateY(-"+e.maskHeight+"px)",transition:"transform 0.2s cubic-bezier(0,0,.58,1)"}),$(this).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"))}),setTimeout(function(){e.$maskItem.addClass("mask-item2"),e.$cartLabel.addClass("cart-label-hover")},e.itemToCart?600:400+1e3*e.slidTime)},o.prototype.pop=function(){var e=this;e.$cartNumber.addClass("cart-num-active"),e.$cartFullNumber.addClass("cart-full-num-active")},o.prototype.menuHide=function(){var e=this;e.$cartLabel.removeClass("cart-label-hover")},o.prototype.reset=function(){var e=this;e.itemToCart?(e.$maskY.removeClass("mask-y1 mask-y2"),e.$maskX.removeClass("mask-x1")):(e.$maskY.removeAttr("style"),e.$maskX.removeAttr("style")),e.$maskItem.removeClass("mask-item1 mask-item2"),e.$cartNumber.removeClass("cart-num-active"),e.$mask.hide(20),e.isRunning=!1},new o({el:".store-content",button:".item-wrapper .blue-title-btn",cartLabel:".layout-sub-header .cart-label"})}]);