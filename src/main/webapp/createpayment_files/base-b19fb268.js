"use strict";window.Store.addFilter(function(e,t){function o(){}return o.prototype.json=function(e,t,o){return JSON.stringify(o)},o.prototype.rmb=function(e,t,o){if(void 0==e)return 0;var n=e+"",i=n,a="";if(n.match(/[^\d\.]/))return e;n.match(/\./)&&(i=n.replace(/\..*$/gi,""),a=n.replace(/^[^\.]+\.?/gi,""),a=a.replace(/^(\d{1,2})\d*/,"$1"),a=2==a.length?a:a+"0");for(var r=i.split("").reverse(),s=[],c=0;c<r.length;c++)c%3==0&&s.push(","),s.push(r[c]);var l=s.reverse().join("").replace(/\,$/gi,"");return l=o?l:"¥ "+l,("boolean"==typeof t&&t||"true"==t)&&(l=l+"."+(""==a?"00":a)),l},o.prototype.decimal=function(e,t){var o=this,n=o.rmb(e,t),i=n.indexOf("¥ ");return n=i>=0?n.substr(i+2):n},o.prototype.rmbCount=function(e,t,o){var e=e||0,t=t||0;return o?(100*e+100*t)/100:(100*e-100*t)/100},o.prototype.floatNumber=function(e,t){var o=e+"",n=o,i="";return o.match(/[^\d\.]/)?e:(o.match(/\./)&&(n=o.replace(/\..*$/gi,""),i=o.replace(/^[^\.]+\.?/gi,""),i=i.replace(/^(\d{1,2})\d*/,"$1"),i=2==i.length?i:i+"0"),t?n+"."+(""==i?"00":i):n+"."+(""==i?"00":i)-0)},o.prototype.codeTelephone=function(e){var t="";return e&&(e=""+e,t=e.replace(/^(\d{3})\d{5}/g,function(e,t){return t+"*****"})),t},o.prototype.ellipsis=function(t,o){var t=t+"",n="",i=t.replace(/[^\x00-\xff]/g,">>");if(i.length<=2*o)return t;var a=i.substr(0,2*o).split(">>"),r=0;return e.each(a,function(e,o){""==o?(n+=t.substr(r,1),r++):(n+=t.substr(r,o.length),r+=o.length)}),n+"..."},o.prototype.emailLocation=function(e){var o="";return e&&(e=""+e,o=e.replace(/^.+\@/g,""),o=t.config.mailUrl[o]?t.config.mailUrl[o]:"http://mail."+o),o},o.prototype.boolShow=function(e){var t="fn-hide";return e&&(t=" "),t},o.prototype.boolClass=function(e,t,o){var n="";return n=e?t||" ":o||" "},o.prototype.boolResult=function(e,t,o){var n="";return n=e?t||" ":o||" "},o.prototype.nextDate=function(e){var t=new Date,e=0|e;return t.setDate(t.getDate()+e),t},o.prototype.timestamp=function(e){if(e){if(e+="",e.length>13)throw Error("method ==> filter timestamp: date is error");return e*=Math.pow(10,13-e.length),e-=0}return 0},o.prototype.date=function(e,t){var e=this.timestamp(e);if(e){var t=t,o=new Date(e),n=o.getFullYear(),i=o.getMonth()+1+"",a=o.getDate()+"",r=o.getHours()+"",s=o.getMinutes()+"",c=o.getSeconds()+"";switch(i=2==i.length?i:"0"+i,a=2==a.length?a:"0"+a,r=2==r.length?r:"0"+r,s=2==s.length?s:"0"+s,c=2==c.length?c:"0"+c,t){case"year":t="YYYY 年 MM 月 DD 日";break;case"date":t="M 月 D 日 hh-mm"}return t=t.replace("YYYY",n),t=t.replace("MM",i),t=t.replace("M",i.replace(/^0{1}/gi,"")),t=t.replace("DD",a),t=t.replace("D",a.replace(/^0{1}/gi,"")),t=t.replace("hh-mm","hh:mm"),t=t.replace("hh",r),t=t.replace("mm",s),t=t.replace("ss",c)}return" "},o.prototype.realtime=function(e,t){if(e||0==e){var o=Math.floor(e/24/60/60),n=e-24*o*60*60,i=Math.floor(n/60/60),a=n-60*i*60,r=Math.floor(a/60),s=a-60*r,c="",l="",p="",u="";switch(t){case"date":c=o,l=":"+(10>i?"0"+i:i),p=":"+(10>r?"0"+r:r),u=":"+(10>s?"0"+s:s);break;case"day":o>0?c=o+" 天":i>0?l=i+" 小时":r>0?p=r+" 分钟":u=s+" 秒";break;default:c=o>0?" "+o+" 天":"",l=i>0||o>0?" "+i+" 小时":"",p=r>0||o>0||i>0?" "+r+" 分钟":"",u=" "+s+" 秒"}return c+l+p+u}return" "},o.prototype.remainingtime=function(e,t,o){var n=this,e=this.timestamp(e),t=this.timestamp(t);if(e){var i=Math.floor(Math.abs(t-e)/1e3);return n.realtime(i,o)}return" "},o.prototype.countdown=function(e){var o=t.loop["countdown"+ +new Date]=setInterval(function(){return t.isFunction(e.abort)&&!e.abort()?(clearInterval(o),!1):(e.$label.text(t.isFunction(e.format)?e.format(e.time):e.time),void(e.time<=0?("function"==typeof e.callback&&e.callback(),clearInterval(o)):e.time--))},1e3)},o.prototype.retinaImage=function(e,o){if(e){var n=t.config.isRetina;if(n){var i=e.split("/"),a=i.pop().replace("@2x","").replace(/(\.[^.]+)$/,"@2x$1"),r=i.join("/");return o?r+"/"+a:r+"/retina/"+a}return e}return""},o.prototype.goodsImage=function(e,o,n){var n=n||"jpg";if(e){if(e.indexOf(".png")>-1)return e;var i=t.config.isRetina,a=t.config.imgUrl+e+o+"X"+o;return a+=i?"@2x."+n:"."+n}return""},o.prototype.realImage=function(e,o,n){var n=n||"jpg";if(e){if(t.isString(e)&&e.indexOf(".png")>-1)return e;var i=t.config.isRetina,a="";return t.isString(e)&&(a=i?e+o+"X"+o+"@2x."+n:e+o+"X"+o+"."+n),t.isObject(e)&&(a=i?e["2x"]+o+"X"+o+"@2x."+n:e["1x"]+o+"X"+o+"."+n),a}return""},o.prototype.renameImage=function(e,o){if(e){if(e.indexOf(".png")>-1)return e;var n=(t.config.isRetina,"");return n=e+o+"@2x.jpg"}return""},o.prototype.mobileStock=function(t,o){var n=!1;return e.each(t,function(e,t){return t.stock?(n=!0,!1):void 0}),n?"":o},o.prototype.subString=function(e,t){e=e||"";var o=/[^\x00-\xff]/g;if(e.replace(o,"mm").length<=t)return e;for(var n=Math.floor(t/2),i=n;i<e.length;i++)if(e.substr(0,i).replace(o,"mm").length>=t)return e.substr(0,i)+"..";return e+".."},o}(window.jQuery||window.Zepto,window.Store)),window.Store.addUI(function(e,t){function o(){var e=this;e.OrderProcessService=null}return o.prototype.init=function(){},o.prototype.shoppingService=function(e){var o=ct.get("uiShoppingService",!0);return ct.compile(o,{postageTerm:t.config.postageTerm})},o.prototype.categoryNav=function(e,t){var o=ct.get("cmCategoryNav",!0),t=0|t;return ct.compile(o,{categoryList:e,curCategory:t})},o.prototype.chooseInvoice=function(e,o){var n=ct.get("cmChooseInvoice",!0);return ct.compile(n,{isCheckout:o,useWebInvoice:t.config.useWebInvoice,deliveryLabel:e},!1,!0)},o.prototype.captcha=function(e){var o=ct.get("uiCaptcha",!0),n=+new Date;return ct.compile(o,{captchaSrc:t.config.captcha[e]+"&"+n,type:e},!1)},o.prototype.checkbox=function(e,t,o){var o=o||"blue-checkbox",n=ct.get("uiCheckbox",!0);return ct.compile(n,{name:e,value:t,className:o},!1,!0)},o.prototype.radio=function(e,t,o){var o=o||"blue-radio",n=ct.get("uiRadio",!0);return ct.compile(n,{name:e,value:t,className:o},!1,!0)},o.prototype.orderProcess=function(o){for(var n=ct.get("uiOrderProcess",!0),i=t.getService("OrderProcess"),a=i.getProcess(o),r=o.processCurrent-1,s=100/(a.step-1),c={width:r*s+"%",data:[]},l=0,p=a.process.length;p>l;l++){var u=e.extend({},a.process[l],{isDone:r>=l,isCurrent:r==l,width:s+"%",position:-s/2+s*l+"%"});c.data.push(u)}return ct.compile(n,c)},o.prototype.mCommonTitle=function(e,t,o){var n=ct.get("mobileCommonTitle",!0),i={title:e,useBack:t,hideListBtn:o};return ct.compile(n,i)},o}(window.jQuery||window.Zepto,window.Store)),window.Store.addPlugin("UI",function(e,t){function o(){var e=this;e.ScrollbarPlugin=null}return o.prototype.init=function(){var e=this;e.ScrollbarPlugin=t.getPlugin("Scrollbar")},o.prototype.chooseInvoice=function(e){var o=this,n=e.styleWrapper,i=e.typeWrapper,a=e.styleDefault?e.styleDefault:t.config.useWebInvoice?2:0,r=e.typeDefault||0,s={},c=o.radio({wrapper:i,name:"invoice_type",checked:r,callback:function(e,o){var n=o.wrapper.find(".module-form-row"),i=n.find("input");e.closest(".js-invoice-item").toggleClass("invoice-item-selected",!0).siblings().toggleClass("invoice-item-selected",!1),1==e.data("id")?(i.toggleClass("js-verify",!0),n.show(),t.config.opacity?n.css({opacity:0}).animate({opacity:1},200,function(){i.focus()}):i.focus()):(i.toggleClass("js-verify",!1),t.config.opacity?n.animate({opacity:0},200,function(){n.hide()}):n.hide())}}),l=o.radio({wrapper:n,name:"invoice_style",checked:a,callback:function(e,t){var o=e.val(),n=i.find(".js-invoice-item:last");0==o?(c.on(r),n.show()):(c.on(0),n.hide())}});return s.chooseStyle=l,s.chooseType=c,s},o.prototype.chooseTags=function(o){var n=o.$wrapper,i=o.$tagList||n.find(".tag-list"),a=o.$conList||n.find(".con-list"),r=o.tagSelectClass||"select-tag",s=o.conSelectClass||"select-con";n.data("init-choose-tags")||(n.data("init-choose-tags",!0),i.on("click",".tag-item",function(){var n=e(this);if(!n.hasClass(r)){n.siblings().toggleClass(r,!1),n.toggleClass(r,!0);var i=n.index(),c=a.find(".con-item").eq(i);a.find(".con-item").toggleClass(s,!1),c.toggleClass(s,!0),t.isFunction(o.tagFn)&&o.tagFn(n,c)}}),i.find(".tag-item:first").click())},o.prototype.captcha=function(o){var n=o.wrapper,i=o.box||".verifycon";n.data("init-captcha")||(n.data("init-captcha",!0),n.on("click",i,function(){var o=e(this).find("[data-ui-captcha]"),n=+new Date,i=t.config.captcha[o.data("type")];i=i.replace(/\&*$/gi,""),o.attr("src",i+"&"+n)}))},o.prototype.radio=function(t){var o=t.wrapper,n=t.name,i=t.normalClass||"blue-radio",a=t.checkedClass||"blue-radio-on";return o.data("init-"+n)||(o.data("init-"+n,!0),o.on("change",'[name="'+n+'"]',function(){var r=e(this);return r.next("."+i+'[data-radio-name="'+n+'"]').hasClass(a)?!1:(o.find("."+a+'[data-radio-name="'+n+'"]').removeClass(a),r.next("."+i+'[data-radio-name="'+n+'"]').toggleClass(a,!0),void("function"==typeof t.callback&&t.callback(r,t)))}).on("click","."+i+'[data-radio-name="'+n+'"]',function(){var t=e(this).prev("input");return t.prop("checked")?!1:(o.find('[name="'+n+'"]:checked').prop("checked",!1),void t.prop("checked",!0).change())}),void 0!==t.checked?o.find('input[name="'+n+'"][data-id="'+t.checked+'"]').prop("checked",!0).change():!t.notDefault&&o.find('input[name="'+n+'"]:first').prop("checked",!0).change()),{on:function(e){var n=o.find('[name="'+t.name+'"][data-id="'+e+'"]');return n.prop("checked")?!1:(n.prop("checked",!0).change(),void("function"==typeof t.callback&&t.callback(n,t)))},clear:function(){var e=o.find('[name="'+t.name+'"]');e.prop("checked",!1).change()},choosed:function(){return{id:o.find('[name="'+t.name+'"]:checked').data("id")+""}}}},o.prototype.checkbox=function(o){var n,i=this,a=o.wrapper,r=o.name,s=o.normalClass||"blue-checkbox",c=o.checkedClass||"blue-checkbox-on",l=o.disableClass||"blue-checkbox-disable",p={disabled:function(t){var t=void 0===t?void 0:t.constructor===Array?t:[t];t?e.each(t,function(e,t){var n=a.find('[name="'+o.name+'"][data-id="'+t+'"]');n.next("."+s).toggleClass(s,!1).toggleClass(l,!0)}):a.find("."+s+'[data-checkbox-name="'+r+'"]').toggleClass(s,!1).toggleClass(l,!0)},on:function(t,n){var n=n||("function"==typeof t?t:void 0),t=t&&"function"!=typeof t?t.constructor===Array?t:[t]:void 0;t?(e.each(t,function(e,t){var i=a.find('[name="'+o.name+'"][data-id="'+t+'"]');n?(i.prop("checked",!0),i.next("."+s).toggleClass(c,!0)):i.prop("checked",!0).change()}),n&&n()):n?(a.find('[name="'+o.name+'"]').prop("checked",!0),a.find("."+s+'[data-checkbox-name="'+r+'"]').toggleClass(c,!0),n&&n()):a.find('[name="'+o.name+'"]').each(function(){e(this).prop("checked",!0).change()})},off:function(t,n){var n=n||("function"==typeof t?t:void 0),t=t&&"function"!=typeof t?t.constructor===Array?t:[t]:void 0;t?(e.each(t,function(e,t){var i=a.find('[name="'+o.name+'"][data-id="'+t+'"]:checked');n?(i.prop("checked",!1),i.next("."+s).toggleClass(c,!1)):i.prop("checked",!1).change()}),n&&n()):n?(a.find('[name="'+o.name+'"]').prop("checked",!1),a.find("."+s+'[data-checkbox-name="'+r+'"]').toggleClass(c,!1),n&&n()):a.find('[name="'+o.name+'"]:checked').each(function(){e(this).prop("checked",!1).change()})},choosed:function(){var t=[];return a.find('[name="'+o.name+'"]:checked').each(function(){t.push({id:e(this).data("id")+""})}),t},all:function(){var t=[];return a.find('[name="'+o.name+'"]').each(function(){t.push({id:e(this).data("id")+""})}),t},changeStatus:function(e,t){}};if(o.useAll&&o.allName&&(n=i.checkbox({wrapper:a,name:o.allName,normalClass:s,checkedClass:c,callback:function(e){var t=e.prop("checked");t?p.on():p.off()}}),p.allCtrl=n),!a.data("init-"+r)&&(a.data("init-"+r,!0),a.on("change",'[name="'+r+'"]',function(){var t=e(this);if(t.next("."+s).toggleClass(c,t.prop("checked")),n){var i=a.find('input[name="'+o.allName+'"]');p.all().length==p.choosed().length?(i.prop("checked",!0),i.next("."+s).toggleClass(c,!0)):(i.prop("checked",!1),i.next("."+s).toggleClass(c,!1))}"function"==typeof o.callback&&o.callback(t)}).on("click","."+s+'[data-checkbox-name="'+r+'"]',function(){var t=e(this).prev("input");t.prop("checked",!t.prop("checked")).change()}),void 0!==o.checked)){var u=t.isArray(o.checked)?o.checked:o.checked.split(",");e.each(u,function(e,t){a.find('input[name="'+r+'"][data-id="'+t+'"]').prop("checked",!0).change()})}return p},o.prototype.select=function(t){var o=this,n=e.extend({wrapper:e(".wrapper"),data:{},callback:{}},t),i=n.wrapper,a=[];a.push('<div class="ui-select">'),a.push("<label>请选择</label>"),a.push('<img src="img/i.gif" class="ui-select-icon" />'),a.push('<div class="ui-select-menu js-scroll-wrapper">'),a.push('<ul class="js-scroll-container"></ul>'),a.push('<div class="scrollbar js-scroll-sidebar">'),a.push('<div class="scrollbar-block js-scroll-block"></div>'),a.push("</div>"),a.push("</div>"),a.push("</div>"),i.find("select").each(function(){var t=e(this);if(!t.data("init")){t.data("init",!0);var i=e(a.join(""));t.after(i);var r=t.next();t.hide(),t.data("class")&&r.addClass(t.data("class"));var s=n.callback[t.data("medth")];"function"==typeof s&&r.data("callback",s);var c=n.data[t.data("data")];if(!c)throw new Error('ui select data "'+t.data("data")+'" is not found !!!');o.changeSelectData(c,r,t),o.ScrollbarPlugin.bind(r,25)}}),i.data("init")||(i.data("init",!0),i.on("change","select",function(){var t=e(this),o=t.next();"function"==typeof o.data("fn")&&o.data("fn")(t,o)}),i.on("click",".ui-select",function(t){var o=e(this).find(".ui-select-menu");e(t.target).hasClass("ui-select-menu")||o.fadeIn(100,function(){e(document).on("click",function(t){e(t.target).hasClass("scrollbar-block")||(o.fadeOut(200),e(document).off("click"))})})}),i.on("click",".js-ui-select-option",function(){var t=e(this),o=t.closest(".ui-select"),n=o.prev("select");o.find("label").text(t.data("label")),o.data("value",t.data("value")),n.children('option[value="'+t.data("value")+'"]').select()}))},o.prototype.changeSelectData=function(t,o,n){var i=n.data("labelName")||"label",a=n.data("valueName")||"value",r=['<li class="js-ui-select-option" data-value="0" data-label="请选择">请选择</li>'],s=['<option value="0">请选择</option>'];e.each(t,function(e,t){r.push('<li class="js-ui-select-option" data-value="'+t[a]+'" data-label="'+t[i]+'">'+t[i]+"</li>"),s.push('<option value="'+t[a]+">"+t[i]+"</option>")}),o.find("ul").html(r.join("")),n.html(s.join(""))},o.prototype.loadingBtn=function(e){e.children().length?e.children():e;e.on("click",function(t){return e.hasClass("js-status-loading")?(t.stopPropagation(),!1):void 0});var t={loading:function(){e.toggleClass("js-status-loading",!0)},reset:function(){e.toggleClass("js-status-loading",!1)}};return t},new o}(window.jQuery||window.Zepto,window.Store)),window.Store.addView("FileUpload",function(){function e(){var e=this;e.base={$file:$("input:file"),url:"/",alias:"file",headers:{},queue:[],progress:0,autoUpload:!1,removeAfterUpload:!1,method:"POST",filters:{},formData:[],queueLimit:Number.MAX_VALUE,withCredentials:!1},e.queue=[],e._failFilter="",e.jqxhr=null}return e.prototype.init=function(e){var t=this;if(t.options=$.extend({},t.base,e),!e.$file.length)throw new Error("file input is not exist!!!");e.$file.on("change",function(e){var o=t.isHTML5?e.target.files:e.target;t.queue=[],t.addQueue(o)})},e.prototype.isHTML5=!(!window.File||!window.FormData),e.prototype.addQueue=function(e){for(var t=this,o="object"==typeof e&&void 0!=e.length?e:[e],n=(t.queue.length,[]),i=0,a=o.length;a>i;i++){var r=new t._FileItem(t,o[i]);if(!t.isValidFile(r)){t._onAddingFailed(r,t.options.filters[t._failFilter],t);break}n.push(r),t.queue.push(r),t._onAfterAddingFile(r)}},e.prototype.isValidFile=function(e){var t=this,o=t.options.filters,n=!0;for(var i in o){if("function"!=typeof o[i].fn){t._failFilter=i;break}if(!o[i].fn(e.file,t)){t._failFilter=i,n=!1;break}}return n},e.prototype._onAddingFailed=function(e,t,o){this.onAddingFailed(e,t,o)},e.prototype._onAfterAddingFile=function(e){this.onAfterAddingFile(e)},e.prototype._onBeforeUploadItem=function(e){e._onBeforeUpload(),this.onBeforeUploadItem(e)},e.prototype._onCompleteItem=function(){this.onCompleteItem()},e.prototype._onCompleteAll=function(){this.onCompleteAll()},e.prototype.onAddingFailed=function(e,t,o){},e.prototype.onAfterAddingFile=function(e){},e.prototype.onBeforeUploadItem=function(){},e.prototype.onProgressItem=function(e,t){},e.prototype.onCancelItem=function(){},e.prototype.onSuccessItem=function(e){},e.prototype.onErrorItem=function(){},e.prototype.onCompleteItem=function(){},e.prototype.onCompleteAll=function(){},e.prototype.uploadItem=function(e){var t=this;e.isUploading||(t._onBeforeUploadItem(e),t.isHTML5?t._ajaxUpload(e):t._iframeUpload(e))},e.prototype._ajaxUpload=function(e){var t=this,o=new FormData;$.each(e.formData,function(e,t){$.each(t,function(e,t){o.append(e,t)})}),e.file.name=encodeURIComponent(e.file.name),o.append(e.alias,e._file,e.file.name),t.jqxhr=$.ajax({url:t.options.url,data:o,cache:!1,contentType:!1,processData:!1,type:"POST",xhr:function(){var o=$.ajaxSettings.xhr();return o&&o.upload.addEventListener("progress",function(o){var n=Math.round(100*o.loaded/o.total);t.onProgressItem(e,n)},!1),o}}).success(function(o){"string"==typeof o&&(o=JSON.parse(o)),t.onSuccessItem(e,o)}).error(function(e,o,n){t.onErrorItem()}).complete(function(o,n){t._onCompleteItem(e,o)})},e.prototype._iframeUpload=function(e){var t=this,o=$("<form />"),n=$('<iframe class="fn-hide" name="iframeFileUpload'+ +new Date+'">');$.each(e.formData,function(e,t){$.each(t,function(e,t){o.append($('<input type="hidden" name="'+e+'" value="'+t+'" />'))})}),o.prop({action:e.url,method:"POST",target:n.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),n.on("load",function(){var o='{"code : 1"}',i=/(\{.*\})/;try{o=n[0].contentDocument.body.innerHTML}catch(a){}var r=o.match(i);if(o&&r){o=r[0];var s={response:JSON.parse(o),status:200,dummy:!0},c=s.response,l={};t.onSuccessItem(e,c,s.status,l),t._onCompleteItem(e,c,s.status,l)}}),e.$file.after(o),o.append(e.$file).append(n),o[0].submit()},e.prototype._FileItem=function(e,t){var o=this;!e.isHTML5&&(t=$(t).val()),$.extend(o,e.base,e.options,{uploader:e,file:new e._FileInfo(t,e),isReady:!1,isUploading:!1,isUploaded:!1,isSuccess:!1,isCancel:!1,isError:!1,progress:0,index:null,_file:t})},e.prototype._FileItem.prototype={_onBeforeUpload:function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0},upload:function(){this.uploader.uploadItem(this)}},e.prototype._FileInfo=function(e,t){var o=this;t.isHTML5?(o.lastModifiedDate=e.lastModifiedDate,o.size=e.size,o.type=e.type,o.name=e.name):(o.lastModifiedDate=null,o.size=null,o.type="like/"+e.slice(e.lastIndexOf(".")+1).toLowerCase(),o.name=e.slice(e.lastIndexOf("/")+e.lastIndexOf("\\")+2))},e}),window.Store.addPlugin("Paging",function(e,t){function o(){var e=this;e.options={},e.tpl=null,e.pageCount=0,e.page=0}return o.prototype.init=function(){var e=this;e.tpl=ct.get("tempPaging",!0)},o.prototype.render=function(o){var n=this,o=n.options=e.extend({$wrapper:e(".wrapper"),isCenter:!1,useLink:!1,href:"#/",data:{count:200,page_count:15,page:8},callback:null},o),i=t.config.paging,a=o.$wrapper;return n.pageCount=o.data.page_count,n.page=0|o.data.page,n.reset(),a.data("init")||(a.on("click","."+i.pageViewClass+" a",function(){return e(this).parent("li").hasClass(i.selectClass)?!1:(n.page=e(this).data("page"),n.reset(),o.useLink?void 0:("function"==typeof o.callback&&o.callback(n.page,o),!1))}),a.resize(function(){n.reset()})),a.data("init",!0),n},o.prototype.reset=function(e){var o=this,n=o.pageCount,e=e||o.page,i=o.options,a=i.$wrapper,r={useLink:i.useLink,href:i.href,hasFirst:!0,hasEnd:!0,prevPage:1,nextPage:n,pageCount:n,pages:[]},s=a.width(),c=0,l=s,p=t.config.paging;e=0|e,o.page=e,1==e?r.hasFirst=!1:(r.prevPage=e-1,l-=p.prevWidth,l-=p.firstWidth,c=c+p.prevWidth+p.firstWidth),e==n?r.hasEnd=!1:(r.nextPage=e+1,l-=p.nextWidth,l-=p.lastWidth,c=c+p.nextWidth+p.lastWidth);var u=Math.floor(l/p.itemWidth),f=1,d=n;if(d>u){var m=Math.floor(u/2);m>=e?(f=1,d=u):e>=d-m?(f=n-u+1,d=n):(f=e-m+(u%2==0?1:0),d=e+m)}else u=d;for(var h=f,g=d;g>=h;h++)r.pages.push(h);var v=ct.compile(ct.get("tempPaging",!0),r,!0);v.toggleClass("fn-hide",1==n),a.find("."+p.pageViewClass).remove().end().append(v),v.find("a[data-page="+e+"]").parent("li").addClass(p.selectClass),i.isCenter&&v.width(c+u*p.itemWidth)},o.prototype.setHref=function(e){var t=this;e&&(t.options.href=e)},new o}(jQuery,window.Store)),window.Store.addPlugin("Verify",function(e,t){function o(){var e=this;e.domConfig={},e.verifyConfig={},e.verifyError=null,e.verifyDone=null,e.ajaxQueue={length:0},e.formData={}}return o.prototype.init=function(){var e=this;e.domConfig={inputWrapperCssName:"module-form-item-wrapper",inputSmallCssName:"small-item",inputWrapperFocusCssName:"focus-item",inputWrapperErrorCssName:"module-form-error-wrapper",inputSmallErrorCssName:"module-small-error-wrapper",inputWrapperDom:".module-form-item-wrapper",inputDom:".module-form-item-wrapper input",labelDom:"i",tipsDom:".verify-tips",successDom:".verify-success",errorDom:".verify-error"},e.verifyConfig={notNull:{reg:/[^\s|.]/,withName:!0,msg:"必填"},required:{reg:/[^\s|.]/,withName:!0,msg:"必填"},linkRequired:{withName:!0,msg:"必填"},number:{reg:/^\d+$/,msg:"只能是数字"},numOrEn:{reg:/^[0-9a-zA-Z]+$/,msg:"只能是英文或者数字"},errorStr:{reg:/^[^\&\<\>]*$/,msg:"包含非法字符"},maxlength:{msg:"过长"},email:{reg:/^[\w.%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}$/,msg:"邮箱格式错误"},nullOrEmail:{reg:/^.{0}$|^[\w.%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}$/,msg:"邮箱格式错误"},mobile:{reg:/^1[3|4|5|7|8]\d{9}$/,msg:"手机号格式错误"},minMobile:{reg:/^1[3|4|5|7|8]\d{1}[\*|\d]{4}\d{4}$/,msg:"手机号格式错误"},username:{reg:/^1[3|4|5|7|8]\d{9}$|^[\w.%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}$/,msg:"邮箱/手机号格式错误"},password:{reg:/^[\w\\\[\]\:\^\-~!@#$%&*()-+={}|;'",.\/<>?]{6,16}$/,msg:"密码格式错误"},nullOrMobile:{reg:/^.{0}$|^1[3|4|5|7|8]\d{9}$/,msg:"手机号码格式错误"},zip:{reg:/^\d{6}$/,msg:"邮编格式错误"},nullOrTelephoneArea:{reg:/^.{0}$|^0\d{2,3}$/,msg:"格式错误"},nullOrTelephone:{reg:/^.{0}$|^\d{6,8}$/,msg:"格式错误"},notExist:{withName:!0,msg:"不存在"},strRange:{msg:"字符串非法或过长"},ajax:{msg:"已存在"},price:{reg:/^\d+(\.\d{1,2})?$/,msg:"格式错误"},max:{msg:"超过最大值"},imei:{reg:/^\d{14,15}$/,msg:"格式错误"}}},o.prototype.bindForm=function(o){var n=this,i=o.wrapper,a=n.domConfig,r=function(t){var o=e(this),n=o.closest(a.inputWrapperDom);if(n.addClass(a.inputWrapperFocusCssName),"focusin"==t.type){n.find("input").trigger("clearError");var r=n.next(a.tipsDom);n.addClass("module-form-item-shadow"),i.find(a.tipsDom).not(r).fadeOut(),r.fadeIn(200,function(){e(document).off("click",c),e(document).on("click",c)})}},s=function(t){var o=e(this),n=o.closest(a.inputWrapperDom);n.toggleClass(a.inputWrapperFocusCssName,""!=o.val()),e(this).siblings(a.labelDom).toggle(""==o.val()),"focusout"==t.type&&n.removeClass("module-form-item-shadow")},c=function(t){var o=t.target;1!=e(o).closest(".js-verify-item-row").length&&(i.find(a.tipsDom).fadeOut(200),e(document).off("click",c))};i.on("click",a.inputWrapperDom,function(){e(this).find("input").focus()}).on("mouseenter focus",a.inputDom,r).on("mouseleave blur",a.inputDom,s).on("keydown",a.inputDom,function(){e(this).siblings(a.labelDom).hide()}).on("keyup",a.inputDom,function(o){var n=e(this),i=n.val();13!=o.which&&(n.closest(a.inputWrapperDom).removeClass(a.inputSmallErrorCssName+" invalid "+a.inputWrapperErrorCssName),t.config.isNormalIE?n.siblings(a.errorDom).css("opacity",0).animate({opacity:"1"},300):t.config.opacity?setTimeout(function(){n.siblings(a.errorDom).hide()},200):n.siblings(a.errorDom).hide()),i||n.siblings(a.labelDom).show(),n.attr("data-verifyed",!1)}),t.config.isMobile&&t.config.isUC&&i.off("mouseenter focus",a.inputDom,r).off("mouseleave blur",a.inputDom,s),n.usePlaceholder(i)},o.prototype.usePlaceholder=function(o){var n=this,i=n.domConfig;t.config.isMobile&&o.find(i.inputDom).each(function(){e(this).attr("placeholder",e(this).siblings(i.labelDom).text())})},o.prototype.bindVerify=function(o){var n=this,i=e.extend({wrapper:e(".wrapper"),verifyDom:".js-verify",button:e(".button"),beforeVerify:null,success:null,error:null},o),a=i.wrapper,r=n.domConfig;if(n.bindForm({wrapper:a}),a.on("blur verify",i.verifyDom,function(){var t=e(this),o=t.get(0).nodeName,i=t.data("verify"),a="";a=t.val(),"SELECT"==o&&(a="0"==a?"":a),n.parseVer(i,a,t)}),a.on("change","select",function(){"0"!=e(this).val()&&e(this).trigger("clearError")}),a.on("clearError",i.verifyDom,function(){var t=e(this),o=t.closest(r.inputWrapperDom);o.toggleClass(r.inputSmallErrorCssName,!1),""!=t.val()&&t.siblings(r.labelDom).toggle(!1)}),a.on("reset",i.verifyDom,function(){var o=e(this),n=o.data("val")?o.data("val"):"";o.attr("data-verifyed",!1),o.val(n),o.siblings(r.labelDom).show(),o.closest(r.inputWrapperDom).removeClass(r.inputSmallErrorCssName+" invalid "+r.inputWrapperErrorCssName),o.closest(r.inputWrapperDom).removeClass(r.inputWrapperFocusCssName),t.config.opacity||o.siblings(r.errorDom).hide()}),a.on("normal",i.verifyDom,function(){var o=e(this);o.attr("data-verifyed",!1),o.siblings(r.labelDom).hide(),o.closest(r.inputWrapperDom).removeClass(r.inputSmallErrorCssName+" invalid "+r.inputWrapperErrorCssName),t.config.opacity||o.siblings(r.errorDom).hide()}),!i.button)throw new Error("verify button is not exist");return i.button.on("click",function(){var e=!0;if("function"==typeof i.beforeVerify&&(e=i.beforeVerify(i)),0==e)return!1;var o=n.verifyFinsh(i);o?(n.formData=t.getData(a),typeof i.success&&i.success(n,n.formData)):"function"==typeof i.error&&i.error(n.verifyError,n)}),n.verifyAllItems=function(){return n.verifyFinsh(i)},n},o.prototype.useVerify=function(e){var t=e.className||"js-verify";e.dom.toggleClass(t,!0),e.terms&&e.terms.constructor===Array&&e.dom.attr("data-verify",e.terms.join("/"))},o.prototype.removeVerify=function(e){var t=e.className||"js-verify";e.dom.toggleClass(t,!1),e.terms&&e.dom.removeAttr("data-verify")},o.prototype.parseVer=function(t,o,n){var i,a,r,s=this,c=t&&t.match(/(^.*)\:(.+)/);if(c)if(i=c[1],a=c[2].split("/"),""==e.trim(o))if(-1!=e.inArray("notNull",a)){var l=n.attr("data-verify-msg-notnull")||"必填";s.thrown(n,l)}else s.verified(n);else for(var p=0;p<a.length&&(r=s.match(o,i,a[p],n),"ajax"==r||r);p++);},o.prototype.match=function(e,t,o,n){var i,a=this,r=o.match(/^([^\,]+)\,\{?([^\}]+)\}?$/),s=r?r[1]:o,c=a.verifyConfig[s],l="";if(c){if(l=n.attr("data-verify-msg-"+s.toLowerCase())||t+c.msg,c.reg)return c.reg.test(e)?(a.verified(n),!0):(a.thrown(n,l),!1);if(a[s])return i=r?a[s](e,l,n,r[2]):a[s](e,l,n,s),i.result?"ajax"==i.result?i.ajax.done(function(){a.verified(n),delete a.ajaxQueue[i.ajaxID]}).fail(function(){a.thrown(n,i.msg),delete a.ajaxQueue[i.ajaxID]}):a.verified(n):a.thrown(n,i.msg),i.result}else alert(s+": 不是有效的验证条件!!!")},o.prototype.verified=function(e){var o=this,n=o.domConfig,i=e.closest(n.inputWrapperDom);e.attr("data-verifyed",!0),i.removeClass(n.inputWrapperErrorCssName+" invalid"),e.siblings(n.errorDom).hide(),e.siblings(n.successDom).show(),t.config.isNormalIE&&e.siblings(n.errorDom).css("opacity",0).animate({opacity:"1"},300),t.config.opacity&&e.siblings(n.successDom).css("opacity",0).animate({opacity:"1"},300)},o.prototype.thrown=function(e,o,n){var i=this,a=i.domConfig,r=e.closest(a.inputWrapperDom);!n&&e.attr("data-verifyed",!1),!i.verifyError&&(i.verifyError=e),e.siblings(a.errorDom).text(o).show(),e.siblings(a.successDom).hide(),t.config.isNormalIE&&e.siblings(a.errorDom).css("opacity",0).animate({opacity:"1"},300),setTimeout(function(){r.addClass(r.hasClass(a.inputSmallCssName)?a.inputSmallErrorCssName:a.inputWrapperErrorCssName),t.config.isHackIE&&r.addClass("invalid")},1)},o.prototype.reset=function(e,t){var t=t||"js-verify";e.find("."+t).trigger("reset")},o.prototype.verifyFinsh=function(t){var o=this,n=t.wrapper.find(t.verifyDom+'[data-verifyed!="true"]:visible');return n.length&&(o.verifyError=null,o.verifyDone=!1,n.each(function(){e(this).trigger("verify")}),n=t.wrapper.find(t.verifyDom+'[data-verifyed!="true"]:visible'),n.length)?!1:(o.verifyDone=!0,!0)},o.prototype.strRange=function(e,t,o,n){var i=n.split("-")[0],a=n.split("-")[1],r=new RegExp("^[\\S\\.\\s]{"+i+","+a+"}$"),s=(0==i?1:i)+"~"+a+"个字符";return r.test(e)?{result:!0,msg:s}:{result:!1,msg:s}},o.prototype.max=function(e,t,o,n){var e=0|e,n=0|n;return n>=e?{result:!0,msg:t}:{result:!1,msg:t}},o.prototype.ajax=function(o,n,i,a){var r=this,s=(new Date).getTime(),c={},l=t.config.verifyUrlMap[i.data("ajaxType")]||"",p=i.data("ajaxKey").split(","),u=["base"].concat(i.data("ajaxVal").split(","));n=i.data("verify-msg-ajax")||n,c[p[0]]=o;for(var f=1,d=p.length;d>f;f++)c[p[f]]=e("."+u[f]).val();return r.ajaxQueue[s]=mainService.ajax({url:l,data:c,dataType:"jsonp",success:function(){},error:function(){return!1}}),{result:"ajax",ajax:r.ajaxQueue[s],ajaxID:s,msg:n}},new o}(jQuery,window.Store)),window.Store.addPlugin("Scrollbar",function(e,t){function o(){var e=this;e.def={frame:null,wrapper:null,container:null,scrollbar:null,block:null,wrapperHeight:null,containerHeight:null,scrollbarRevise:null}}return o.prototype.init=function(){},o.prototype.create=function(t){var o,n=this,i=e.extend({},n.def,t),a=i.frame,r=i.wrapper,s=i.container,c=i.scrollbar,l=i.block,p=t.wrapperHeight||r.height(),u=t.containerHeight||s.outerHeight(),f=Math.floor(i.scrollbarRevise)||0,d=p-f,m=0,h=0,g=30,v=1;"static"==r.css("position")&&r.css("position","relative"),"static"==s.css("position")&&s.css("position","absolute"),(o=a.data("hamster"))||(o=Hamster(a[0]),a.data("hamster",o)),o.wheel(function(e){e.preventDefault(),y.move(e.deltaY<0?g:-g)}),l.on("mousedown",function(t){t.preventDefault();var o=l.position().top,n=t.pageY,i=0;e(document).on("mousemove",function(e){e.preventDefault(),i=Math.floor(o+e.pageY)-n,i=i>=0?i>=h?h:i:0,l.css("top",i),m=i/p*u,s.css("top",-m)}).on("mouseup",function(t){t.preventDefault(),e(this).off("mousemove")})});var y={isRun:!1,reset:function(e,t){var o=this;return e&&(p=Math.floor(e)),t&&(u=Math.floor(t)),u>p?(o.isRun=!0,c.height(d),v=p/u,l.height(d*v),h=d-d*v,g=.2*h,c.show()):(o.isRun=!1,c.hide()),this},move:function(e){if(!this.isRun)return!1;var t=l.position().top,o=t-e;o=0>o?0:o>h?h:o,l.css("top",o),m=o/d*u,s.css("top",-m)},scrollTop:function(){var e=arguments[0];if(void 0==e)return l.css("top");if("number"==typeof e){var t=e*v,o=h/v,n=e>o?o:e;t=t>h?h:t,l.animate({top:t},400),s.animate({top:-n},400)}}};return y.reset(),y},o.prototype.bind=function(e,t,o){var n=this,i=e.find(".js-scroll-wrapper"),a=i.find(".js-scroll-container"),r=e.find(".js-scroll-sidebar"),s=r.find(".js-scroll-block"),c=e.data("scrollRevise"),l=n.create({frame:e,wrapper:i,container:a,scrollbar:r,wrapperHeight:t,containerHeight:o,block:s,scrollbarRevise:c||20});return e.data("ui-scroll",l),l},new o}(jQuery,window.Store)),window.Store.addPlugin("Dialog",function(e,t){function o(){var t=this;t.def={mark:"",isLayer:!0,isCenter:!1,once:!1,top:!1,title:"标题",dialogClass:"",doneText:"确定",cancelText:"取消",template:"",templateUrl:"",templateData:null,hasBtn:!0,useBtn:!1,hasCancel:!0,params:{},content:null,done:null,cancel:null,closeFn:null},t.dialogs={length:0},t.showList=[],t.$maskLayer=e('<div class="module-dialog-layer"></div>')}return o.prototype.init=function(){var t=this;e("body").append(t.$maskLayer),e(document).on("keydown",function(o){if(t.showList.length){var n=t.showList[t.showList.length-1];if(27==o.which)n.config.$close.click();else if(13!=o.which||"dialogDefaultMessage"!=n.config.mark&&"dialogDefaultConfirm"!=n.config.mark){if(8==o.which&&0==e("input:focus").length)return!1}else n.config.$done.click()}}).on("mousewheel",function(){return t.showList.length?!1:void 0})},o.prototype.create=function(t){var o=this,n=e.extend({},o.def,t),i=n,a="function"==typeof n.content?!0:!1,r="function"==typeof n.done?!0:!1,s="function"==typeof n.cancel?!0:!1,c="function"==typeof n.closeFn?!0:!1;i.__index=1e4,e.extend(i,i.params),i.hideBtn=n.hasBtn?"":"fn-hide",i.hideCancelBtn=n.hasCancel?"":"fn-hide",i.baseTemplate="",i.defer=null,i.template?(i.templateHtml=i.template,i.baseTemplate=i.template):i.defer=ct.get(i.templateUrl);var l=ct.get("tempDialog",!0),p=e(ct.compile(l,i)),u=null;

i.$dialog=p,i.$title=p.find(".js-dialog-title"),i.$con=p.find(".js-dialog-container"),i.$done=p.find(".js-dialog-done"),i.$close=p.find(".dialog-close"),i.$cancel=p.find(".js-dialog-cancel");var f=o.dialogs[i.mark]={config:i,dom:p,isOpen:!1,isVisible:!1};return o.dialogs.length++,e("body").append(p),i.$=function(e){return i.$con.find(e)},i.positionCenter=function(){return o._positionCenter(f),i},i.setCloseAction=function(e){"function"==typeof e&&(u=e)},i.setDialog=function(t){i.defer?i.defer.done(function(){e.isFunction(t)&&t(i)}):e.isFunction(t)&&t(i)},i.show=function(e){return o._show(f,e),i},i.hide=function(e){o._hide(f,function(){"function"==typeof e&&e(i)})},i.close=function(e){o._close(f,function(){"function"==typeof e&&e(i),"function"==typeof u&&u(i)})},i.change=function(e){o._change(f,e)},i.templateUrl?i.defer.done(function(e){var t=e;i.templateData&&(t=ct.compile(t,i.templateData)),i.$con.html(t),i.baseTemplate=t,a&&i.content(i)}):a&&i.content(i),p.on("click",".dialog-close",function(){c?i.closeFn(i):(i.hasCancel||i.useBtn)&&s?i.cancel(i):i.close()}).on("click",".js-dialog-done",function(){return(i.hasBtn||i.useBtn)&&r&&i.done(i),r||i.close(),!1}).on("click",".js-dialog-cancel",function(){s?i.cancel(i):i.close()}),i},o.prototype.confirm=function(t){var o=this,n=e.extend({},o.def,{title:"提示"},t,{mark:"dialogDefaultConfirm",isCenter:!0,once:!0,dialogClass:"module-dialog-confirm",params:{__index:11100},done:t.ok,cancel:t.cancel}),i=[];t.messageClass&&(n.dialogClass=n.dialogClass+" "+t.messageClass),i.push('<div class="confirm-msg">'),!t.notWarning&&i.push('<div class="warning"></div>'),i.push(t.message),i.push("</div>"),n.template=i.join("");var a=o.create(n);return a.show(),a},o.prototype.message=function(t){var o=this,n=e.extend({},o.def,{message:"",title:"提示"},t,{mark:"dialogDefaultMessage",isCenter:!0,dialogClass:"module-dialog-confirm",params:{__index:11100},hasCancel:!1,once:!0,done:t.ok});t.messageClass&&(n.dialogClass=n.dialogClass+" "+t.messageClass);var i=[];i.push('<div class="confirm-msg">'),i.push(t.message),i.push("</div>"),n.template=i.join("");var a=o.create(n);return a.show(),a},o.prototype._positionCenter=function(o){var n=this,i=o.dom,a=i.width(),r=i.height();if(t.config.isIE6){e("body").css("position","relative");var s=e(document).width(),c=e(document).height(),l=e(window).height();n.$maskLayer.width(s).height(c),o.dom.css({top:e(document).scrollTop()+l/2,left:"50%",margin:"-"+o.dom.height()/2+"px 0 0 -"+o.dom.width()/2+"px"})}else i.css({top:"50%",left:"50%",margin:"-"+r/2+"px 0 0 -"+a/2+"px"})},o.prototype._show=function(e,t){var o=this;e.isOpen||(o.closeAll(),e.isOpen=!0,o.showList.push(e),e.dom.show(),e.config.isLayer&&o.$maskLayer.show(),e.dom.show().delay().toggleClass("module-dialog-show",!0),e.isVisible=!0,"function"==typeof t&&t(e.config))},o.prototype._hide=function(t,o){var n=this;t.isVisible&&(n.showList.pop(),!n.showList.length&&n.$maskLayer.fadeOut(100),t.isOpen=!1,t.dom.toggleClass("module-dialog-show",!1),t.isVisible=!1,setTimeout(function(){t.dom.hide(),e.isFunction(o)&&o()},200))},o.prototype._close=function(e,t){var o=this;o._hide(e,function(){e.config.once&&(e.dom.remove(),delete o.dialogs[e.config.mark]),"function"==typeof t&&t()})},o.prototype._change=function(e,o){var n=e.dom,i=n.find(o.curPanel),a=n.find(o.targetPanel),r=n.find(".animate-layer"),s=o.width,c=o.height,l=s||c,p={};e.config.$title.text(o.title),c&&(p.height=c+"px"),s&&(p.width=s+"px"),i.hide(),t.config.opacity?(a.css("opacity","0").hide(),a.show({duration:500,easing:"easeOutQuart"}).animate({opacity:"1"},300,function(){"function"==typeof o.callback&&o.callback(e.config)}),r.animate(p,{duration:500,easing:"easeOutQuart"})):(a.show(),l&&r.css(p),s&&n.css({width:s+"px"}),"function"==typeof o.callback&&o.callback(e.config))},o.prototype.closeAll=function(){for(var e=this,t=0,o=e.showList.length;o>t;t++)e.showList[t].config.close()},new o}(jQuery,window.Store));